
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>ming15</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="ming15">
    

    
    <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="ming15">
<meta property="og:url" content="http://www.ming15.wang/page/6/index.html">
<meta property="og:site_name" content="ming15">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ming15">
<meta name="twitter:description">

    
    <link rel="alternative" href="/atom.xml" title="ming15" type="application/atom+xml">
    
    
    
    <link rel="apple-touch-icon" href="/img/author.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/author.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="ming15" title="ming15"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="ming15">ming15</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
						<form class="search" action="http://zhannei.baidu.com/cse/search" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= 17728547076946147000 ><input type="text" name="q" size="30" placeholder="搜索"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/09/08/JavaSE/java8 lambda/" title="java lambda" itemprop="url">java lambda</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-09-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-09-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="函数接口"><a href="#函数接口" class="headerlink" title="函数接口"></a>函数接口</h2><h3 id="函数接口定义"><a href="#函数接口定义" class="headerlink" title="函数接口定义"></a>函数接口定义</h3><p>函数接口只是一个抽象方法的接口,用作lambda表达式类型.</p>
<p>注意, 上面这个定义有三个需要注意的地方</p>
<ol>
<li>函数接口是一个接口</li>
<li>函数接口有且只有一个抽象方法(只有一个表示数量上是唯一的,重载也是不可以)</li>
<li>函数接口用作lambda表达式类型</li>
</ol>
<h3 id="函数接口示例"><a href="#函数接口示例" class="headerlink" title="函数接口示例:"></a>函数接口示例:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个非泛型没有返回值没有参数的函数接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run1</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个非泛型没有返回值有参数的函数接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run2</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">(<span class="keyword">int</span> seconds)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个非泛型有返回值有参数的函数接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run3</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">runFast</span><span class="params">(<span class="keyword">int</span> seconds)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个泛型有返回值有参数的函数接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run4</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">runFast</span><span class="params">(T t, <span class="keyword">int</span> seconds)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="默认方法"><a href="#默认方法" class="headerlink" title="默认方法"></a>默认方法</h3><p>我们知道java8对核心集合类进行了大幅度修改,例如<code>Collection</code>接口添加了<code>stream()</code>方法. 那么所有的<code>Collection</code>实现类都必须来实现该方法. 为了保持二进制接口的兼容性,java8提供了默认方法,来保证这一兼容性(例如来源在java1到jav7平台写出的代码仍然可以在java8平台上编译运行)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run10</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">runAt9Clock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run10 runAt9Clock"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run11</span>  <span class="keyword">extends</span> <span class="title">Run10</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">Run11 run11 = () -&gt; &#123;</span><br><span class="line">	System.out.println();</span><br><span class="line">&#125;;</span><br><span class="line">run11.runAt9Clock();</span><br></pre></td></tr></table></figure></p>
<p>那么所有的子类都可以来调用这个默认方法, 而不必实现它。</p>
<blockquote>
<p>如果接口中只有一个默认方法,那么这个接口就不是接口函数.</p>
</blockquote>
<h4 id="继承默认方法"><a href="#继承默认方法" class="headerlink" title="继承默认方法"></a>继承默认方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run11</span> <span class="keyword">extends</span> <span class="title">Run10</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">runAt9Clock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run11 runAt9Clock"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Run12</span> <span class="keyword">implements</span> <span class="title">Run10</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAt9Clock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run12 runAt9Clock"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面的例子中我们可以看到如果接口<code>Run11</code>继承了接口<code>Run10</code>, 同时重载了默认方法, 那么<code>Run11</code>中的默认方法也必须含有<code>default</code>关键字. 但是在类中重载的话,就可以不必存在了.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Run11 run11 = () -&gt; &#123;</span><br><span class="line">	System.out.println();</span><br><span class="line">&#125;;</span><br><span class="line">run11.runAt9Clock();</span><br><span class="line"></span><br><span class="line">Run12 run12 = <span class="keyword">new</span> Run12();</span><br><span class="line">run12.runAt9Clock();</span><br><span class="line"></span><br><span class="line"><span class="comment">//result</span></span><br><span class="line">run11 runAt9Clock</span><br><span class="line">run12 runAt9Clock</span><br></pre></td></tr></table></figure></p>
<p>接着我们都调用默认方法,我们发现当调用默认方法时都会优先调用子类中的方法.</p>
<h4 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run10</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">runAt9Clock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run10 runAt9Clock"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run13</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">runAt9Clock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run13 runAt9Clock"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Run14</span> <span class="keyword">implements</span> <span class="title">Run10</span>, <span class="title">Run13</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAt9Clock</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上面这个情况下,我们需要手动在<code>Run14</code>这个类中指定重载哪个方法, 否则会产生编译错误：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Run14</span> <span class="keyword">implements</span> <span class="title">Run10</span>, <span class="title">Run13</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runAt9Clock</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Run10.<span class="keyword">super</span>.runAt9Clock();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="接口静态方法"><a href="#接口静态方法" class="headerlink" title="接口静态方法"></a>接口静态方法</h3><p>我们定义一个接口静态方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run1</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">runSlowly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run1 run slowly"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">Run1.runSlowly();</span><br></pre></td></tr></table></figure></p>
<p>需要注意的是：</p>
<ul>
<li>接口静态方法不会被继承到子接口或者子类中</li>
</ul>
<h3 id="FunctionalInterface"><a href="#FunctionalInterface" class="headerlink" title="@FunctionalInterface"></a>@FunctionalInterface</h3><p>所有的函数接口都应该添加<code>@FunctionalInterface</code>注释. 该注释会强制检查javac检查一个接口是否符合函数接口的标准. 如果将这个注释添加给类，枚举，多个方法的接口都会产生编译错误.</p>
<h2 id="lambda表达式"><a href="#lambda表达式" class="headerlink" title="lambda表达式"></a>lambda表达式</h2><h3 id="lambda表达式定义"><a href="#lambda表达式定义" class="headerlink" title="lambda表达式定义"></a>lambda表达式定义</h3><p>接下来我们根据上面定义的函数接口来定义一下lambda表达式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不带参数的版本</span></span><br><span class="line">Run1 run1 = () -&gt; &#123;</span><br><span class="line">	System.out.println(<span class="string">"I am running"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数要指定</span></span><br><span class="line">Run2 run2 = seconds -&gt; &#123;</span><br><span class="line">	System.out.println(<span class="string">"I am running "</span> + seconds + <span class="string">" seconds"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面这个版本就必须要有个返回值了</span></span><br><span class="line">Run3 run3 = seconds -&gt; &#123;</span><br><span class="line">	System.out.println(<span class="string">"I am running"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们在下面的版本中指定了它的泛型信息</span></span><br><span class="line">Run4&lt;String&gt; run4 = (name, seconds) -&gt; &#123;</span><br><span class="line">	System.out.println(name + <span class="string">" is running"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h3 id="lambda表达式使用"><a href="#lambda表达式使用" class="headerlink" title="lambda表达式使用"></a>lambda表达式使用</h3><p>接下来我们使用上面定义的lambda表达式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">run1.runFast();</span><br><span class="line">-&gt; I am running</span><br><span class="line"></span><br><span class="line">run2.runFast(<span class="number">10</span>);</span><br><span class="line">-&gt; I am running <span class="number">10</span> seconds</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> result = run3.runFast(<span class="number">10</span>);</span><br><span class="line">-&gt; I am running</span><br><span class="line"></span><br><span class="line">run4.runFast(<span class="string">"小狗"</span>, <span class="number">10</span>); 小狗 is running</span><br><span class="line">-&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p>我们引用lambda表达式外部的一个变量<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String name = <span class="string">"sam"</span>;</span><br><span class="line">Run1 run1 = () -&gt; &#123;</span><br><span class="line">	System.out.println(name + <span class="string">" am running"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>编译运行通过没有问题,但是如果我们将name在lambda表达式内部重新赋值的话</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String name = <span class="string">"sam"</span>;</span><br><span class="line">Run1 run1 = () -&gt; &#123;</span><br><span class="line">	name = <span class="string">""</span>;</span><br><span class="line">	System.out.println(name + <span class="string">" am running"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>会提示<code>variable used in lambda expression shouble be final</code>, 这说明lambda其实内部引用的是值而不是变量.</p>
<p>好,接下来我们换种方式再次验证一下我们的结果：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String name = <span class="string">"sam"</span>;</span><br><span class="line">name = <span class="string">"Jams"</span>;</span><br><span class="line">Run1 run1 = () -&gt; &#123;</span><br><span class="line">	System.out.println(name + <span class="string">" am running"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>同样的产生了编译错误.</p>
<h4 id="java中重要的函数接口"><a href="#java中重要的函数接口" class="headerlink" title="java中重要的函数接口"></a>java中重要的函数接口</h4><ul>
<li><code>Predicate&lt;T&gt;</code>: <code>boolean test(T t)</code> 判断输入的对象是否符合某个条件</li>
<li><code>Consumer&lt;T&gt;</code>: <code>void accept(T t);</code>  接收一个输入参数并且没有返回值</li>
<li><code>Supplier&lt;T&gt;</code>: <code>T get();</code>  可以看成一个对象的工厂，每次调用返回一个给定类型的对象</li>
<li><code>UnaryOperator&lt;T&gt;</code>: ``</li>
<li><code>BinaryOperator&lt;T&gt;</code>: ``</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>在Java8中什么是函数呢？<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Run1 run1 = () -&gt; &#123;</span><br><span class="line">	System.out.println(<span class="string">"I am running"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>上面<code>run1</code>这个就代表一个函数. 一般我们把属于某个类的函数称为方法, 而不依赖于类而存在的函数称之为方法.</p>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><p>如果某个函数A作为函数B的参数或者返回值, 那么我们称函数B为高阶函数,像下面的<code>run6</code>就是一个高级函数<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run6</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Run1 run1)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Run6 run6 = run1Param -&gt; &#123;</span><br><span class="line">			System.out.println(<span class="string">"run6"</span>);</span><br><span class="line">			run1Param.runFast();</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">run6.run(run1);</span><br></pre></td></tr></table></figure></p>
<p>我们将<code>run1</code>这个函数作为方法传递给了<code>run6</code>.</p>
<h4 id="返回函数"><a href="#返回函数" class="headerlink" title="返回函数"></a>返回函数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run8</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String name, <span class="keyword">int</span> second, <span class="keyword">int</span> mils)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run9</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Run8 <span class="title">run</span><span class="params">(Run8 run8)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Run8 run8 = (name, second, mils) -&gt; &#123;</span><br><span class="line">	System.out.println();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Run9 run9 = run8Param -&gt; &#123;</span><br><span class="line">	<span class="keyword">return</span> run8Param.run(<span class="string">"lily"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在上述的例子中产生了编译错误, 在<code>Haskell</code>这种纯FP语言中可以将一个调用函数但是参数不完整的函数从某个参数中返回或者定义一个参数不完整的函数值.</p>
<h3 id="重载解析"><a href="#重载解析" class="headerlink" title="重载解析"></a>重载解析</h3><p>我们使用函数接口作为方法参数,然后进行重载<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义函数接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run1</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run2</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义重载代码</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Run1 run1)</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Run2 run2)</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"run2"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义运行代码</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	run(() -&gt; System.out.println());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当我们进行如上定义时,javac提示了编译错误：不确定的方法调用,<code>run(Run1 run1)</code>和<code>run(Run2 run2)</code>都符合.</p>
<p>但是如果<code>Run2</code>继承了<code>Run1</code>这个接口之后<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run1</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Run2</span> <span class="keyword">extends</span> <span class="title">Run1</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runFast</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当我们运行测试代码之后,我们发现输出的<code>run2</code>.</p>
<p>当Lambda表达式作为参数时,其类型由它的目标类型推导得出,推导过程遵循如下规则：</p>
<ul>
<li>如果只有一个可能的目标类型,由相应的函数接口里的参数类型推导得出</li>
<li>如果有多个可能的目标类型，由最具体的类型推导得出</li>
<li>如果有多个可能的目标类型且最具体的类型不明确，则需要人为指定类型</li>
</ul>
<h2 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h2><p>方法引用是简洁的Lambda表达式，能够用于已经拥有名称的方法。</p>
<ul>
<li>静态方法 (ClassName::methName)</li>
<li>对象实例方法 (instanceRef::methName)</li>
<li>类型的实例方法 (ClassName::methName, 引用时和静态方法是一样的，但这里的 methName 是个实例方法)</li>
<li>构造方法 (ClassName::new)</li>
<li>数组的构造方法 (TypeName[]::new)</li>
</ul>
<h3 id="静态方法引用"><a href="#静态方法引用" class="headerlink" title="静态方法引用"></a>静态方法引用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Print</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		F f = Print::p;</span><br><span class="line">		f.m();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">p</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Print"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">F</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">m</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="类型实例方法引用"><a href="#类型实例方法引用" class="headerlink" title="类型实例方法引用"></a>类型实例方法引用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Print</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		F f = String::length;</span><br><span class="line">		<span class="keyword">int</span> len = f.m(<span class="string">"12"</span>);</span><br><span class="line">		System.out.println(len);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">F</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">m</span><span class="params">(String p)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="构造方法引用"><a href="#构造方法引用" class="headerlink" title="构造方法引用"></a>构造方法引用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Print</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		F f = Print::<span class="keyword">new</span>;</span><br><span class="line">		Print p = f.m();</span><br><span class="line">		System.out.println(p == <span class="keyword">null</span>);	<span class="comment">// 结果为null</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">F</span> </span>&#123;</span><br><span class="line">	<span class="function">Print <span class="title">m</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>Java8还提供了闭包这个特性,虽然我不知道闭包这个特性有啥用,但是还是实验了一下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Java8</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		I i = () -&gt; &#123;</span><br><span class="line">			C c = <span class="keyword">new</span> C();</span><br><span class="line">			c.count = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">			J j = () -&gt; &#123;</span><br><span class="line">				System.out.println(<span class="string">"J print c:"</span> + c.count);</span><br><span class="line">				<span class="keyword">return</span> c;</span><br><span class="line">			&#125;;</span><br><span class="line"></span><br><span class="line">			System.out.println(<span class="string">"I print c:"</span> + c.count);</span><br><span class="line">			<span class="keyword">return</span> j;</span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		J j = i.r();</span><br><span class="line">		C c = j.c();</span><br><span class="line">		c.count = <span class="number">20</span>;</span><br><span class="line">		System.out.println(<span class="string">"main print c:"</span> + c.count);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> J <span class="title">r</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">J</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> C <span class="title">c</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们定义了俩个接口, <code>I</code>和<code>J</code>, 我们在I的lambada中调用J的lambada, 然后让J返回一个定义在I的对象C, 最后我们在main函数中成功的返回了这个对象.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/JavaSE/">JavaSE</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/09/08/JavaSE/java8 lambda/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/09/08/JavaSE/java8 lambda/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/日志工具/logstash 语法/" title="logstash 语法" itemprop="url">logstash 语法</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>一般我们将logstash的配置写到一个配置文件中. 然后在启动logstash时,加载这些配置.</p>
<p>然后我们就可以在配置文件中写自己的插件配置. 常用的插件有<code>input</code>, <code>codec</code>, <code>filter</code>, <code>output</code>, 一般我们最少也要写一个<code>input</code>插件, 否则启动的时候会报错.</p>
<p>插件的形式如下<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    stdin &#123;&#125;</span><br><span class="line">    syslog &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>{}</code>称为区域, 我们可以在区域里定义新的插件. 我们还可以在区域内定义字段, 然后在其他的插件中引用这个字段, 例如<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    stdin &#123;</span><br><span class="line">		type =&gt; "std"</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/日志工具/">日志工具</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/日志工具/logstash 语法/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/日志工具/logstash 语法/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/mgits/unity命令行使用/" title="unity命令行使用" itemprop="url">unity命令行使用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Command-line-arguments"><a href="#Command-line-arguments" class="headerlink" title="Command line arguments"></a>Command line arguments</h1><p>当从命令行启动<code>Unity</code>时,它可以在启动时接受一些参数和信息, 这种方式可以用于测试用例，自动构建和其他的任务。</p>
<p>在<code>MacOS</code>系统下，你可以像下面这样启动<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Unity/Unity.app/Contents/MacOS/Unity</span><br></pre></td></tr></table></figure></p>
<p>当在windows系统里，你就需要执行下面的命令了<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"C:\Program Files (x86)\Unity\Editor\Unity.exe"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><p>正如上面提到的,<code>editor</code>也可以在启动时通过一些额外的命令来构建游戏, 下面就列举出了这些命令：</p>
<ul>
<li><code>-assetServerUpdate &lt;IP[:port] projectName username password [r &lt;revision&gt;]&gt;</code>    从<code>IP:port</code>上的<code>Asset Server</code>强制更新项目. <code>port</code>是可选的,如果不指定的话,会默认选择<code>10733</code>这个端口. 这个命令可与<code>-projectPath</code>参数一起使用, 这样可确保你不会更新错项目.如果不指定项目名称的话,那么会默认的对<code>Unity</code>上次打开的项目进行更新. 如果<code>-projectPath</code>路径下不存在项目,那么会自动创建一个.</li>
<li><code>-batchmode</code>  在<code>batch</code>模式下运行<code>Unity</code>.这个命令我们强烈建议你与其他命令一起使用, 它会确保不会弹出Edtior. 当由脚本代码抛出异常或者<code>Asset Server</code>更新失败或者其他操作引起的异常,<code>Unity</code>会直接返回错误码<code>1</code>并退出. 需要注意的是,在<code>batch</code>模式下,<code>Unity</code>会在控制台输出一些基础日志. 还有当在<code>batch</code>模式下打开一个项目,那么<code>Editor</code>就不能再开打这个相同的项目.</li>
<li><code>-buildLinux32Player &lt;pathname&gt;</code>    构建一个32位的linux版应用.(例如 <code>-buildLinux32Player path/to/your/build</code>).</li>
<li><code>-buildLinux64Player &lt;pathname&gt;</code>    构建一个64位的linux版应用.(例如 <code>-buildLinux64Player path/to/your/build</code>).</li>
<li><code>-buildLinuxUniversalPlayer &lt;pathname&gt;</code>    构建一个32位和64位的linux混合版应用.(例如 <code>-buildLinuxUniversalPlayer path/to/your/build</code>).</li>
<li><code>-buildOSXPlayer &lt;pathname&gt;</code>    构建一个32位的MacOS版应用.(例如 <code>-buildOSXPlayer path/to/your/build.app</code>).</li>
<li><code>-buildOSX64Player &lt;pathname&gt;</code>    构建一个64位的MacOS版应用.(例如 <code>-buildOSX64Player path/to/your/build.app</code>).</li>
<li><code>-buildOSXUniversalPlayer &lt;pathname&gt;</code>    构建一个32位和64位的MacOs混合版应用.(例如 <code>-buildOSXUniversalPlayer path/to/your/build.app</code>).</li>
<li><code>-buildTarget &lt;name&gt;</code>    当项目被加载之前允许用户选择的构建目标：<code>win32, win64, osx, linux, linux64, ios, android, web, webstreamed, webgl, xbox360, xboxone, ps3, ps4, psp2, wsa, wp8, bb10, tizen, samsungtv</code>.</li>
<li><code>-buildWebPlayer &lt;pathname&gt;</code>    构建一个在web上运行的应用.(例如<code>-buildWebPlayer path/to/your/build</code>).</li>
<li><code>-buildWebPlayerStreamed &lt;pathname&gt;</code>    Build a streamed WebPlayer (<code>-buildWebPlayerStreamed path/to/your/build</code>).</li>
<li><code>-buildWindowsPlayer &lt;pathname&gt;</code>    构建一个32位的Windows版应用.(例如  <code>-buildWindowsPlayer path/to/your/build.exe</code>).</li>
<li><code>-buildWindows64Player &lt;pathname&gt;</code>    构建一个64位的Windows版应用.(例如  <code>-buildWindows64Player path/to/your/build.exe</code>).</li>
<li><code>-createProject &lt;pathname&gt;</code>    在指定路径下(<code>pathname</code>)创建一个空项目.</li>
<li><code>-executeMethod &lt;ClassName.MethodName&gt;</code>    只要Unity启动完成并且项目打开(可能还需要等待asset server更新完成)就执行该静态方法. 该功能可用于持续集成, 运行测试用例, 执行构建任务, 准备一些数据等等. 如果你想让程序在命令行中返回一个错误码,那么你可以直接在Unity中直接抛出一个异常,这时命令行返回的错误码是1，或者你可以调用<code>EditorApplication.Exit</code>,这时会返回一个非0的状态码. 如果你想要向该方法传递参数,那么你可以直接将这些参数添加到命令行上,然后在程序中使用<code>System.Environment.GetCommandLineArgs</code>获得这些参数.To use -executeMethod, you need to place the enclosing script in an Editor folder. The method to be executed must be defined as static.</li>
<li><code>-exportPackage &lt;exportAssetPath1 exportAssetPath2 ExportAssetPath3 exportFileName&gt;</code>    在指定的路径下导出<code>package</code>. <code>exportAssetPath</code>是一个从Unity项目导出到的文件夹(路径相对于Unity项目的根路径), <code>exportFileName</code>是package的名字. 一般这个选项可以一次性地导出整个文件夹.这个命令一般需要和<code>-projectPath</code>参数一起使用.</li>
<li><code>-force-d3d9 (Windows only)</code>    设置editor使用<code>Direct3D 9</code>进行渲染. 这个是默认选项,一般不需要你去设置这个值.</li>
<li><code>-force-d3d11 (Windows only)</code>    设置editor使用<code>Direct3D 11</code>进行渲染.</li>
<li><code>-force-opengl (Windows only)</code>    设置editor使用<code>OpenGL</code>进行渲染. 即使<code>Direct3D</code>可用我们也可以说使用<code>OpenGL</code>进行渲染. 一般我们是在<code>Direct3D 9.0c</code>不可用的情况下才选择使用<code>openGL</code></li>
<li><code>-force-free</code>    让edtior在<code>Unity license</code>下运行, 即使我们安装了<code>Unity Pro license</code></li>
<li><code>-importPackage &lt;pathname&gt;</code>    导入指定的<code>package</code>. 如果不进行导入的话,会出现一个对话框.</li>
<li><code>-logFile &lt;pathname&gt;</code>    指定Editor或者<code>Windows/Linux/OSX</code>版本应用的日志输出路径.</li>
<li><code>-silent-crashes</code>    不显示crashe对话框.</li>
<li><code>-projectPath &lt;pathname&gt;</code>    在指定的路径下打开项目.</li>
<li><code>-quit</code>    当其他命令都执行完之后退出Unity. 注意这个会将错误日志隐藏掉，但是可以在<code>Editor.log</code>中找到它.</li>
<li><code>-serial &lt;serial&gt;</code>    Activates Unity with the specified serial key. It is recommended to pass “-batchmode -quit” arguments as well, in order to quit Unity when done, if using this for automated activation of Unity. Please allow a few seconds before license file is created, as Unity needs to communicate with the license server. Make sure that License file folder exists, and has appropriate permissions before running Unity with this argument. In case activation fails, see the Editor.log for info. This option is new in Unity 5.0.</li>
</ul>
<h4 id="Example-usage"><a href="#Example-usage" class="headerlink" title="Example usage"></a>Example usage</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C# example</span></span><br><span class="line">using UnityEditor;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEditorScript</span></span><br><span class="line"></span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PerformBuild</span> <span class="params">()</span></span><br><span class="line">     </span>&#123;</span><br><span class="line">         string[] scenes = &#123; <span class="string">"Assets/MyScene.unity"</span> &#125;;</span><br><span class="line">         BuildPipeline.BuildPlayer(scenes, ...);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// JavaScript example</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PerformBuild</span> <span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    string[] scenes = &#123; <span class="string">"Assets/MyScene.unity"</span> &#125;;</span><br><span class="line">    BuildPipeline.BuildPlayer(scenes, ...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面的命令在<code>batch</code>模式下运行Unity, 同时执行<code>MyEditorScript.MyMethod</code>完成, 当该方法执行完之后退出.</p>
<ul>
<li><code>Windows</code>: <code>C:\program files\Unity\Editor\Unity.exe -quit -batchmode -executeMethod MyEditorScript.MyMethod</code></li>
<li><code>Mac OS</code>: <code>/Applications/Unity/Unity.app/Contents/MacOS/Unity -quit -batchmode -executeMethod MyEditorScript.MyMethod</code></li>
</ul>
<p>下面的命令在<code>batch</code>执行Unity, 同时从<code>asset server</code>更新指定项目. 当全部的<code>asset</code>下载完之后, 指定的方法会被执行,当方法被完全执行之后,Unity会自动退出.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Unity/Unity.app/Contents/MacOS/Unity -batchmode -projectPath ~/UnityProjects/AutobuildProject -assetServerUpdate <span class="number">192.168</span>.1.1 MyGame AutobuildUser l33tpa33 -executeMethod MyEditorScript.PerformBuild -quit</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/mgits/">mgits</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/mgits/unity命令行使用/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/mgits/unity命令行使用/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2模块/" title="PYTHON2 模块" itemprop="url">PYTHON2 模块</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>模块是一个包含函数和变量的文件。为了在其他程序中重用模块，模块的文件名必须以.py为扩展名。</p>
<h3 id="使用sys模块"><a href="#使用sys模块" class="headerlink" title="使用sys模块"></a>使用<code>sys</code>模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> argv <span class="keyword">in</span> sys.argv :</span><br><span class="line">    print(argv)</span><br></pre></td></tr></table></figure>
<p>使用<code>from..import..</code>, <code>import</code>可以使用<code>*</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> argvtmp <span class="keyword">in</span> argv :</span><br><span class="line">    print(argvtmp)</span><br></pre></td></tr></table></figure></p>
<p>模块的name,下面的语法输出当前模块的name<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(__name__)</span><br></pre></td></tr></table></figure></p>
<h3 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h3><ul>
<li><p>建立<code>mymodule.py</code>文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Filename: mymodule.py</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printModuleName</span><span class="params">()</span>:</span></span><br><span class="line">    print(__name__)</span><br></pre></td></tr></table></figure>
</li>
<li><p>建立<code>test_mymodule.py</code>文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mymodule</span><br><span class="line"></span><br><span class="line">mymodule.printModuleName()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>需要注意的是<code>mymodule.py</code>文件的<code>Filename</code>必须和文件名相同</li>
<li>如果<code>module</code>的name是<code>__main__</code>说明这个module是由用户启动的</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2模块/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2模块/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2字符串/" title="PYTHON2 字符串函数" itemprop="url">PYTHON2 字符串函数</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <ul>
<li><p><code>capitalize(...)</code> : Python capitalize()将字符串的第一个字母变成大写,其他字母变小写。<code>print &quot;abc&quot;.capitalize()</code></p>
</li>
<li><p><code>center(...)</code> : 返回一个原字符串居中,并使用空格填充至长度 width 的新字符串。默认填充字符为空格。<code>print &quot;abc&quot;.center(10, &quot;1&quot;)</code>结果为<code>111abc1111</code><br>··</p>
</li>
<li><p><code>count(...)</code> : 用于统计字符串里某个字符出现的次数。可选参数为在字符串搜索的开始与结束位置。<code>&quot;abcdefg&quot;.count(&quot;c&quot;, 2, 4)</code>结果为<code>1</code></p>
</li>
<li><p><code>encode(...)</code> : encoding 指定的编码格式编码字符串。errors参数可以指定不同的错误处理方案。<code>S.encode(encoding=&#39;utf-8&#39;, errors=&#39;strict&#39;) -&gt; bytes</code> </p>
</li>
<li><p><code>endswith(...)</code> : 用于判断字符串是否以指定后缀结尾，如果以指定后缀结尾返回True，否则返回False。可选参数”start”与”end”为检索字符串的开始与结束位置。<code>&quot;abcdefg&quot;.endswith(&quot;d&quot;, 2, 4)</code>结果为true</p>
</li>
<li><p><code>expandtabs(...)</code> : <code>S.expandtabs(tabsize=8) -&gt; str</code> 把字符串中的 tab 符号(‘\t’)转为空格，默认的空格数 tabsize 是 8。</p>
</li>
<li><p><code>find(...)</code> : <code>S.find(sub[, start[, end]]) -&gt; int</code> 检测字符串中是否包含子字符串 str ，如果指定 beg（开始） 和 end（结束） 范围，则检查是否包含在指定范围内，如果包含子字符串返回开始的索引值，否则返回-1。</p>
</li>
<li><p><code>rfind(...)</code> : <code>S.rfind(sub[, start[, end]]) -&gt; int</code> 返回字符串最后一次出现的位置，如果没有匹配项则返回-1。</p>
</li>
<li><p><code>format(...)</code> : <code>&quot;abcd{0}fg&quot;.format(&quot;sdf&quot;)</code> {0}被替换成sdf</p>
</li>
<li><p><code>index(...)</code> : <code>S.index(sub[, start[, end]]) -&gt; int</code>检测字符串中是否包含子字符串 str ，如果指定 beg（开始） 和 end（结束） 范围，则检查是否包含在指定范围内，该方法与 python find()方法一样，只不过如果str不在 string中会报一个异常。</p>
</li>
<li><p><code>rindex(...)</code> : <code>S.rindex(sub[, start[, end]]) -&gt; int</code> 返回子字符串 str 在字符串中最后出现的位置，如果没有匹配的字符串会报异常，你可以指定可选参数[beg:end]设置查找的区间。</p>
</li>
<li><p><code>isalnum(...)</code> : <code>S.isalnum() -&gt; bool</code> 判断字符串是否包含字母数字。</p>
</li>
<li><p><code>isalpha(...)</code> : <code>S.isalpha() -&gt; bool</code> 检测字符串是否只由字母组成。</p>
</li>
<li><p><code>isdecimal(...)</code> : <code>S.isdecimal() -&gt; bool</code> 检查字符串是否只包含十进制字符。这种方法只存在于unicode对象。</p>
</li>
<li><p><code>isdigit(...)</code> : <code>S.isdigit() -&gt; bool</code> 检测字符串是否只由数字组成。</p>
</li>
<li><p><code>islower(...)</code> : <code>S.islower() -&gt; bool</code> 检测字符串是否由小写字母组成。</p>
</li>
<li><p><code>isnumeric(...)</code> : <code>S.isnumeric() -&gt; bool</code> 检查是否只有数字字符组成的字符串。这种方法目前只对unicode对象。</p>
</li>
<li><p><code>isspace(...)</code> : <code>S.isspace() -&gt; bool</code> 是否只由空格组成。</p>
</li>
<li><p><code>istitle(...)</code> : <code>S.istitle() -&gt; bool</code> 检测字符串中所有的单词拼写首字母是否为大写，且其他字母为小写。</p>
</li>
<li><p><code>isupper(...)</code> : <code>S.isupper() -&gt; bool</code> 检测字符串中所有的字母是否都为大写。</p>
</li>
<li><p><code>join(...)</code> : <code>S.join(iterable) -&gt; str</code> 用于将序列中的元素以指定的字符连接生成一个新的字符串。</p>
</li>
<li><p><code>ljust(...)</code> : <code>S.ljust(width[, fillchar]) -&gt; str</code> 返回一个原字符串左对齐,并使用空格填充至指定长度的新字符串。如果指定的长度小于原字符串的长度则返回原字符串。</p>
</li>
<li><p><code>rjust(...)</code> : <code>S.rjust(width[, fillchar]) -&gt; str</code> 返回一个原字符串右对齐,并使用空格填充至长度 width 的新字符串。如果指定的长度小于字符串的长度则返回原字符串。</p>
</li>
<li><p><code>lower(...)</code> : <code>S.lower() -&gt; str</code> 转换字符串中所有大写字符为小写。</p>
</li>
<li><p><code>lstrip(...)</code> : <code>S.lstrip([chars]) -&gt; str</code> 用于截掉字符串左边的空格或指定字符。</p>
</li>
<li><p><code>partition(...)</code> : <code>S.partition(sep) -&gt; (head, sep, tail)</code> Search for the separator sep in S, and return the part before it,the separator itself, and the part after it.  If the separator is not found, return S and two empty strings.</p>
</li>
<li><p><code>rpartition(...)</code> : <code>S.rpartition(sep) -&gt; (head, sep, tail)</code> 类似于 partition()函数,不过是从右边开始查找.</p>
</li>
<li><p><code>replace(...)</code> : <code>S.replace(old, new[, count]) -&gt; str</code> 把字符串中的 old（旧字符串） 替换成 new(新字符串)，如果指定第三个参数max，则替换不超过 max 次。</p>
</li>
<li><p><code>split(...)</code> : <code>S.split(sep=None, maxsplit=-1) -&gt; list of strings</code> 通过指定分隔符对字符串进行切片，如果参数num 有指定值，则仅分隔 num 个子字符串. 另外参考<code>rsplit(...)</code></p>
</li>
<li><p><code>splitlines(...)</code> : <code>S.splitlines([keepends]) -&gt; list of strings</code> 返回一个字符串的所有行，可选包括换行符列表(如果num提供，则为true)</p>
</li>
<li><p><code>startswith(...)</code> : <code>S.startswith(prefix[, start[, end]]) -&gt; bool</code> 用于检查字符串是否是以指定子字符串开头，如果是则返回 True，否则返回 False。如果参数 beg 和 end 指定值，则在指定范围内检查。</p>
</li>
<li><p><code>strip(...)</code> : <code>S.strip([chars]) -&gt; str</code> 用于移除字符串头尾指定的字符（默认为空格）。</p>
</li>
<li><p><code>rstrip(...)</code> : <code>S.rstrip([chars]) -&gt; str</code> 删除 string 字符串末尾的指定字符（默认为空格）.</p>
</li>
<li><p><code>swapcase(...)</code> : <code>S.swapcase() -&gt; str</code> 用于对字符串的大小写字母进行转换。</p>
</li>
<li><p><code>title(...)</code> : <code>S.title() -&gt; str</code> 返回”标题化”的字符串,就是说所有单词都是以大写开始，其余字母均为小写(见 istitle())。</p>
</li>
<li><p><code>translate(...)</code> : <code>S.translate(table) -&gt; str</code> 根据参数table给出的表(包含 256 个字符)转换字符串的字符, 要过滤掉的字符放到 del 参数中。</p>
</li>
<li><p><code>upper(...)</code> : <code>S.upper() -&gt; str</code> 将字符串中的小写字母转为大写字母。</p>
</li>
<li><p><code>zfill(...)</code> : <code>S.zfill(width) -&gt; str</code> 返回指定长度的字符串，原字符串右对齐，前面填充0。</p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2字符串/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2字符串/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/mgits/IDEA 设置/" title="IDEA 设置" itemprop="url">IDEA 设置</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="缩进设置"><a href="#缩进设置" class="headerlink" title="缩进设置"></a>缩进设置</h2><p><img src="https://raw.githubusercontent.com/ming15/blog-website/images/other/idea_indent.jpg" alt=""></p>
<ul>
<li><code>Use tab character</code> : 如果勾选则使用tab缩进,否则使用空格缩进</li>
<li><code>Tab size</code> : 每个tab占用几个空格.</li>
<li><code>Indent</code> : 每个缩进占用几个空格.</li>
</ul>
<h2 id="2016-03-03"><a href="#2016-03-03" class="headerlink" title="2016-03-03"></a>2016-03-03</h2><p>刚刚来到了新的项目, 新的项目里使用Gradle作为编译工具.  说完前文说正题: 开发完新的模块后打算写单元测试来验证一下自己的功能. 但是在运行的时候遇到了一些问题, 由于整个项目都没进行单元测试的编写, 因此需要搭建起这个环境,</p>
<p>其实环境很简单只要单元测试能编译通过运行就ok了，但是仍然发生了一些问题,由于项目是从JDK7升级上来的, 因此有些地方还是采用的配置, 因此当发现在编译时遇到了</p>
<ul>
<li>class版本不支持</li>
<li>提示:无效的源发行版: 1.8<br>我们要检查俩个地方</li>
<li>build.gradle 这个文件里指定了编译器版本(例如sourceCompatibility, 需要注意的是看看是否依赖了其他的gradle配置, 我就踩中了这个坑)</li>
<li>Intellij IDEA -Preference-Build, Execution, Deployment-Gradle -Gradle JVM, 看一下这个配置里面的配置, 当我将gradle的配置修改之后如果不修改这里就会出现  无效的源发行版: 1.8</li>
</ul>
<p>另外我们一般在项目里会设置JDK版本(项目右击Open Moudle Setting), 这个只是设置整个idea的项目相关的, 也就是和你写代码相关, 和项目的构建等等没啥关系</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/mgits/">mgits</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/mgits/IDEA 设置/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/mgits/IDEA 设置/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2函数/" title="PYTHON2 函数" itemprop="url">PYTHON2 函数</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="定义一个不带参数的函数"><a href="#定义一个不带参数的函数" class="headerlink" title="定义一个不带参数的函数"></a>定义一个不带参数的函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个不带参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"hello world"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 调用函数</span></span><br><span class="line">printHelloworld()</span><br></pre></td></tr></table></figure>
<h3 id="定义一个带参数的函数"><a href="#定义一个带参数的函数" class="headerlink" title="定义一个带参数的函数"></a>定义一个带参数的函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个带参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(saywhat)</span>:</span></span><br><span class="line">    print(saywhat)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 调用函数</span></span><br><span class="line">printHelloworld(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="函数中的局部变量"><a href="#函数中的局部变量" class="headerlink" title="函数中的局部变量"></a>函数中的局部变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个带参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(saywhat)</span>:</span></span><br><span class="line">    value = saywhat</span><br><span class="line">    print(value)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 调用函数</span></span><br><span class="line">printHelloworld(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure>
<p>当在函数内部修改了局部变量之后,并不会影响脚本中的变量<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个带参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(saywhat)</span>:</span></span><br><span class="line">    print(saywhat)</span><br><span class="line">    saywhat = <span class="string">"new value"</span></span><br><span class="line">    print(saywhat)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">str = <span class="string">"hello world"</span></span><br><span class="line">printHelloworld(str)</span><br><span class="line">print(str)</span><br></pre></td></tr></table></figure></p>
<h3 id="使用global语句"><a href="#使用global语句" class="headerlink" title="使用global语句"></a>使用global语句</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义一个带参数的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> saywhat <span class="comment">## 此处不可进行初始化</span></span><br><span class="line">    saywhat = <span class="string">"new value"</span></span><br><span class="line">    print(saywhat)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">printHelloworld()</span><br><span class="line">print(saywhat)</span><br></pre></td></tr></table></figure>
<h3 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h3><p>我们也可以给函数参数指定默认值<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(str, str1=<span class="string">"str1 value"</span>, str2=<span class="string">"str2 value"</span>)</span>:</span></span><br><span class="line">    print(str + <span class="string">" "</span> + str1 + <span class="string">" "</span> + str2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">printHelloworld(<span class="string">"123"</span>, str2=<span class="string">"789"</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><p>python函数也可以接受不定参数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(*args)</span>:</span></span><br><span class="line">	print(args)</span><br><span class="line"></span><br><span class="line">f(<span class="number">1</span>)</span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<p>输出为<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>,)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="return返回值"><a href="#return返回值" class="headerlink" title="return返回值"></a>return返回值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(str, str1=<span class="string">"str1 value"</span>, str2=<span class="string">"str2 value"</span>)</span>:</span></span><br><span class="line">    print(str)</span><br><span class="line">    <span class="keyword">if</span> str1==<span class="string">"str1 value"</span> :</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"nil value"</span></span><br><span class="line">    print(str1)</span><br><span class="line">    print(str2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">result = printHelloworld(<span class="string">"123"</span>, str2=<span class="string">"789"</span>)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">result = printHelloworld(<span class="string">"123"</span>, str1=<span class="string">"789"</span>)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><p>如果函数A里的参数或者返回值是另一个函数,那么函数A就是高阶函数.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add5</span><span class="params">(v1)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> v1 + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(v1, v2, add5)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> add5(v1) + add5(v2)</span><br><span class="line"></span><br><span class="line">print(add(<span class="number">2</span>, <span class="number">4</span>, add5))</span><br></pre></td></tr></table></figure></p>
<h4 id="内置高阶函数"><a href="#内置高阶函数" class="headerlink" title="内置高阶函数"></a>内置高阶函数</h4><p><code>map()</code>函数：它接受一个函数和一个列表,然后遍历列表中的每个元素作用在函数参数中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(map(add5, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line">// 结果为</span><br><span class="line">[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure></p>
<p><code>reduce()</code>函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p><code>filter()</code>函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>在2.7版本中必须要如下声明一个闭包<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outerF</span><span class="params">()</span>:</span></span><br><span class="line">	count = [<span class="number">10</span>]</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">innerF</span><span class="params">()</span>:</span></span><br><span class="line">		print(count[<span class="number">0</span>])</span><br><span class="line">		count[<span class="number">0</span>] = <span class="number">20</span></span><br><span class="line">	<span class="keyword">return</span> innerF</span><br><span class="line"></span><br><span class="line">f = outerF()</span><br><span class="line">f()</span><br><span class="line">f()</span><br></pre></td></tr></table></figure></p>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>python通过lambda表达式完成匿名函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nonameF</span><span class="params">(f, v1)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> f(v1)</span><br><span class="line"></span><br><span class="line">value = nonameF(<span class="keyword">lambda</span> x: x + <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">print(value)</span><br></pre></td></tr></table></figure></p>
<p>不过python只是有限的支持匿名函数, 匿名函数只能是一个表达式,而且不能拥有return,表达式的结果就是返回值</p>
<h3 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h3><p>偏函数就是通过<code>functools.partial</code>函数将函数A中的参数指定一个值然后返回一个新的函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fa</span><span class="params">(var1, var2, var3)</span>:</span></span><br><span class="line">	print(var1 + var2 + var3)</span><br><span class="line"></span><br><span class="line">fb = functools.partial(fa, var2=<span class="number">2</span>, var3=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">fa(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">fb(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p>
<p>最后我们看到了相同的结果</p>
<h3 id="重定义"><a href="#重定义" class="headerlink" title="重定义"></a>重定义</h3><p>我们可以对一个已经存在的函数重新定义行为<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(*args)</span>:</span></span><br><span class="line">	print(args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">f = <span class="keyword">lambda</span> : <span class="number">15</span></span><br><span class="line">print(f())</span><br><span class="line"></span><br><span class="line">n = f</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line">print(n())</span><br><span class="line">print(f())</span><br></pre></td></tr></table></figure></p>
<p>从这一点可以验证在python中函数也是对象.</p>
<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><p>装饰器本质上就是一个高阶函数，它接收一个函数作为参数，然后，返回一个新函数。</p>
<p>python通过<code>@</code>语法内置实现装饰器<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fb</span><span class="params">(f)</span>:</span></span><br><span class="line">	print(<span class="string">"fb"</span>)</span><br><span class="line">	<span class="keyword">return</span> f</span><br><span class="line"></span><br><span class="line"><span class="meta">@fb</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fa</span><span class="params">(var1, var2, var3)</span>:</span></span><br><span class="line">	print(var1 + var2 + var3)</span><br><span class="line"></span><br><span class="line">fa(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure></p>
<p>上面这个例子每次在调用<code>fa</code>方法时都会输出一个<code>fb</code>字符串</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2函数/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2函数/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2 JSON/" title="PYTHON2 json" itemprop="url">PYTHON2 json</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>使用<code>dump()</code>方法将对象序列化成json,然后使用<code>load()</code>将字符串反序列化成对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding=utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">list = [<span class="number">123</span>, <span class="string">"ad"</span>]</span><br><span class="line">listJson = json.dumps(list)</span><br><span class="line">listR = json.loads(listJson)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"列表序列化 : "</span> + listJson</span><br><span class="line"><span class="keyword">print</span> <span class="string">"列表反序列化 : "</span> + str(listR[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">tumple = (<span class="number">123</span>, <span class="string">"adf"</span>)</span><br><span class="line">tumpleJson = json.dumps(tumple)</span><br><span class="line">tumpleR = json.loads(tumpleJson)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"元组序列化 : "</span> + tumpleJson</span><br><span class="line"><span class="keyword">print</span> <span class="string">"元组反序列化 : "</span> + str(tumpleR[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">map = &#123;</span><br><span class="line">       <span class="string">"key1"</span>:<span class="string">"value1"</span>,</span><br><span class="line">       <span class="string">"key2"</span>:<span class="string">"value2"</span>,</span><br><span class="line">       <span class="string">"key3"</span>:<span class="string">"value3"</span>,</span><br><span class="line">       &#125;</span><br><span class="line">mapJson = json.dumps(map)</span><br><span class="line">mapR = json.loads(mapJson)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"字典序列化 : "</span> + mapJson</span><br><span class="line"><span class="keyword">print</span> <span class="string">"字典反序列化 : "</span> + str(mapR[<span class="string">"key1"</span>])</span><br><span class="line"></span><br><span class="line">seq = [<span class="string">'apple'</span>, <span class="string">'mango'</span>, <span class="string">'carrot'</span>, <span class="string">'banana'</span>]</span><br><span class="line">seqJson = json.dumps(seq)</span><br><span class="line">seqR = json.loads(seqJson)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"序列序列化 : "</span> + seqJson</span><br><span class="line"><span class="keyword">print</span> <span class="string">"序列反序列化 : "</span> + str(seqR[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type tumpleR[<span class="number">1</span>]</span><br><span class="line">type mapR[<span class="string">"key1"</span>]</span><br><span class="line">type seqR[<span class="number">1</span>]</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2 JSON/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2 JSON/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2多线程/" title="PYTHON2 多线程" itemprop="url">PYTHON2 多线程</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="启动多线程"><a href="#启动多线程" class="headerlink" title="启动多线程"></a>启动多线程</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">socketSendData</span><span class="params">()</span>:</span></span><br><span class="line">    client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">    client.connect((<span class="string">'www.baidu.com'</span>,<span class="number">80</span>))</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">20000</span>, <span class="number">1</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">       t = threading.Thread(target=socketSendData)</span><br><span class="line">       info = t.start()</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">       count += <span class="number">1</span></span><br><span class="line">       <span class="keyword">print</span> <span class="string">"Error: unable to start thread  "</span> + str(count)</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2多线程/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2多线程/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/日志工具/logstash 读取日志/" title="logstash读取日志" itemprop="url">logstash读取日志</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>启动logstash时,我们需要指定配置文件, 以便让logstash按照我们配置的方式进行工作, 例如<code>logstash -f ./logstash.conf</code></p>
<h2 id="接受标准日志"><a href="#接受标准日志" class="headerlink" title="接受标准日志"></a>接受标准日志</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stdin &#123;</span><br><span class="line">        add_field =&gt; &#123;"key" =&gt; "value"&#125;</span><br><span class="line">        tags =&gt; ["add"]</span><br><span class="line">        type =&gt; "std"</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="从文件中读取"><a href="#从文件中读取" class="headerlink" title="从文件中读取"></a>从文件中读取</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">	# 只支持文件的绝对路径,而且会不自动递归目录. /path/to/**/*.log,用 ** 来缩写表示递归全部子目录.</span><br><span class="line">	file &#123;</span><br><span class="line">        path 				=&gt; ["D:/logs/*.log"]</span><br><span class="line">        type 				=&gt; "system"</span><br><span class="line">        start_position 		=&gt; "beginning"</span><br><span class="line">		discover_interval 	=&gt; # logstash 每隔多久去检查一次被监听的 path 下是否有新文件.默认值是 15 秒.</span><br><span class="line">		exclude 			=&gt; # 不想被监听的文件可以排除出去,这里跟 path 一样支持 glob 展开.</span><br><span class="line">		stat_interval  		=&gt; # logstash 每隔多久检查一次被监听文件状态（是否有更新）,默认是 1 秒.</span><br><span class="line">		start_position   	=&gt; # logstash 从什么位置开始读取文件数据,默认是结束位置,也就是说 logstash 进程会以类似 tail -F 的形式运行</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="接受rsysylog日志"><a href="#接受rsysylog日志" class="headerlink" title="接受rsysylog日志"></a>接受rsysylog日志</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">	syslog &#123;</span><br><span class="line">		port =&gt; "514"</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="接受TCP日志"><a href="#接受TCP日志" class="headerlink" title="接受TCP日志"></a>接受TCP日志</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">	tcp &#123;</span><br><span class="line">		port =&gt; 8888</span><br><span class="line">		mode =&gt; "server"</span><br><span class="line">		ssl_enable =&gt; false</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>logstash可以直接接受tcp日志,但是由于logstash内部采用SizedQueue实现日志队列机制,它只能缓存20个日志事件,因此这个功能更多的是在测试时候使用,正式环境中应该采用其他更加高效地消息队列.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Socket socket = <span class="keyword">new</span> Socket();</span><br><span class="line">socket.connect(<span class="keyword">new</span> InetSocketAddress(<span class="string">"localhost"</span>, <span class="number">8888</span>));</span><br><span class="line">BufferedWriter writer = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">	writer.write(<span class="string">"hello world"</span>);</span><br><span class="line">&#125;</span><br><span class="line">writer.close();</span><br><span class="line">socket.close();</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/日志工具/">日志工具</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/日志工具/logstash 读取日志/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/日志工具/logstash 读取日志/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2集合/" title="PYTHON2集合" itemprop="url">PYTHON2集合</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><ul>
<li>声明一个列表 <code>list = [123, &quot;ad&quot;]</code></li>
<li>索引第一个元素 <code>list[0]</code></li>
<li>在尾部添加一个元素 <code>list.append(2.56)</code></li>
<li>对第一个元素重新赋值 <code>list[0] = &quot;0&quot;</code></li>
<li>获取列表长度 <code>len(list)</code></li>
<li>删除第一个元素 <code>del list[0]</code></li>
</ul>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><p>元组和列表十分类似，只不过元组和字符串一样是 不可变的 即你不能修改元组<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tumple = (<span class="number">123</span>, <span class="string">"adf"</span>)</span><br><span class="line">print(tumple[<span class="number">0</span>])</span><br><span class="line">print(len(tumple))</span><br></pre></td></tr></table></figure></p>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">map = &#123;</span><br><span class="line">       <span class="string">"key1"</span>:<span class="string">"value1"</span>,</span><br><span class="line">       <span class="string">"key2"</span>:<span class="string">"value2"</span>,</span><br><span class="line">       <span class="string">"key3"</span>:<span class="string">"value3"</span>,</span><br><span class="line">       &#125;</span><br><span class="line">print(map)</span><br><span class="line">print(len(map))</span><br><span class="line">print(map[<span class="string">"key1"</span>])</span><br><span class="line"><span class="keyword">del</span> map[<span class="string">"key1"</span>]</span><br><span class="line">print(map)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> map:</span><br><span class="line">    print(key + <span class="string">"   "</span> + map[key])</span><br><span class="line"><span class="keyword">if</span> <span class="string">"key2"</span> <span class="keyword">in</span> map:</span><br><span class="line">    print(<span class="string">"map contains key2"</span>)</span><br><span class="line"></span><br><span class="line">help(dict)</span><br></pre></td></tr></table></figure>
<h3 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h3><p>序列的两个主要特点是索引操作符和切片操作符<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">shoplist = [<span class="string">'apple'</span>, <span class="string">'mango'</span>, <span class="string">'carrot'</span>, <span class="string">'banana'</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Item 0 is'</span>, shoplist[<span class="number">0</span>])</span><br><span class="line">print(<span class="string">'Item -1 is'</span>, shoplist[<span class="number">-1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">## Slicing on a list</span></span><br><span class="line">print(<span class="string">'Item 1 to 3 is'</span>, shoplist[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">print(<span class="string">'Item 2 to end is'</span>, shoplist[<span class="number">2</span>:])</span><br><span class="line">print(<span class="string">'Item 1 to -1 is'</span>, shoplist[<span class="number">1</span>:<span class="number">-1</span>])</span><br><span class="line">print(<span class="string">'Item start to end is'</span>, shoplist[:])</span><br><span class="line"></span><br><span class="line"><span class="comment">## Slicing on a string</span></span><br><span class="line">name = <span class="string">'swaroop'</span></span><br><span class="line">print(<span class="string">'characters 1 to 3 is'</span>, name[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">print(<span class="string">'characters 2 to end is'</span>, name[<span class="number">2</span>:])</span><br><span class="line">print(<span class="string">'characters 1 to -1 is'</span>, name[<span class="number">1</span>:<span class="number">-1</span>])</span><br><span class="line">print(<span class="string">'characters start to end is'</span>, name[:])</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2集合/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2集合/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2控制流/" title="PYTHON2 控制流" itemprop="url">PYTHON2 控制流</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tmp = <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> tmp &gt; <span class="number">0</span> :</span><br><span class="line">    print(<span class="string">"&gt;"</span>)</span><br><span class="line"><span class="keyword">elif</span> tmp &lt; <span class="number">0</span> :</span><br><span class="line">    print(<span class="string">"&lt;"</span>)</span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    print(<span class="string">"="</span>)</span><br></pre></td></tr></table></figure>
<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tmp = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> tmp &lt; <span class="number">3</span> :</span><br><span class="line">    print(tmp)</span><br><span class="line">    tmp +=<span class="number">1</span></span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    print(<span class="string">"over"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">2</span> :</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'loop over'</span>)</span><br></pre></td></tr></table></figure>
<p>或者<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  从0开始步增到10</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">10</span>, <span class="number">1</span>)</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2控制流/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2控制流/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2面向对象/" title="PYTHON2 面向对象" itemprop="url">PYTHON2 面向对象</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="self"><a href="#self" class="headerlink" title="self"></a>self</h3><p>类的方法与普通的函数只有一个特别的区别——它们必须有一个额外的第一个参数名称<code>self</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="创建一个类"><a href="#创建一个类" class="headerlink" title="创建一个类"></a>创建一个类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">p = Person()</span><br><span class="line"><span class="keyword">print</span> p</span><br></pre></td></tr></table></figure>
<h3 id="对象的方法"><a href="#对象的方法" class="headerlink" title="对象的方法"></a>对象的方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"run"</span>)</span><br><span class="line"></span><br><span class="line">p = Person()</span><br><span class="line">p.run()</span><br></pre></td></tr></table></figure>
<h4 id="init方法"><a href="#init方法" class="headerlink" title="init方法"></a><strong>init</strong>方法</h4><p><code>__init__</code>方法在类的一个对象被建立时，马上运行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"run"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"init"</span>)</span><br><span class="line"></span><br><span class="line">p = Person()</span><br><span class="line">p.run()</span><br></pre></td></tr></table></figure></p>
<h4 id="del方法"><a href="#del方法" class="headerlink" title="del方法"></a><strong>del</strong>方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"init"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"__destory__"</span>)</span><br><span class="line"></span><br><span class="line">p = Person()</span><br></pre></td></tr></table></figure>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul>
<li><p>类的变量: 由一个类的所有对象（实例）共享使用。只有一个类变量的拷贝，所以当某个对象对类的变量做了改动的时候，这个改动会反映到所有其他的实例上。</p>
</li>
<li><p>对象的变量: 由类的每个对象/实例拥有。因此每个对象有自己对这个域的一份拷贝，即它们不是共享的，在同一个类的不同实例中，虽然对象的变量有相同的名称，但是是互不相关的。通过一个例子会使这个易于理解。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>:</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">father = Father()</span><br><span class="line">father.age = <span class="number">10</span></span><br><span class="line">Father.age = <span class="number">20</span></span><br><span class="line">print(father.age)</span><br><span class="line">print(Father.age)</span><br></pre></td></tr></table></figure>
<h4 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h4><p>对象的属性(变量和方法)如果名字以<code>__</code>开头则不能被外部访问,但是如果名称构成形式为<code>__xxx__</code>则被称为特殊属性,是可以被外界访问的.</p>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>:</span></span><br><span class="line">    name = <span class="string">"Tom"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"run"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span><span class="params">(Father)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">son = Son()</span><br><span class="line">print(son.name)</span><br><span class="line">son.run()</span><br></pre></td></tr></table></figure>
<h4 id="init-del-在继承中的使用"><a href="#init-del-在继承中的使用" class="headerlink" title="__init__, __del__在继承中的使用"></a><code>__init__</code>, <code>__del__</code>在继承中的使用</h4><p>Python不会自动调用父类的constructor<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mother</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>:</span></span><br><span class="line">    name = <span class="string">"Tom"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"run"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"Father init"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"Father del"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span><span class="params">(Father, Mother)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"Son init"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"Son del"</span>)</span><br><span class="line"></span><br><span class="line">son = Son()</span><br><span class="line">print(son.name)</span><br><span class="line">son.run()</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2面向对象/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2面向对象/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/python/python2文件操作/" title="PYTHON2 文件操作" itemprop="url">PYTHON2 文件操作</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>打开一个文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = open(name, [mode], [size])</span><br></pre></td></tr></table></figure></p>
<ul>
<li>name: 文件名</li>
<li>mode: 打开方式</li>
<li>size: 操作的字节数</li>
</ul>
<h3 id="mode值"><a href="#mode值" class="headerlink" title="mode值:"></a>mode值:</h3><ul>
<li><code>r</code>: 只读方式打开(文件必须存在)</li>
<li><code>w</code>: 只写方式打开(文件不存在创建文件,文件存在清空文件)</li>
<li><code>a</code>: 追加方式打开(文件不存在创建文件)</li>
<li><code>r+/w+</code>: 读写方式打开</li>
<li><code>a+</code>: 读写方式打开</li>
<li><code>rb,wb,ab,rb+,wb+,ab+</code>: 二进制方式打开</li>
</ul>
<blockquote>
<p>注意:如果我们使用非二进制模式输出时<code>\n(0A)</code>会被自动替换为<code>\r\n(0D 0A)</code>,因此在文件输出时,我们要注意这个问题.</p>
</blockquote>
<h3 id="f对象常用方法"><a href="#f对象常用方法" class="headerlink" title="f对象常用方法"></a>f对象常用方法</h3><ul>
<li><code>read([size])</code> : 读取文件(size有值则读取size个字节),如果不填写size则读取全部</li>
<li><code>readline([size])</code> : 每次读取一行(size值为当前行的长度,但是如果每次读取不完的话,下次再调用readline时会继续在当前行读取)</li>
<li><code>readlines([size])</code> : 读取多行,返回每一行组成的列表. 如果不填写size则读取全部内容(不推荐使用这种方式读取所有行)</li>
<li><code>write(str)</code> : 将字符串直接写入文件中</li>
<li><code>writelines(lines)</code>: 将字符串或者字符串列表写入文件中.</li>
<li><code>close()</code>: 关闭文件操作</li>
</ul>
<p>我们可以使用for循环遍历整个文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file = open(<span class="string">"demo.txt"</span>)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> file:</span><br><span class="line">	print(line)</span><br></pre></td></tr></table></figure></p>
<h3 id="OS模块文件操作"><a href="#OS模块文件操作" class="headerlink" title="OS模块文件操作"></a>OS模块文件操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fd = os.open(filename, flag, [mode])</span><br></pre></td></tr></table></figure>
<p>filename和mode我们通过上面的描述都知道了,现在我们看一下flag属性值(文件打开方式)</p>
<ul>
<li>os.O_CREAT : 创建文件</li>
<li>os.O_RDONLY : 只读方式打开</li>
<li>os.O_WRONLY : 只写方式打开</li>
<li>os.O_RDWR : 读写方式打开</li>
</ul>
<p>示例<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fd = os.open(<span class="string">"test.txt"</span>, os.O_CREAT | os.O_RDWR)</span><br><span class="line">os.write(fd, <span class="string">"helloworld"</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="中文乱码"><a href="#中文乱码" class="headerlink" title="中文乱码"></a>中文乱码</h3><p>写入文件时,如果输出中文,我们经常会遇到乱码的问题.只需要在python文件顶部加上以下内容就可以了<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#-*- coding=utf-8 -*-</span></span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/python2/">python2</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/python/python2文件操作/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/python/python2文件操作/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/05/mgits/项目CheckList/" title="项目CheckList" itemprop="url">项目CheckList</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-07-04T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-07-05</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="数据接口都尽量做成数组形式"><a href="#数据接口都尽量做成数组形式" class="headerlink" title="数据接口都尽量做成数组形式"></a>数据接口都尽量做成数组形式</h2><p>这是为了提高拓展性,以防策划将模块提出批处理</p>
<h2 id="代码中不要出现中文"><a href="#代码中不要出现中文" class="headerlink" title="代码中不要出现中文"></a>代码中不要出现中文</h2><p>当要出现中文的时候,可以根据个英文索引到表里查国际化文字.</p>
<p>服务器向客户端提示的时候发送错误号,由客户端进行国际化</p>
<h2 id="客户端打包"><a href="#客户端打包" class="headerlink" title="客户端打包"></a>客户端打包</h2><p>在打包的时候，加上时间和svn版本号，方便渠道确定客户端的版本是一致的</p>
<h2 id="交易类模块"><a href="#交易类模块" class="headerlink" title="交易类模块"></a>交易类模块</h2><p>交易类模块要慎重考虑,玩家可能刷元宝</p>
<h2 id="玩家使用模拟器登录"><a href="#玩家使用模拟器登录" class="headerlink" title="玩家使用模拟器登录"></a>玩家使用模拟器登录</h2><p>这个要做技术处理</p>
<h2 id="id"><a href="#id" class="headerlink" title="id"></a>id</h2><p>项目里边每个模块的ID要是全区唯一的,保证合服顺利</p>
<h2 id="GWF的问题"><a href="#GWF的问题" class="headerlink" title="GWF的问题"></a>GWF的问题</h2><p>参考<a href="http://blog.zhukunqian.com/?p=1377" target="_blank" rel="external">记今天域名和GWF的问题</a></p>
<h2 id="模块次数"><a href="#模块次数" class="headerlink" title="模块次数"></a>模块次数</h2><p>每个模块活动都加一个每日次数限制。例如扫荡类的功能，加一个每日最大扫荡次数，避免出现角色刷货币的情况.</p>
<h2 id="道具"><a href="#道具" class="headerlink" title="道具"></a>道具</h2><ul>
<li>道具信息里添加上获得来源途径信息. 将途径分类, 以区别特殊道具 </li>
</ul>
<h2 id="数据备份"><a href="#数据备份" class="headerlink" title="数据备份"></a>数据备份</h2><p>每天备份玩家数据, 以便后期查bug和回档使用</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/mgits/">mgits</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/07/05/mgits/项目CheckList/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/07/05/mgits/项目CheckList/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/JavaSE/java equals hashcode/" title="Java equals和hashcode" itemprop="url">Java equals和hashcode</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Effective Java学习总结</p>
<h2 id="euqals"><a href="#euqals" class="headerlink" title="euqals"></a>euqals</h2><p>如果类不具有自己的逻辑相等概念，那么就没有必要自己去覆盖<code>euqals()</code>方法. 在这种情况下,每个类的实例都和自身相等.</p>
<p>但是如果程序里也关心逻辑上是否是相等,那么在实现<code>equals()</code>时就要考虑它的通用约定：</p>
<ul>
<li>自反性: 对于任何非null的引用值x,<code>x.equals(x)</code>必须返回true. 这一点保证的是对象的自身必须等于其自身.</li>
<li>对称性: 对于任何非null的引用值x和y,当且仅当<code>y.equals(x)</code>返回true时,<code>x.equals(y)</code>必须返回true.</li>
<li>传递性: 对于任何非null的引用值x，y和z,如果<code>y.equals(x)</code>返回true且<code>y.equals(z)</code>返回true,则<code>z.equals(x)</code>也必须返回true</li>
<li>一致性: 对于任何非null的引用值x和y,只要equals的比较操作在对象中的信息没有被修改,多次调用<code>x.equals(y)</code>则一致地返回true或者返回false. 这也就是说如果俩个对象相等,那么他们就应该始终保持着相等.</li>
<li>非空性: 对于任何非null的引用值,<code>x.euqals(null)</code>都必须返回false</li>
</ul>
<p>下面依次是违反上面几个特性的例子：</p>
<p>违反自反性:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> !<span class="keyword">super</span>.equals(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>违反对称性<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String str1[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	N n1 = <span class="keyword">new</span> N();</span><br><span class="line">	n1.id = <span class="number">123</span>;</span><br><span class="line">	Integer id = <span class="number">123</span>;</span><br><span class="line">	System.out.println(n1.equals(id));</span><br><span class="line">	System.out.println(id.equals(n1));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">N</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Integer id;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer) &#123;</span><br><span class="line">			<span class="keyword">return</span> obj.equals(id);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.equals(obj);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>违反传递性<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>违反一致性<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String str1[])</span> </span>&#123;</span><br><span class="line">		N n1 = <span class="keyword">new</span> N();</span><br><span class="line">		n1.id = <span class="number">123</span>;</span><br><span class="line">		N n2 = <span class="keyword">new</span> N();</span><br><span class="line">		n2.id = <span class="number">123</span>;</span><br><span class="line">		System.out.println(n1.equals(n2));</span><br><span class="line">		n2.id = <span class="number">12</span>;</span><br><span class="line">		System.out.println(n1.equals(n2));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">N</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> N)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> ((N) obj).id == id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>违反非空性： 这个一般我们不会犯错，因为我们一般都有下面这样的语法,当obj为null时,就会自动返回false<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> N) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>一般在实现equals方法时,我们要做到以下几点<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">N</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 检查参数是否是这个对象的引用,当equals操作代价昂贵时,这么做会达到性能的提升</span></span><br><span class="line">		<span class="keyword">if</span> (obj == <span class="keyword">this</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 检查是否是正确的类型</span></span><br><span class="line">		<span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> N)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 把参数转换为正确的类型</span></span><br><span class="line">		N target = (N)obj;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 对于该类中的每个关键域都对其进行匹配</span></span><br><span class="line">		<span class="keyword">return</span> target.id == id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>对于对每个关键域进行判断的时候,除了<code>float</code>和<code>double</code>都可使用<code>==</code>进行判断</p>
<ul>
<li>float采用<code>Float.compare()</code>进行判断</li>
<li>double采用<code>Double.compare()</code>进行判断<br>如果是数组可以使用<code>Arrays.equals()</code>进行判断.</li>
</ul>
<p>当equals完成了上述之后,还要对其进行对称性,传递性,一致性进行单元测试.</p>
<h2 id="hashCode"><a href="#hashCode" class="headerlink" title="hashCode"></a>hashCode</h2><p>当覆盖<code>equals()</code>时总要覆盖<code>hashCode()</code>.</p>
<p>对于hashCode的通俗约定：</p>
<ul>
<li>在运行期,如果对象的<code>equals()</code>方法的用到的关键域没有被修改，那么多次调用对象的hashCode方法每次必须都返回同一个整数。</li>
<li>如果俩个对象调用<code>equals()</code>方法比较是相等的,那么调用这俩个对象的<code>hashCode()</code>方法,它们返回的整数也必须相等</li>
<li>如果俩个对象调用<code>equals()</code>方法比较是不相等的,那么调用这俩个对象的<code>hashCode()</code>方法,它们返回的整数也可能是相等的.</li>
</ul>
<p>下面给出了一个计算散列值的一个规则：<br>将<code>equals()</code>方法中涉及到的每个关键域<code>f</code>进行如下计算,然后得出一个散列值c：</p>
<ul>
<li>如果域是<code>boolean</code>，则计算<code>f ? 1 : 0</code></li>
<li>如果域是<code>byte,char,short,int</code>，则计算<code>(int)f</code></li>
<li>如果域是<code>long</code>，则计算<code>(int)(f^(f&gt;&gt;32))</code></li>
<li>如果域是<code>float</code>，则计算<code>Float.floatToIntBits(f)</code></li>
<li>如果域是<code>double</code>，则计算<code>Double.doubleToLongBits(f)</code>,接着调用long类型的计算</li>
<li>如果域是引用类型，则按照<code>equals()</code>递归方式,依次递归调用<code>hashCode()</code>,如果引用是个<code>null</code>,则返回0<br>计算完每个关键域的散列值之后,依次进行如下计算<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> result = <span class="number">17</span>;</span><br><span class="line">result = <span class="number">31</span> * result + c;</span><br></pre></td></tr></table></figure>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/JavaSE/">JavaSE</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/JavaSE/java equals hashcode/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/JavaSE/java equals hashcode/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/mgits/windows rust/" title="在windows上搭建rust开发环境" itemprop="url">在windows上搭建rust开发环境</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在windows上搭建rust开发环境</p>
<ol>
<li>安装<a href="http://sourceforge.net/projects/msys2/" target="_blank" rel="external">msys2</a> (我的电脑是64位的,所以以下操作都是以64位为主)</li>
<li>在<code>msys2</code>中安装<code>openssl</code> -&gt; <code>pacman -S mingw-w64-x86_64-openssl</code> (32位<code>pacman -S mingw-w64-i686-openssl</code>)</li>
<li>将<code>C:\msys64\mingw64\bin</code>添加到环境变量<code>Path</code>中</li>
<li>将<code>C:\msys64\mingw64\lib</code>下的<code>libcrypto.dll.a</code>复制一份,将新文件命名为<code>libeay32.a</code></li>
<li>将<code>C:\msys64\mingw64\lib</code>下的<code>libssl.dll.a</code>复制一份,将新文件命名为<code>libssl32.a</code></li>
<li>下载安装<a href="http://www.rust-lang.org/" target="_blank" rel="external">rust</a></li>
<li>将<code>Rust stable 1.0\bin\rustlib\x86_64-pc-windows-gnu\bin</code>这个<code>bin</code>改成其他的名字(随便什么名字,不让Path找到就好了)</li>
<li>现在rust程序就可以正常运行了</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/mgits/">mgits</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/mgits/windows rust/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/mgits/windows rust/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/JavaSE/java 泛型/" title="java泛型" itemprop="url">java泛型</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>泛型（Generic type 或者 generics）是对 Java 语言的类型系统的一种扩展，以支持创建可以按类型进行参数化的类.</p>
<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><p>我们定义一个简单的泛型类, <code>T</code>称为泛型参数, <code>G</code>被称为泛型化了<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接着我们在内部定义一个泛型变量<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;T&gt; &#123;</span></span><br><span class="line">	T t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后我们再添加一个泛型方法泛型方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	T t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>下来我们来使用一下这个泛型类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">G&lt;String&gt; g = <span class="keyword">new</span> G&lt;&gt;();</span><br><span class="line">g.setValue(<span class="string">"value"</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h3><p>在一个非泛化的类中我们也可以直接定义泛化的方法</p>
<h3 id="类型擦除"><a href="#类型擦除" class="headerlink" title="类型擦除"></a>类型擦除</h3><p>说到java中的泛型就不得不提泛型参数的类型擦除. 当java源码文件被编译成class文件的时候,编译器会将泛型中的类型参数擦除掉(其实class文件中还是会保留部分的泛型信息, 具体参考java虚拟机规范).</p>
<p>类定义的泛型参数<code>T</code>会被替换成具体类型, 一般为Object. 而<code>&lt;T&gt;</code>信息则会被擦除掉, 例如G就会替换成<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span> </span>&#123;</span><br><span class="line">	Object t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>而在引用该类型的时候则会擦除成<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">G g = <span class="keyword">new</span> G();</span><br><span class="line">g.setValue(<span class="string">"value"</span>);</span><br></pre></td></tr></table></figure></p>
<p>因此，java里的泛型类型安全是由编译器保证的, 在运行期是无法保证类型的安全的.</p>
<h3 id="泛型类的继承关系"><a href="#泛型类的继承关系" class="headerlink" title="泛型类的继承关系"></a>泛型类的继承关系</h3><p>如果类被泛型化之后, 会对类本身的继承关系造成影响<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</span><br><span class="line"></span><br><span class="line">		G&lt;SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</span><br><span class="line">		g.setValue(superParam);</span><br><span class="line"></span><br><span class="line">		SubG1 subG1 = <span class="keyword">new</span> SubG1();</span><br><span class="line">		subG1.setValue(<span class="number">1</span>);</span><br><span class="line">		subG1.printValue(<span class="string">"SubG1 printValue"</span>);</span><br><span class="line">		subG1.print();</span><br><span class="line"></span><br><span class="line">		SubG2 subG2 = <span class="keyword">new</span> SubG2();</span><br><span class="line">		subG2.setValue(<span class="string">"SubG2 setValue"</span>);</span><br><span class="line">		subG2.printValue(<span class="string">"SubG2 printValue"</span>);</span><br><span class="line">		subG2.print();</span><br><span class="line"></span><br><span class="line">		SubG3&lt;Integer&gt; subG3 = <span class="keyword">new</span> SubG3&lt;&gt;();</span><br><span class="line">		subG3.setValue(<span class="string">"SubG3 setValue"</span>);</span><br><span class="line">		subG3.printValue(<span class="string">"SubG3 printValue"</span>);</span><br><span class="line">		subG3.print(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">		SubG4&lt;Integer&gt; subG4 = <span class="keyword">new</span> SubG4();</span><br><span class="line">		subG4.setValue(<span class="string">"SubG4 setValue"</span>);</span><br><span class="line">		subG4.printValue(<span class="string">"SubG4 printValue"</span>);</span><br><span class="line">		subG4.print(<span class="number">4</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	T t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SubG1继承了G的泛型参数. 但是SubG1本身是没有泛化的</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG1</span> <span class="keyword">extends</span> <span class="title">G</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 强制指定继承过来的T的类型为String</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG2</span> <span class="keyword">extends</span> <span class="title">G</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Super:"</span> + t);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// G的类型由继承过来的方法指定, SubG3则再次由本类自己指定类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG3</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">G</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t1)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Super:"</span> + t + <span class="string">". this:"</span> + t1);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定G的类型为String, SubG4则仍然由本类进行泛型化</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG4</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">G</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t1)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"Super:"</span> + t + <span class="string">". this:"</span> + t1);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"SuperParam"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>结果为<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SubG1 printValue</span><br><span class="line"><span class="number">1</span></span><br><span class="line">SubG2 printValue</span><br><span class="line">Super:SubG2 setValue</span><br><span class="line">SubG3 printValue</span><br><span class="line">Super:SubG3 setValue. <span class="keyword">this</span>:<span class="number">3</span></span><br><span class="line">SubG4 printValue</span><br><span class="line">Super:SubG4 setValue. <span class="keyword">this</span>:<span class="number">4</span></span><br></pre></td></tr></table></figure></p>
<p>需要特别指出的是, 在<code>SubG1</code>对象分别调用<code>setValue()</code>和<code>printValue()</code>方法时分别使用了<code>Integer</code>和<code>String</code>俩个类型, 但是却没有产生任何异常信息.</p>
<h3 id="泛型参数的继承关系"><a href="#泛型参数的继承关系" class="headerlink" title="泛型参数的继承关系"></a>泛型参数的继承关系</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</span><br><span class="line">		Param param = <span class="keyword">new</span> Param();</span><br><span class="line"></span><br><span class="line">		G&lt;SuperParam&gt; gSuperParam = <span class="keyword">new</span> G&lt;&gt;();</span><br><span class="line">		gSuperParam.setValue(superParam);</span><br><span class="line">		gSuperParam.setValue(param);</span><br><span class="line">		SuperParam t = gSuperParam.getT();</span><br><span class="line"></span><br><span class="line">		G&lt;Param&gt; gParam = <span class="keyword">new</span> G&lt;&gt;();</span><br><span class="line">		gParam.setValue(param);</span><br><span class="line">		gParam.setValue(superParam);	<span class="comment">// compile error</span></span><br><span class="line"></span><br><span class="line">		SubParam subParam = <span class="keyword">new</span> SubParam();</span><br><span class="line">		gParam.setValue(subParam);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	T t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubParam</span> <span class="keyword">extends</span> <span class="title">Param</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>从这一行<code>gParam.setValue(subParam);</code>我们可以看到类型参数的继承结构和普通类型的继承结构的规则是一样的.</p>
<h3 id="泛化在方法中的应用"><a href="#泛化在方法中的应用" class="headerlink" title="泛化在方法中的应用"></a>泛化在方法中的应用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		print(<span class="keyword">new</span> G&lt;&gt;());</span><br><span class="line">		print(<span class="keyword">new</span> G&lt;SuperParam&gt;());		<span class="comment">// compile Error</span></span><br><span class="line">		print(<span class="keyword">new</span> SubG1());</span><br><span class="line">		print(<span class="keyword">new</span> SubG2());</span><br><span class="line">		print(<span class="keyword">new</span> SubG3());</span><br><span class="line">		print(<span class="keyword">new</span> SubG3&lt;SuperParam&gt;());</span><br><span class="line">		print(<span class="keyword">new</span> SubG4());</span><br><span class="line">		print(<span class="keyword">new</span> SubG4&lt;SuperParam&gt;());</span><br><span class="line"></span><br><span class="line">		printSuperParam(<span class="keyword">new</span> G&lt;&gt;());</span><br><span class="line">		printSuperParam(<span class="keyword">new</span> G&lt;SuperParam&gt;());</span><br><span class="line">		printSuperParam(<span class="keyword">new</span> G&lt;Param&gt;());		<span class="comment">// compile Error</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(G&lt;String&gt; gs)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printSuperParam</span><span class="params">(G&lt;SuperParam&gt; gs)</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面的例子中我们可以看出, 泛化的类的泛型参数并没有对其类型判断造成影响, 子类化的参数仍然是编译通过的. 但是类型参数的继承再传递到方法时, 却被认为不是相同的类型.</p>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p><code>?</code>在泛型参数中作为通配符存在, 它一般和<code>extends</code>和<code>super</code>关键字一起使用. 它表示不确定的一组类型, 例如和<code>extends</code>关键字一起使用就是表示继承自某个类的所有类型</p>
<h3 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h3><p><code>extends</code>关键字是用来定义泛型参数的继承关系. 它表示我们的泛型参数继承自某个类型, 也被我们称为上界符.</p>
<p>我们修改一下G的类型定义,我们引入<code>extends</code>关键字<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</span><br><span class="line"></span><br><span class="line">		G&lt;SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</span><br><span class="line">		g.setValue(superParam);</span><br><span class="line"></span><br><span class="line">		SubG1 subG1 = <span class="keyword">new</span> SubG1();</span><br><span class="line">		subG1.setValue(<span class="number">1</span>);</span><br><span class="line">		subG1.printValue(<span class="string">"SubG1 printValue"</span>);</span><br><span class="line">		subG1.print();</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">SuperParam</span>&gt; </span>&#123;</span><br><span class="line">	T t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		System.out.println(t);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当使用<code>extends</code>关键字之后, 我们就将这个类的泛化信息固定了下来, 在实例化的时候, 其类型参数必须是继承自某类的子类型</p>
<p>如果我们在实例化的时候指定<code>extends</code>会发生什么呢?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</span><br><span class="line"></span><br><span class="line">		G&lt;? extends SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</span><br><span class="line">		g.setValue(superParam);		<span class="comment">// compile error</span></span><br><span class="line">		g.setValue(<span class="keyword">new</span> Param());		<span class="comment">// compile error</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	T t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param1</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>不推荐这种用法, 因为这种情况下如果我们可以对其使用<code>Param</code>或者<code>Param1</code>的类型, 那么这就和不使用泛型是一样的, 会引起类型转化异常.</p>
<p>但是我们却可以在另外一种情况下使用这个关键字<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</span><br><span class="line"></span><br><span class="line">		print(<span class="keyword">new</span> G&lt;&gt;());	<span class="comment">// 默认的是SuperParam类型</span></span><br><span class="line">		print(<span class="keyword">new</span> G&lt;Param&gt;());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(G&lt;? extends SuperParam&gt; g)</span> </span>&#123;</span><br><span class="line">		SuperParam t = g.getT();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	T t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="super"><a href="#super" class="headerlink" title="super"></a>super</h3><p><code>super</code>作为一种下界符存在. 也就在具体使用时的参数都必须是泛型参数的父类才行.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">G&lt;? <span class="keyword">super</span> SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</span><br><span class="line">g.setValue(<span class="keyword">new</span> SuperParam());</span><br><span class="line">g.setValue(<span class="keyword">new</span> Param());</span><br></pre></td></tr></table></figure></p>
<p>同样我们可以在方法中如此使用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		print(<span class="keyword">new</span> G&lt;SuperParam&gt;());</span><br><span class="line">		print(<span class="keyword">new</span> G&lt;&gt;());	<span class="comment">// 默认是Param</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(G&lt;? <span class="keyword">super</span> Param&gt; g)</span> </span>&#123;</span><br><span class="line">		Object t = g.getT();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	T t;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.t = t;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/JavaSE/">JavaSE</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/JavaSE/java 泛型/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/JavaSE/java 泛型/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/构建工具/maven/" title="maven入门" itemprop="url">maven入门</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="maven生命周期"><a href="#maven生命周期" class="headerlink" title="maven生命周期"></a>maven生命周期</h2><p>Maven的生命周期就是对所有的构建过程进行抽象和统一.Maven的生命周期是抽象的,因此生命周期本身是并不做任何实际工作的,实际的任务交给插件来完成.</p>
<p>Maven拥有如下三套相互独立的生命周期,每个生命周期都包含一些阶段(phase),阶段是按照顺序执行的,而且当PhaseA在PhaseB之前,那么当执行PhaseB时会先执行PhaseA. 但是这三套生命周期是完全独立的.</p>
<h3 id="clean生命周期"><a href="#clean生命周期" class="headerlink" title="clean生命周期"></a>clean生命周期</h3><p>清理项目,下列是该生命周期的阶段</p>
<ul>
<li><code>pre-clean</code></li>
<li><code>clean</code></li>
<li><code>post-clean</code><br>该生命周期包含的Maven命令：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="default生命周期"><a href="#default生命周期" class="headerlink" title="default生命周期"></a>default生命周期</h3><p>构建项目,下列是该生命周期的阶段</p>
<ul>
<li><code>validate</code></li>
<li><code>initialize</code></li>
<li><code>generate-sources</code></li>
<li><code>process-sources</code></li>
<li><code>generate-resources</code></li>
<li><code>process-resources</code></li>
<li><code>compile</code></li>
<li><code>process-class</code></li>
<li><code>generate-test-sources</code></li>
<li><code>process-test-sourcs</code></li>
<li><code>generate-test-resources</code></li>
<li><code>process-test-resources</code></li>
<li><code>test-compile</code></li>
<li><code>process-test-classes</code></li>
<li><code>test</code></li>
<li><code>generate-package</code></li>
<li><code>package</code></li>
<li><code>pre-interation-test</code></li>
<li><code>interation-test</code></li>
<li><code>post-interatopm-test</code></li>
<li><code>verify</code></li>
<li><code>install</code></li>
<li><code>deploy</code><br>该生命周期包含的Maven命令：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mvn validate</span><br><span class="line">mvn compile</span><br><span class="line">mvn test</span><br><span class="line">mvn <span class="keyword">package</span></span><br><span class="line">mvn verify</span><br><span class="line">mvn install</span><br><span class="line">mvn deploy</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn install:install-file -DgroupId=demo -DartifactId=test -Dversion=<span class="number">1.0</span> -Dpackaging=jar -Dfile=E:\Xg-Push-SDK-JAVA-<span class="number">1.1</span>.6\XingeApp.jar</span><br></pre></td></tr></table></figure>
<h3 id="site生命周期"><a href="#site生命周期" class="headerlink" title="site生命周期"></a>site生命周期</h3><p>建立项目站点,下列是该生命周期的阶段</p>
<ul>
<li><code>pre-site</code></li>
<li><code>site</code></li>
<li><code>post-site</code></li>
<li><code>site-deploy</code><br>该生命周期包含的Maven命令：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn site</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="插件目标"><a href="#插件目标" class="headerlink" title="插件目标"></a>插件目标</h2><p>插件里会包含多个目标,每个目标都对应着特定的功能,也就是说插件里的功能是通过目标来实现了.</p>
<p>例如<code>maven-compiler-plugin</code>的<code>compile</code>目标的写法为<code>compiler:compile</code>.</p>
<h3 id="插件绑定"><a href="#插件绑定" class="headerlink" title="插件绑定"></a>插件绑定</h3><p>我们可以将插件的目标与生命周期的阶段相绑定.</p>
<p>default生命周期与内置插件绑定关系及具体任务:</p>
<table>
<thead>
<tr>
<th>生命周期阶段</th>
<th>插件目标</th>
<th>执行任务</th>
</tr>
</thead>
<tbody>
<tr>
<td>process-resources</td>
<td>maven-resources-plugin:resources</td>
<td>复制主资源文件至主输出目录</td>
</tr>
<tr>
<td>compile</td>
<td>maven-compile-plugin:compile</td>
<td>编译主代码至主输出目录</td>
</tr>
<tr>
<td>process-test-resources</td>
<td>maven-resources-plugin:testRresources</td>
<td>复制测试资源文件至测试输出目录</td>
</tr>
<tr>
<td>test-compile</td>
<td>maven-compiler-plugin:testCompile</td>
<td>编译测试代码至测试输出目录</td>
</tr>
<tr>
<td>test</td>
<td>maven-surefire-plugin:test</td>
<td>执行测试用例</td>
</tr>
<tr>
<td>package</td>
<td>maven-jar-plugin:jar</td>
<td>创建项目jar包</td>
</tr>
<tr>
<td>install</td>
<td>maven-install-plugin:install</td>
<td>将项目输出构件安装到本地仓库</td>
</tr>
<tr>
<td>deploy</td>
<td>maven-deploy-plugin:deploy</td>
<td>将项目输出构件部署到远程仓库</td>
</tr>
</tbody>
</table>
<p>我们来自定义绑定：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>exec-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>install<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>java<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>我们在<code>install</code>阶段绑定了<code>exec-maven-plugin</code>插件的<code>java</code>目标.</p>
<h2 id="maven版本管理"><a href="#maven版本管理" class="headerlink" title="maven版本管理"></a>maven版本管理</h2><h3 id="自动化版本发布"><a href="#自动化版本发布" class="headerlink" title="自动化版本发布"></a>自动化版本发布</h3><p>自动化版本发布基于正确的版本号. 一般我们的版本号构成为<code>主要版本号.次要版本号.增量版本号-里程碑版本号</code>. 下面是pom文件中插件设置：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-release-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 如果项目结构不是采用标准的SVN布局(平行的trunk/tags/branches),则需要配置下面俩项 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tagBase</span>&gt;</span>https://svn.mycompany.com/repos/myapplication/tags<span class="tag">&lt;/<span class="name">tagBase</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">branchBase</span>&gt;</span>https://svn.mycompany.com/repos/myapplication/branchs<span class="tag">&lt;/<span class="name">branchBase</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>下来我们在命令行执行命令：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn release:clean</span><br></pre></td></tr></table></figure></p>
<p>先执行清除操作,然后执行下列命令准备版本发布：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn release:prepare</span><br></pre></td></tr></table></figure></p>
<p>该命令包含下列操作：</p>
<ul>
<li>检查项目是否有未提交代码</li>
<li>检查项目是否有快照版本依赖</li>
<li>根据用户的输入将快照版本升级为发布版</li>
<li>将POM中的SCM信息更新为TAG地址</li>
<li>基于修改后的POM执行MAVEN构建</li>
<li>提交POM变更</li>
<li>基于用户的输入将代码打TAG</li>
<li>将代码从发布版升级为新的快照版</li>
<li>提交POM变更</li>
</ul>
<p>当前俩项检查ok之后,插件会提示用户输出想要发布的版本号,TAG名称和新的快照版本号</p>
<p>我们还可以执行回滚:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn release:rollback</span><br></pre></td></tr></table></figure></p>
<p>回滚<code>release:prepare</code>所执行的操作. 但是需要注意的是在<code>release:prepare</code>步骤中打出的TAG并不会被删除,需要手动删除.</p>
<p>接下来就可以执行版本发布了：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn release:perform</span><br></pre></td></tr></table></figure></p>
<p>它会检出<code>release:prepare</code>生成的TAG源码,并在此基础上执行<code>mvn deploy</code>,打包并部署到仓库.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn release:stage</span><br></pre></td></tr></table></figure>
<p>还有一个更棒的功能：打分支<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn release:branch</span><br></pre></td></tr></table></figure></p>
<p>通过maven打分支,执行下列操作</p>
<ul>
<li>检查项目是否有未提交代码</li>
<li>为分支更改POM的版本,例如从<code>1.1.00SNAPSHOT</code>改变为<code>1.1.1-SNAPSHOT</code></li>
<li>将POM中的SCM信息更新为分支地址</li>
<li>提交以上更改</li>
<li>将主干代码更新为分支代码</li>
<li>修改本地代码使之回退到之前的版本(用户可以指定新的版本)</li>
<li>提交本地更改</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn release:update-versions</span><br></pre></td></tr></table></figure>
<h2 id="maven属性"><a href="#maven属性" class="headerlink" title="maven属性"></a>maven属性</h2><h3 id="内置属性"><a href="#内置属性" class="headerlink" title="内置属性"></a>内置属性</h3><ul>
<li><code>${basedir}</code>: 表示项目根目录,即包含<code>pom.xml</code>文件的目录</li>
<li><code>${version}</code>:项目版本</li>
</ul>
<h3 id="POM属性"><a href="#POM属性" class="headerlink" title="POM属性"></a>POM属性</h3><p>该类属性引用POM文件中对应的元素值,例如：</p>
<ul>
<li><code>${project.artifactId}</code>: 引用<code>&lt;project&gt;&lt;artifactId&gt;</code>值</li>
<li><code>${project.build.sourceDirectory}</code>: 项目的主源码目录</li>
<li><code>${project.build.directory}</code>: 项目构建的输出目录</li>
</ul>
<h3 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h3><p>在<code>&lt;Properties&gt;&lt;property&gt;</code>里定义的属性</p>
<h3 id="setting属性"><a href="#setting属性" class="headerlink" title="setting属性"></a>setting属性</h3><p>与POM属性同理,但是以<code>settings</code>开头. 这个属性引用的是<code>setting.xml</code>文件中XML元素的值.</p>
<h3 id="Java系统属性"><a href="#Java系统属性" class="headerlink" title="Java系统属性"></a>Java系统属性</h3><p>所有JAVA系统中的属性都可以使用Maven属性引用,使用<code>mvn help:system</code>查看所有Java系统属性</p>
<h3 id="环境变量属性"><a href="#环境变量属性" class="headerlink" title="环境变量属性"></a>环境变量属性</h3><p>所有环境变量属性属性都可以使用<code>env</code>开头的属性引用,例如<code>${env.JAVA_HOME}</code></p>
<h2 id="Maven插件"><a href="#Maven插件" class="headerlink" title="Maven插件"></a>Maven插件</h2><h3 id="自定义Manifest"><a href="#自定义Manifest" class="headerlink" title="自定义Manifest"></a>自定义Manifest</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">manifestFile</span>&gt;</span></span><br><span class="line">                src/main/resources/META-INF/MANIFEST.MF</span><br><span class="line">            <span class="tag">&lt;/<span class="name">manifestFile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                    wang.ming15.instrument.core.App</span><br><span class="line">                <span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/构建工具/">构建工具</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/构建工具/maven/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/构建工具/maven/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/java综合工具/读取csv文件/" title="java读取csv文件" itemprop="url">java读取csv文件</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="ming15" target="_blank" itemprop="author">ming15</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T16:00:00.000Z" itemprop="datePublished"> 发表于 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>利用Apache Commons CSV读取csv文件, 首先我们添加如下依赖<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-csv<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>读取csv文件<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Reader in = <span class="keyword">new</span> FileReader(<span class="string">"path/to/file.csv"</span>);</span><br><span class="line">Iterable&lt;CSVRecord&gt; records = CSVFormat.EXCEL.parse(in);</span><br><span class="line"><span class="keyword">for</span> (CSVRecord record : records) &#123;</span><br><span class="line">    String lastName = record.get(<span class="string">"Last Name"</span>);</span><br><span class="line">    String firstName = record.get(<span class="string">"First Name"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java工具/">Java工具</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/java综合工具/读取csv文件/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/java综合工具/读取csv文件/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/5/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/7/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="ming15" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Groovy/" title="Groovy">Groovy<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/Haskell/" title="Haskell">Haskell<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/JMH/" title="JMH">JMH<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/JVM/" title="JVM">JVM<sup>14</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaSE/" title="JavaSE">JavaSE<sup>28</sup></a></li>
		  
		
		  
			<li><a href="/categories/JavaScript/" title="JavaScript">JavaScript<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java工具/" title="Java工具">Java工具<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/MongoDB/" title="MongoDB">MongoDB<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Netty/" title="Netty">Netty<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/Nginx/" title="Nginx">Nginx<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Php/" title="Php">Php<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Reids/" title="Reids">Reids<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/TCP-IP/" title="TCP IP">TCP IP<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/asm/" title="asm">asm<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/guice/" title="guice">guice<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/http客户端/" title="http客户端">http客户端<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/http服务器/" title="http服务器">http服务器<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/linux/" title="linux">linux<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/memcached/" title="memcached">memcached<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/mgits/" title="mgits">mgits<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/mycat/" title="mycat">mycat<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/python2/" title="python2">python2<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/并发编程/" title="并发编程">并发编程<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/序列化工具/" title="序列化工具">序列化工具<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/操作系统/" title="操作系统">操作系统<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/数据库/" title="数据库">数据库<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/日志工具/" title="日志工具">日志工具<sup>7</sup></a></li>
		  
		
		  
			<li><a href="/categories/构建工具/" title="构建工具">构建工具<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/算法/" title="算法">算法<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="http://www1.vertx3.cn" target="_blank" title="vertx3">vertx3</a>
            
          </li>
        
    </ul>
</div>

  

<div class="doubanshow">
<p class="asidetitle">豆瓣秀</p>
<div>
<script type="text/javascript" src="http://www.douban.com/service/badge/xxxyy/?show=collection&amp;n=12&amp;columns=3&amp;hidelogo=yes&amp;hideself=yes&amp;cat=book|movie" ></script>
</div>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=3253370782&verifier=e9ca895b&dpc=1"></iframe>
</div>


  

<div class="lofter">
<p class="asidetitle">Lofter</p>

 <iframe width="100%" height="39" class="share_self"  frameborder="0" scrolling="no" src="http://ming15.lofter.com/"></iframe>
</div>




</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 博客,我选择重构 <br/>
			重构使事情变得更美,更加正确</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/3253370782" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/ming15" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		<a href="https://www.douban.com/people/xxxyy" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/ming15" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="ming15">ming15</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"wanggnim"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F9e8fca440159a2125668804e46682db4' type='text/javascript'%3E%3C/script%3E"));
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
