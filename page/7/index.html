
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>·</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="王玉">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="·">
<meta property="og:url" content="http://www.yu66.wang/page/7/index.html">
<meta property="og:site_name" content="·">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="·">

    
    <link rel="alternative" href="/atom.xml" title="·" type="application/atom+xml">
    
    
    
    <link rel="apple-touch-icon" href="/img/author.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/author.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="·">·</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
						<form class="search" action="http://zhannei.baidu.com/cse/search" target="_blank">
							<label>Search</label>
						<input name="s" type="hidden" value= 17728547076946147000 ><input type="text" name="q" size="30" placeholder="Search"><br>
						</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/09/08/编程语言/JavaScript函数/" title="JavaScript函数" itemprop="url">JavaScript函数</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-09-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-09-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>JavaScript是一门基于原型继承的函数式的面向对象的编程语言,对象可以直接从其他对象继承属性,且JavaScript是无类型的.</p>
<p>JavaScript中函数就是对象。函数对象连接到Function.prototype(该原型连接到Object.prototype).</p>
<ul>
<li>每个函数对象在创建时也随配一个prototype属性,它的值是一个拥有constructor属性且值为该函数的对象（这和连接到Function.prototype全完不同）.</li>
<li>因为函数是对象,所以函数可以保存在变量,对象和数组中. 函数可以当做参数传递给其他函数,函数也可以再返回给函数.而且因为函数是对象,函数还可以拥有方法</li>
<li>一个函数总会有一个返回值,如果没有指定返回值则返回undefined(如果函数调用前加上了new前缀,且返回的不是一个对象,则返回this)</li>
</ul>
<h3 id="函数字面量"><a href="#函数字面量" class="headerlink" title="函数字面量"></a>函数字面量</h3><p>我们定义一个函数字面量<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> a + b;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面这个函数字面量是通过将一个匿名函数赋值给一个变量.</p>
<p>函数字面量可以出现在任何允许表达式出现的地方. 函数可以被定义在其他函数中. 可以作为函数参数或者函数返回值出现。函数甚至拥有自己的作用域(就像变量有自己的作用域一样)</p>
<p>每声明一个函数实际是创建了一个Function 实例,上面的函数等价于<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Add = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"a + b;"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> add = <span class="keyword">new</span> Add(<span class="number">1</span>, <span class="number">2</span>);</div></pre></td></tr></table></figure></p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>内部函数可以访问自己内部的参数和变量还可以访问嵌套在父函数的参数和变量。通过函数字面量创建的函数对象包含了一个连接到外部上下文的连接，这杯称为闭包(每个函数在创建时会附加俩个隐藏属性：函数的上下文和实现函数行为的代码).</p>
<h3 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h3><p>当调用函数时除了显示地向其传递的参数,每个函数还会接受俩个附加参数<code>this</code>, <code>arguments</code>. 当实际参数大于形式参数时,多余的参数会被忽略,而当实际参数小于形式,参数时缺少的参数会被赋值为undefined.</p>
<p>下面会介绍四种调用模式,每种调用模式对<code>this</code>参数的初始化是不一样的.</p>
<h4 id="方法调用模式"><a href="#方法调用模式" class="headerlink" title="方法调用模式"></a>方法调用模式</h4><p>当一个函数作为一个对象的属性时,我们称其为方法.方法里的this参数被被绑定到该对象上.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">	value : <span class="number">1</span>;</div><div class="line">	addOne : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">this</span>.value += <span class="number">1</span>;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">obj.addOne();</div></pre></td></tr></table></figure></p>
<h4 id="函数调用模式"><a href="#函数调用模式" class="headerlink" title="函数调用模式"></a>函数调用模式</h4><p>当一个函数并非一个对象属性时,那么它就被当做是一个函数来调用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> a + b;</div><div class="line">&#125;</div><div class="line"></div><div class="line">c = add(<span class="number">1</span>, <span class="number">2</span>);</div></pre></td></tr></table></figure></p>
<p>这种模式下this被绑定到全局对象上</p>
<h4 id="构造器调用模式"><a href="#构造器调用模式" class="headerlink" title="构造器调用模式"></a>构造器调用模式</h4><p>一个函数如果创建的目的就是希望集合new关键字来使用,那么它就是构造器函数</p>
<p>如果在一个函数前面带上一个new来调用,实际上会创建一个连接到该函数prototype成员的新对象,同时this也会绑定到那个新对象上.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Quo = <span class="function"><span class="keyword">function</span>(<span class="params">string</span>) </span>&#123;</div><div class="line">	<span class="keyword">this</span>.status = string;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Quo.prototype.get_status = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">this</span>.status;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> myQuo = <span class="keyword">new</span> Quo(<span class="string">"hello"</span>);</div></pre></td></tr></table></figure></p>
<h4 id="Apply调用模式"><a href="#Apply调用模式" class="headerlink" title="Apply调用模式"></a>Apply调用模式</h4><p>JavaScript的函数可以拥有方法,apply方法可以让我们构建一个参数数组传递给调用函数. apply方法接受俩个参数<code>this</code>和参数数组.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> a + b;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> argus = [<span class="number">3</span>, <span class="number">4</span>];</div><div class="line"><span class="keyword">var</span> sum = add.apply(<span class="literal">null</span>, argus);</div></pre></td></tr></table></figure></p>
<h3 id="arguments数组"><a href="#arguments数组" class="headerlink" title="arguments数组"></a>arguments数组</h3><p>在函数内部我们可以通过arguments数组变量访问所有的实际参数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> sum = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i += <span class="number">1</span>) &#123;</div><div class="line">		sum += argements[i];</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> sum = add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</div></pre></td></tr></table></figure></p>
<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>throw语句中断函数的执行,它应该抛出一个exception对象,这个对象包含一个<code>name</code>和<code>message</code>属性(你也可以添加额外的属性).</p>
<p>我们使用try catch来捕获异常<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span>(<span class="built_in">arguments</span>.length &lt; <span class="number">2</span>) &#123;</div><div class="line">		<span class="keyword">throw</span> &#123;</div><div class="line">				name: <span class="string">"arguments error"</span>,</div><div class="line">				message: <span class="string">"need more arguments"</span></div><div class="line">			&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> tryAdd = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		<span class="keyword">return</span> add(a, b);</div><div class="line">	&#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">tryAdd(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>代码块是包在一对花括号中的一组语句，JavaScript中的代码块不会创建新的作用域.但是函数确实是有其自己的作用域的,但是在函数内部定义的变量在整个函数体的任意位置都是可见的,因此变量应该被定义在函数的头部。</p>
<p>作用域的好处是内部函数可以访问定义在他们的外部函数的参数和变量(除了this和arguments)</p>
<h3 id="闭包-1"><a href="#闭包-1" class="headerlink" title="闭包"></a>闭包</h3><p>当我们在函数A中定义了函数B,函数B引用了函数A中的变量I,当函数A执行完毕,函数B作为返回值继续被执行时,函数A的变量I是仍然可以被访问的,这就是闭包.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> id = <span class="number">1132</span>;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		add: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">return</span> id += <span class="number">1</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> if1 = fi();</div><div class="line"><span class="keyword">var</span> id = if1.add(); <span class="comment">// 结果是1133</span></div></pre></td></tr></table></figure></p>
<p>简而言之呢,闭包的特性是保存了创建它时的上下文信息.</p>
<h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><p>我们可以使用函数和闭包来构造模块. 模块是一个提供接口却隐藏状态与实现的函数或者对象.</p>
<p>模块的一般形式是：一个定义了私有变量和函数的函数,利用闭包创建可以访问私有变量和函数的特权函数,最后返回这个特权函数,或者将他们保存到一个可访问到的地方.</p>
<h3 id="柯里化"><a href="#柯里化" class="headerlink" title="柯里化"></a>柯里化</h3><p>函数也是值,我们可以像往常操作值那样去操作函数, 将函数作为一个变量.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> f1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> p(<span class="number">1</span>);</div><div class="line">&#125; </div><div class="line"></div><div class="line"><span class="keyword">var</span> c = f1();</div></pre></td></tr></table></figure></p>
<p>上面就实现了函数的柯里化</p>
<h3 id="普通函数"><a href="#普通函数" class="headerlink" title="普通函数"></a>普通函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> a + b;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/09/08/编程语言/JavaScript函数/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/09/08/编程语言/JavaScript函数/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/09/08/编程语言/JavaScript面向对象/" title="JavaScript面向对象和原型链" itemprop="url">JavaScript面向对象和原型链</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-09-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-09-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>JavaScript是一门基于原型继承的函数式的面向对象的编程语言,对象可以直接从其他对象继承属性,且JavaScript是无类型的.</p>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><p>JavaScript的简单数据类型包括数字，字符串，布尔值，null值和undefined值，其他值都是对象(数组，函数都是对象)。 数字，字符串和布尔值虽然拥有方法，但他们是不可变的，因此不能称他们为对象。JavaScript中的对象是可变的键控集合。</p>
<p>对象是属性的容器，每个属性都有名字和值。</p>
<ul>
<li>属性名：包括空串在内的任意字符串。如果字符串不是JavaScript保留的关键字切是合法的标识符则可以不必使用双引号。</li>
<li>属性值：包括undefined值之外的任何值</li>
</ul>
<p>但是JavaScript里的对象是无类型的。</p>
<p>JavaScript包含一种原型链特性,允许对象继承另一个对象的属性.正确的使用它能减少对象初始化时小号的时间和内存.</p>
<h3 id="对象字面量"><a href="#对象字面量" class="headerlink" title="对象字面量"></a>对象字面量</h3><p>包围在一对花括号中的0~N个键值对即为对象字面量。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> empoty = &#123;&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> xiaoming = &#123;</div><div class="line">	name : <span class="string">"小明"</span>,</div><div class="line">	age  : <span class="number">18</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>对象字面量还可以嵌套使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xiaoming = &#123;</div><div class="line">	name : <span class="string">"小明"</span>,</div><div class="line">	age  : <span class="number">18</span></div><div class="line">	chengji: &#123;</div><div class="line">		yuwen: <span class="number">99</span>,</div><div class="line">		shuxu: <span class="number">100</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="检索对象里的值"><a href="#检索对象里的值" class="headerlink" title="检索对象里的值"></a>检索对象里的值</h3><p>我们可以使用<code>[]</code>括住一个字符串表达式来索引某个值<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xiaoming[<span class="string">"name"</span>]</div></pre></td></tr></table></figure></p>
<p>如果该字符串是一个合法的标识符且不是保留关键字，那么也可以使用<code>.</code>进行索引<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xiaoming.name</div></pre></td></tr></table></figure></p>
<p>如果我们索引<code>hair</code>这个属性的话,会得到一个<code>undefined</code>值,因此我们也可以使用<code>||</code>指定一个默认值<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xiaoming.hair || <span class="string">"red"</span></div></pre></td></tr></table></figure></p>
<p>这样我们获得的结果就是<code>red</code>这个字符串,可是如果我们向一个<code>undefined</code>值继续索引的话会得到一个<code>TypeError</code>异常,我们可以使用<code>&amp;&amp;</code>来避免<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xiaoming.cars &amp;&amp; xiaoming.cars.changcheng</div></pre></td></tr></table></figure></p>
<p>我们通过这种方式获得小明拥有的汽车中长城汽车的属性值.</p>
<h3 id="更新对象的值"><a href="#更新对象的值" class="headerlink" title="更新对象的值"></a>更新对象的值</h3><p>我们可以通过<code>=</code>对对象进行赋值.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">xiaoming.name = <span class="string">"zhangxiaoming"</span></div><div class="line"></div><div class="line"><span class="comment">// 或者赋值某个新的对象</span></div><div class="line">xiaoming.chengji: &#123;</div><div class="line">		yuwen: <span class="number">99</span>,</div><div class="line">		shuxu: <span class="number">100</span></div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>
<h3 id="引用对象"><a href="#引用对象" class="headerlink" title="引用对象"></a>引用对象</h3><p>对象通过引用来传递</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> chengji = xiaoming.chengji</div></pre></td></tr></table></figure>
<h3 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h3><h4 id="Object-模式"><a href="#Object-模式" class="headerlink" title="Object 模式"></a>Object 模式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;&#125;;<span class="comment">//字面量的表现形式</span></div><div class="line"><span class="keyword">var</span> o2 = <span class="keyword">new</span> <span class="built_in">Object</span>;</div><div class="line"><span class="keyword">var</span> o3 = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line"><span class="keyword">var</span> o4 = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="literal">null</span>);</div><div class="line"><span class="keyword">var</span> o5 = <span class="keyword">new</span> <span class="built_in">Object</span>(<span class="literal">undefined</span>);</div><div class="line"><span class="keyword">var</span> o6 = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype);<span class="comment">//等价于 var o = &#123;&#125;;//即以 Object.prototype 对象为一个原型模板,新建一个以这个原型模板为原型的对象</span></div><div class="line"><span class="comment">// 区别</span></div><div class="line"><span class="keyword">var</span> o7 = <span class="built_in">Object</span>.create(<span class="literal">null</span>);<span class="comment">//创建一个原型为 null 的对象</span></div></pre></td></tr></table></figure>
<h4 id="构造器模式"><a href="#构造器模式" class="headerlink" title="构造器模式"></a>构造器模式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params">sColor</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.color = sColor;      </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> Car(<span class="string">"red"</span>);</div></pre></td></tr></table></figure>
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>每个对象都会连接到一个原型对象,并且从中继承属性. 对象字面量会连接到<code>Object.prototype</code></p>
<p>需要指出的是原型连接在对象更新时是不起作用的(如果我们对某个对象做出改变是不会触及该对象的原型).原型连接只有在索引值的时候才会被用到.</p>
<h4 id="委托"><a href="#委托" class="headerlink" title="委托"></a>委托</h4><p>如果我们尝试去索引某个对象A的值,但该对象没有此属性名,那么JavaScript会试着从A的原型B中进行查找,如果B中也没有的话,会继续向B的原型C中查找,一直找到<code>Object.prototype</code>,如果都没有找到那么值就是<code>undefined</code>.</p>
<h4 id="指定对象的原型"><a href="#指定对象的原型" class="headerlink" title="指定对象的原型"></a>指定对象的原型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><p>我们可以使用typeof来观察我们的对象中是否包含某个属性<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typeof</span> xiaoming.name  <span class="comment">// 值为string</span></div><div class="line"><span class="keyword">typeof</span> xiaoming.address  <span class="comment">// 值为undefined</span></div></pre></td></tr></table></figure></p>
<p>这样我们可以通过<code>undefined</code>来判断某个对象中是否包含某个值,但是有一点需要说明的是<code>typeof</code>也会在原型链进行索引判断。</p>
<p>那么我们可以使用<code>hasOwnProperty</code>方法进行判断，它不对原型链进行检查同时它的返回值只有布尔值<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xiaoming.hasOwnProperty(<span class="string">"address"</span>)  <span class="comment">// 值为false</span></div></pre></td></tr></table></figure></p>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>delete运算符可以用来删除对象的属性.它不会触及原型链中的任何对象. 如果我们自定义的对象属性覆盖了原型中的属性,我们可以通过删除对象的属性而让原型中的属性显露出来</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/09/08/编程语言/JavaScript面向对象/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/09/08/编程语言/JavaScript面向对象/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/09/编程语言/python2 第三方库/" title="PYTHON2 第三方库" itemprop="url">PYTHON2 第三方库</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-08-09T07:00:00.000Z" itemprop="datePublished"> Published 2015-08-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="json"><a href="#json" class="headerlink" title="json"></a>json</h2><p>使用<code>dump()</code>方法将对象序列化成json,然后使用<code>load()</code>将字符串反序列化成对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding=utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> json</div><div class="line"></div><div class="line">list = [<span class="number">123</span>, <span class="string">"ad"</span>]</div><div class="line">listJson = json.dumps(list)</div><div class="line">listR = json.loads(listJson)</div><div class="line"><span class="keyword">print</span> <span class="string">"列表序列化 : "</span> + listJson</div><div class="line"><span class="keyword">print</span> <span class="string">"列表反序列化 : "</span> + str(listR[<span class="number">0</span>])</div><div class="line"></div><div class="line">tumple = (<span class="number">123</span>, <span class="string">"adf"</span>)</div><div class="line">tumpleJson = json.dumps(tumple)</div><div class="line">tumpleR = json.loads(tumpleJson)</div><div class="line"><span class="keyword">print</span> <span class="string">"元组序列化 : "</span> + tumpleJson</div><div class="line"><span class="keyword">print</span> <span class="string">"元组反序列化 : "</span> + str(tumpleR[<span class="number">1</span>])</div><div class="line"></div><div class="line">map = &#123;</div><div class="line">       <span class="string">"key1"</span>:<span class="string">"value1"</span>,</div><div class="line">       <span class="string">"key2"</span>:<span class="string">"value2"</span>,</div><div class="line">       <span class="string">"key3"</span>:<span class="string">"value3"</span>,</div><div class="line">       &#125;</div><div class="line">mapJson = json.dumps(map)</div><div class="line">mapR = json.loads(mapJson)</div><div class="line"><span class="keyword">print</span> <span class="string">"字典序列化 : "</span> + mapJson</div><div class="line"><span class="keyword">print</span> <span class="string">"字典反序列化 : "</span> + str(mapR[<span class="string">"key1"</span>])</div><div class="line"></div><div class="line">seq = [<span class="string">'apple'</span>, <span class="string">'mango'</span>, <span class="string">'carrot'</span>, <span class="string">'banana'</span>]</div><div class="line">seqJson = json.dumps(seq)</div><div class="line">seqR = json.loads(seqJson)</div><div class="line"><span class="keyword">print</span> <span class="string">"序列序列化 : "</span> + seqJson</div><div class="line"><span class="keyword">print</span> <span class="string">"序列反序列化 : "</span> + str(seqR[<span class="number">1</span>])</div><div class="line"></div><div class="line"></div><div class="line">type tumpleR[<span class="number">1</span>]</div><div class="line">type mapR[<span class="string">"key1"</span>]</div><div class="line">type seqR[<span class="number">1</span>]</div></pre></td></tr></table></figure></p>
<h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line"><span class="keyword">import</span> redis</div><div class="line"><span class="keyword">import</span> json</div><div class="line"></div><div class="line">_REDIS_HOST = <span class="string">'localhost'</span></div><div class="line">_REDIS_PORT = <span class="number">6379</span></div><div class="line">_REDIS_DB = <span class="number">1</span></div><div class="line">_PASSWORD = <span class="string">"2016"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">getRedisCli</span><span class="params">()</span> :</span></div><div class="line">    redisCli = redis.Redis(host=_REDIS_HOST, port=_REDIS_PORT, db=_REDIS_DB, password=_PASSWORD)</div><div class="line">    <span class="keyword">return</span> redisCli</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">info</span><span class="params">()</span> :</span></div><div class="line">    redisCli = getRedisCli()</div><div class="line">    <span class="keyword">return</span> redisCli.info()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">slowlog_get</span><span class="params">()</span> :</span></div><div class="line">    redisCli = getRedisCli()</div><div class="line">    <span class="keyword">return</span> redisCli.slowlog_get()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_list</span><span class="params">()</span> :</span></div><div class="line">    redisCli = getRedisCli()</div><div class="line">    <span class="keyword">return</span> redisCli.client_list()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">dbsize</span><span class="params">()</span> :</span></div><div class="line">    redisCli = getRedisCli()</div><div class="line">    <span class="keyword">return</span> redisCli.dbsize()</div><div class="line"></div><div class="line">info = info()</div><div class="line">slowlog_get = slowlog_get()</div><div class="line">dbsize = dbsize()</div><div class="line"><span class="keyword">print</span> info</div></pre></td></tr></table></figure>
<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> mysql.connector</div><div class="line"></div><div class="line">mysql_host = <span class="string">"localhost"</span></div><div class="line">mysql_database = <span class="string">"test"</span></div><div class="line">mysql_user = <span class="string">"root"</span></div><div class="line">mysql_passwrold = <span class="string">"root"</span></div><div class="line"></div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">exec_sqls</span><span class="params">(exec_sql)</span>:</span></div><div class="line">    cnx = mysql.connector.connect(user=mysql_user, password=mysql_passwrold, host=mysql_host, database=mysql_database)</div><div class="line">    cursor = cnx.cursor()</div><div class="line">    exec_sql(cursor)</div><div class="line">    cnx.commit()</div><div class="line">    cursor.close()</div><div class="line">    cnx.close()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">query_max_connections</span><span class="params">(cursor)</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"连接数信息"</span></div><div class="line"></div><div class="line">    max_connections = exec_sql_query(cursor, <span class="string">"show variables like 'max_connections'"</span>)</div><div class="line">    max_connections_num = float(max_connections[<span class="number">0</span>][<span class="number">1</span>])</div><div class="line">    print(<span class="string">"max_connections : "</span> + str(max_connections_num))</div><div class="line">	</div><div class="line">exec_sqls(query_max_connections)</div></pre></td></tr></table></figure>
<h2 id="Fabric"><a href="#Fabric" class="headerlink" title="Fabric"></a>Fabric</h2><p>安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install fabric</div></pre></td></tr></table></figure></p>
<p>如果已经安装过了则进行更新, 我现在基于的是1.12.0版本<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install --upgrade fabric</div></pre></td></tr></table></figure></p>
<p>执行本地命令<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> local</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">echo_helloworld</span><span class="params">()</span>:</span></div><div class="line">    local(<span class="string">"ECHO helloworld"</span>)</div><div class="line"></div><div class="line">echo_helloworld()</div></pre></td></tr></table></figure></p>
<p>如果命令报错的话,我们进行错误处理<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line"><span class="keyword">from</span> fabric.api <span class="keyword">import</span> local, settings</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cd_test_dir</span><span class="params">()</span>:</span></div><div class="line">    <span class="comment"># 首先我们设置只是警告, 而不是发生错误时直接Abort</span></div><div class="line">    <span class="keyword">with</span> settings(warn_only=<span class="keyword">True</span>):</div><div class="line">        result = local(<span class="string">"cd ./test"</span>, capture=<span class="keyword">True</span>)</div><div class="line">    <span class="keyword">if</span> result.failed:</div><div class="line">        local(<span class="string">"mkdir ./test"</span>)</div><div class="line">        local(<span class="string">"cd ./test"</span>, capture=<span class="keyword">True</span>)</div><div class="line"></div><div class="line">cd_test_dir()</div></pre></td></tr></table></figure></p>
<h2 id="安装失败"><a href="#安装失败" class="headerlink" title="安装失败"></a>安装失败</h2><p>最近在mac上使用pip安装插件，总是提示<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Exception:</div><div class="line">Traceback (most recent call last):</div><div class="line">  File <span class="string">"/Library/Python/2.7/site-packages/pip/basecommand.py"</span>, line 215, <span class="keyword">in</span> </div><div class="line">...</div><div class="line">...</div><div class="line">...</div><div class="line">OSError: [Errno 1] Operation not permitted: <span class="string">'/tmp/pip-qo8UFu-uninstall/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/six-1.4.1-py2.7.egg-info'</span></div></pre></td></tr></table></figure></p>
<p>各种<code>su</code>, <code>sudo</code>都不行, 在百度上找到一种解决方案<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install scrapy --user -U</div></pre></td></tr></table></figure></p>
<p>基于用户的权限来安装模块包, 成功安装</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/09/编程语言/python2 第三方库/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/09/编程语言/python2 第三方库/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/杂记/unity命令行使用/" title="unity命令行使用" itemprop="url">unity命令行使用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-08-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h1 id="Command-line-arguments"><a href="#Command-line-arguments" class="headerlink" title="Command line arguments"></a>Command line arguments</h1><p>当从命令行启动<code>Unity</code>时,它可以在启动时接受一些参数和信息, 这种方式可以用于测试用例，自动构建和其他的任务。</p>
<p>在<code>MacOS</code>系统下，你可以像下面这样启动<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/Applications/Unity/Unity.app/Contents/MacOS/Unity</div></pre></td></tr></table></figure></p>
<p>当在windows系统里，你就需要执行下面的命令了<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"C:\Program Files (x86)\Unity\Editor\Unity.exe"</span></div></pre></td></tr></table></figure></p>
<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><p>正如上面提到的,<code>editor</code>也可以在启动时通过一些额外的命令来构建游戏, 下面就列举出了这些命令：</p>
<ul>
<li><code>-assetServerUpdate &lt;IP[:port] projectName username password [r &lt;revision&gt;]&gt;</code>    从<code>IP:port</code>上的<code>Asset Server</code>强制更新项目. <code>port</code>是可选的,如果不指定的话,会默认选择<code>10733</code>这个端口. 这个命令可与<code>-projectPath</code>参数一起使用, 这样可确保你不会更新错项目.如果不指定项目名称的话,那么会默认的对<code>Unity</code>上次打开的项目进行更新. 如果<code>-projectPath</code>路径下不存在项目,那么会自动创建一个.</li>
<li><code>-batchmode</code>  在<code>batch</code>模式下运行<code>Unity</code>.这个命令我们强烈建议你与其他命令一起使用, 它会确保不会弹出Edtior. 当由脚本代码抛出异常或者<code>Asset Server</code>更新失败或者其他操作引起的异常,<code>Unity</code>会直接返回错误码<code>1</code>并退出. 需要注意的是,在<code>batch</code>模式下,<code>Unity</code>会在控制台输出一些基础日志. 还有当在<code>batch</code>模式下打开一个项目,那么<code>Editor</code>就不能再开打这个相同的项目.</li>
<li><code>-buildLinux32Player &lt;pathname&gt;</code>    构建一个32位的linux版应用.(例如 <code>-buildLinux32Player path/to/your/build</code>).</li>
<li><code>-buildLinux64Player &lt;pathname&gt;</code>    构建一个64位的linux版应用.(例如 <code>-buildLinux64Player path/to/your/build</code>).</li>
<li><code>-buildLinuxUniversalPlayer &lt;pathname&gt;</code>    构建一个32位和64位的linux混合版应用.(例如 <code>-buildLinuxUniversalPlayer path/to/your/build</code>).</li>
<li><code>-buildOSXPlayer &lt;pathname&gt;</code>    构建一个32位的MacOS版应用.(例如 <code>-buildOSXPlayer path/to/your/build.app</code>).</li>
<li><code>-buildOSX64Player &lt;pathname&gt;</code>    构建一个64位的MacOS版应用.(例如 <code>-buildOSX64Player path/to/your/build.app</code>).</li>
<li><code>-buildOSXUniversalPlayer &lt;pathname&gt;</code>    构建一个32位和64位的MacOs混合版应用.(例如 <code>-buildOSXUniversalPlayer path/to/your/build.app</code>).</li>
<li><code>-buildTarget &lt;name&gt;</code>    当项目被加载之前允许用户选择的构建目标：<code>win32, win64, osx, linux, linux64, ios, android, web, webstreamed, webgl, xbox360, xboxone, ps3, ps4, psp2, wsa, wp8, bb10, tizen, samsungtv</code>.</li>
<li><code>-buildWebPlayer &lt;pathname&gt;</code>    构建一个在web上运行的应用.(例如<code>-buildWebPlayer path/to/your/build</code>).</li>
<li><code>-buildWebPlayerStreamed &lt;pathname&gt;</code>    Build a streamed WebPlayer (<code>-buildWebPlayerStreamed path/to/your/build</code>).</li>
<li><code>-buildWindowsPlayer &lt;pathname&gt;</code>    构建一个32位的Windows版应用.(例如  <code>-buildWindowsPlayer path/to/your/build.exe</code>).</li>
<li><code>-buildWindows64Player &lt;pathname&gt;</code>    构建一个64位的Windows版应用.(例如  <code>-buildWindows64Player path/to/your/build.exe</code>).</li>
<li><code>-createProject &lt;pathname&gt;</code>    在指定路径下(<code>pathname</code>)创建一个空项目.</li>
<li><code>-executeMethod &lt;ClassName.MethodName&gt;</code>    只要Unity启动完成并且项目打开(可能还需要等待asset server更新完成)就执行该静态方法. 该功能可用于持续集成, 运行测试用例, 执行构建任务, 准备一些数据等等. 如果你想让程序在命令行中返回一个错误码,那么你可以直接在Unity中直接抛出一个异常,这时命令行返回的错误码是1，或者你可以调用<code>EditorApplication.Exit</code>,这时会返回一个非0的状态码. 如果你想要向该方法传递参数,那么你可以直接将这些参数添加到命令行上,然后在程序中使用<code>System.Environment.GetCommandLineArgs</code>获得这些参数.To use -executeMethod, you need to place the enclosing script in an Editor folder. The method to be executed must be defined as static.</li>
<li><code>-exportPackage &lt;exportAssetPath1 exportAssetPath2 ExportAssetPath3 exportFileName&gt;</code>    在指定的路径下导出<code>package</code>. <code>exportAssetPath</code>是一个从Unity项目导出到的文件夹(路径相对于Unity项目的根路径), <code>exportFileName</code>是package的名字. 一般这个选项可以一次性地导出整个文件夹.这个命令一般需要和<code>-projectPath</code>参数一起使用.</li>
<li><code>-force-d3d9 (Windows only)</code>    设置editor使用<code>Direct3D 9</code>进行渲染. 这个是默认选项,一般不需要你去设置这个值.</li>
<li><code>-force-d3d11 (Windows only)</code>    设置editor使用<code>Direct3D 11</code>进行渲染.</li>
<li><code>-force-opengl (Windows only)</code>    设置editor使用<code>OpenGL</code>进行渲染. 即使<code>Direct3D</code>可用我们也可以说使用<code>OpenGL</code>进行渲染. 一般我们是在<code>Direct3D 9.0c</code>不可用的情况下才选择使用<code>openGL</code></li>
<li><code>-force-free</code>    让edtior在<code>Unity license</code>下运行, 即使我们安装了<code>Unity Pro license</code></li>
<li><code>-importPackage &lt;pathname&gt;</code>    导入指定的<code>package</code>. 如果不进行导入的话,会出现一个对话框.</li>
<li><code>-logFile &lt;pathname&gt;</code>    指定Editor或者<code>Windows/Linux/OSX</code>版本应用的日志输出路径.</li>
<li><code>-silent-crashes</code>    不显示crashe对话框.</li>
<li><code>-projectPath &lt;pathname&gt;</code>    在指定的路径下打开项目.</li>
<li><code>-quit</code>    当其他命令都执行完之后退出Unity. 注意这个会将错误日志隐藏掉，但是可以在<code>Editor.log</code>中找到它.</li>
<li><code>-serial &lt;serial&gt;</code>    Activates Unity with the specified serial key. It is recommended to pass “-batchmode -quit” arguments as well, in order to quit Unity when done, if using this for automated activation of Unity. Please allow a few seconds before license file is created, as Unity needs to communicate with the license server. Make sure that License file folder exists, and has appropriate permissions before running Unity with this argument. In case activation fails, see the Editor.log for info. This option is new in Unity 5.0.</li>
</ul>
<h4 id="Example-usage"><a href="#Example-usage" class="headerlink" title="Example usage"></a>Example usage</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// C# example</span></div><div class="line">using UnityEditor;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyEditorScript</span></span></div><div class="line">&#123;</div><div class="line">     <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PerformBuild</span> <span class="params">()</span></span></div><div class="line">     &#123;</div><div class="line">         string[] scenes = &#123; <span class="string">"Assets/MyScene.unity"</span> &#125;;</div><div class="line">         BuildPipeline.BuildPlayer(scenes, ...);</div><div class="line">     &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// JavaScript example</span></div><div class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">PerformBuild</span> <span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    string[] scenes = &#123; <span class="string">"Assets/MyScene.unity"</span> &#125;;</div><div class="line">    BuildPipeline.BuildPlayer(scenes, ...);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>下面的命令在<code>batch</code>模式下运行Unity, 同时执行<code>MyEditorScript.MyMethod</code>完成, 当该方法执行完之后退出.</p>
<ul>
<li><code>Windows</code>: <code>C:\program files\Unity\Editor\Unity.exe -quit -batchmode -executeMethod MyEditorScript.MyMethod</code></li>
<li><code>Mac OS</code>: <code>/Applications/Unity/Unity.app/Contents/MacOS/Unity -quit -batchmode -executeMethod MyEditorScript.MyMethod</code></li>
</ul>
<p>下面的命令在<code>batch</code>执行Unity, 同时从<code>asset server</code>更新指定项目. 当全部的<code>asset</code>下载完之后, 指定的方法会被执行,当方法被完全执行之后,Unity会自动退出.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/Applications/Unity/Unity.app/Contents/MacOS/Unity -batchmode -projectPath ~/UnityProjects/AutobuildProject -assetServerUpdate <span class="number">192.168</span>.1.1 MyGame AutobuildUser l33tpa33 -executeMethod MyEditorScript.PerformBuild -quit</div></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂记/">杂记</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/杂记/unity命令行使用/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/杂记/unity命令行使用/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/编程语言/python2 文件和网络操作/" title="PYTHON2 文件和网络操作" itemprop="url">PYTHON2 文件和网络操作</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-08-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p>打开一个文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">f = open(name, [mode], [size])</div></pre></td></tr></table></figure></p>
<ul>
<li>name: 文件名</li>
<li>mode: 打开方式</li>
<li>size: 操作的字节数</li>
</ul>
<h3 id="mode值"><a href="#mode值" class="headerlink" title="mode值:"></a>mode值:</h3><ul>
<li><code>r</code>: 只读方式打开(文件必须存在)</li>
<li><code>w</code>: 只写方式打开(文件不存在创建文件,文件存在清空文件)</li>
<li><code>a</code>: 追加方式打开(文件不存在创建文件)</li>
<li><code>r+/w+</code>: 读写方式打开</li>
<li><code>a+</code>: 读写方式打开</li>
<li><code>rb,wb,ab,rb+,wb+,ab+</code>: 二进制方式打开</li>
</ul>
<blockquote>
<p>注意:如果我们使用非二进制模式输出时<code>\n(0A)</code>会被自动替换为<code>\r\n(0D 0A)</code>,因此在文件输出时,我们要注意这个问题.</p>
</blockquote>
<h3 id="对象常用方法"><a href="#对象常用方法" class="headerlink" title="对象常用方法"></a>对象常用方法</h3><ul>
<li><code>read([size])</code> : 读取文件(size有值则读取size个字节),如果不填写size则读取全部</li>
<li><code>readline([size])</code> : 每次读取一行(size值为当前行的长度,但是如果每次读取不完的话,下次再调用readline时会继续在当前行读取)</li>
<li><code>readlines([size])</code> : 读取多行,返回每一行组成的列表. 如果不填写size则读取全部内容(不推荐使用这种方式读取所有行)</li>
<li><code>write(str)</code> : 将字符串直接写入文件中</li>
<li><code>writelines(lines)</code>: 将字符串或者字符串列表写入文件中.</li>
<li><code>close()</code>: 关闭文件操作</li>
</ul>
<p>我们可以使用for循环遍历整个文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">file = open(<span class="string">"demo.txt"</span>)</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> file:</div><div class="line">	print(line)</div></pre></td></tr></table></figure></p>
<h3 id="OS模块文件操作"><a href="#OS模块文件操作" class="headerlink" title="OS模块文件操作"></a>OS模块文件操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fd = os.open(filename, flag, [mode])</div></pre></td></tr></table></figure>
<p>filename和mode我们通过上面的描述都知道了,现在我们看一下flag属性值(文件打开方式)</p>
<ul>
<li>os.O_CREAT : 创建文件</li>
<li>os.O_RDONLY : 只读方式打开</li>
<li>os.O_WRONLY : 只写方式打开</li>
<li>os.O_RDWR : 读写方式打开</li>
</ul>
<p>示例<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fd = os.open(<span class="string">"test.txt"</span>, os.O_CREAT | os.O_RDWR)</div><div class="line">os.write(fd, <span class="string">"helloworld"</span>)</div></pre></td></tr></table></figure></p>
<h3 id="遍历目录文件"><a href="#遍历目录文件" class="headerlink" title="遍历目录文件"></a>遍历目录文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</div><div class="line"></div><div class="line"><span class="keyword">import</span> os.path</div><div class="line">rootdir = <span class="string">"C:\\Users\\wangming\\Documents"</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> parent, dirnames, filenames <span class="keyword">in</span> os.walk(rootdir):</div><div class="line"></div><div class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</div><div class="line">        fullname = os.path.join(parent, filename)</div><div class="line">        <span class="comment"># print "the full name of the file is:" + fullname #输出文件路径信息</span></div><div class="line"></div><div class="line">        file = open(fullname)</div><div class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> file:</div><div class="line">            <span class="keyword">if</span> line.find(<span class="string">")["</span>) &gt; <span class="number">0</span>:</div><div class="line">                print(str(fullname) + <span class="string">" -&gt; "</span> + str(line))</div></pre></td></tr></table></figure>
<h3 id="中文乱码"><a href="#中文乱码" class="headerlink" title="中文乱码"></a>中文乱码</h3><p>写入文件时,如果输出中文,我们经常会遇到乱码的问题.只需要在python文件顶部加上以下内容就可以了<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-*- coding=utf-8 -*-</span></div></pre></td></tr></table></figure></p>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><h3 id="Socket服务器"><a href="#Socket服务器" class="headerlink" title="Socket服务器"></a>Socket服务器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> socket</div><div class="line"></div><div class="line">sock=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</div><div class="line">sock.bind((<span class="string">'localhost'</span>,<span class="number">8089</span>))</div><div class="line">sock.listen(<span class="number">5</span>)</div><div class="line"></div><div class="line">print(<span class="string">'tcpServer listen at: %s:%s\n\r'</span> %(<span class="string">'localhost'</span>,<span class="number">8089</span>))</div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">    client_sock,client_addr=sock.accept()</div><div class="line">    print(<span class="string">'%s:%s connect'</span> %client_addr)</div><div class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</div><div class="line">        recv=client_sock.recv(<span class="number">4096</span>)</div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> recv:</div><div class="line">            client_sock.close()</div><div class="line">            <span class="keyword">break</span></div><div class="line">        print(<span class="string">'[Client %s:%s said]:%s'</span> % (client_addr[<span class="number">0</span>],client_addr[<span class="number">1</span>],recv))</div><div class="line">        client_sock.send(<span class="string">'tcpServer has received your message'</span>)</div><div class="line">        sock.close()</div></pre></td></tr></table></figure>
<h2 id="HttpServer"><a href="#HttpServer" class="headerlink" title="HttpServer"></a>HttpServer</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> BaseHTTPServer</div><div class="line"><span class="keyword">import</span> urlparse</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">WebRequestHandler</span><span class="params">(BaseHTTPServer.BaseHTTPRequestHandler)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do_GET</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""</span></div><div class="line">        """</div><div class="line">        <span class="keyword">print</span> <span class="string">"8090"</span></div><div class="line"></div><div class="line">server = BaseHTTPServer.HTTPServer((<span class="string">'0.0.0.0'</span>,<span class="number">8090</span>), WebRequestHandler)</div><div class="line">server.serve_forever()</div></pre></td></tr></table></figure>
<p>self 还有如下参数</p>
<ul>
<li>self.path</li>
<li>self.client_address</li>
<li>self.address_string()</li>
<li>self.command</li>
<li>self.path</li>
<li>self.request_version</li>
<li>self.server_version</li>
<li>self.sys_version</li>
<li>self.protocol_version</li>
<li>self.headers</li>
<li>self.send_response(200)</li>
<li>self.end_headers()</li>
</ul>
<h3 id="Socket客户端"><a href="#Socket客户端" class="headerlink" title="Socket客户端"></a>Socket客户端</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</div><div class="line">client.connect((<span class="string">'localhost'</span>,<span class="number">8880</span>))</div><div class="line"></div><div class="line">client.send(<span class="string">'2'</span>)</div><div class="line">recvData=client.recv(<span class="number">1024</span>)</div><div class="line"><span class="keyword">print</span> recvData</div></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/编程语言/python2 文件和网络操作/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/编程语言/python2 文件和网络操作/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/08/杂记/IntelliJ IDEA/" title="IntelliJ IDEA" itemprop="url">IntelliJ IDEA</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-08-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-08-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><p>编辑快捷键</p>
<ul>
<li><code>ALT Shift Insert</code> 块选择 </li>
<li><code>Ctrl+/</code>   注释//   </li>
<li><code>Ctrl+SHIFT+/</code>  注释/<em>…</em>/ </li>
<li><code>Ctrl+W</code>   选中代码，连续按会有其他效果 </li>
</ul>
<p>查询快捷键</p>
<ul>
<li><code>Ctrl+N</code>   查找类 </li>
<li><code>Ctrl+SHIFT+N</code>  查找文件 </li>
<li><code>CIRL+B / F4</code>   找变量的来源 </li>
<li><code>Ctrl+ALT+B</code>  找所有的子类 </li>
<li><code>Ctrl+G</code>   定位行 </li>
<li><code>Ctrl+F</code>   在当前窗口查找文本 </li>
<li><code>Ctrl+SHIFT+F</code>  在指定窗口查找文本 </li>
<li><code>Ctrl+R</code>   在当前窗口替换文本 </li>
<li><code>Ctrl+SHIFT+R</code>  在指定窗口替换文本 </li>
<li><code>Ctrl+E</code>   最近打开的文件 </li>
<li><code>F3</code>   向下查找关键字出现位置 </li>
<li><code>SHIFT+F3</code>  向上一个关键字出现位置 </li>
<li><code>F4</code>   查找变量来源 </li>
<li><code>Ctrl+ALT+F7</code>  选中的字符查找工程出现的地方 </li>
</ul>
<p>自动代码</p>
<ul>
<li><code>ALT+回车</code>  导入包,自动修正 </li>
<li><code>Ctrl+ALT+L</code>  格式化代码 </li>
<li><code>Ctrl+ALT+I</code>  自动缩进 </li>
<li><code>Ctrl+ALT+O</code>  优化导入的类和包 </li>
<li><code>ALT+INSERT</code>  生成代码(如GET,SET方法,构造函数等)  </li>
<li><code>Ctrl+SHIFT+SPACE</code> 自动补全代码 </li>
<li><code>Ctrl+空格</code>  代码提示 </li>
<li><code>Ctrl+ALT+SPACE</code>  类名或接口名提示 </li>
<li><code>Ctrl+P</code>   方法参数提示 </li>
<li><code>Ctrl+J</code>   自动代码 </li>
<li><code>Ctrl+ALT+T</code>  把选中的代码放在 TRY{} IF{} ELSE{} 里</li>
</ul>
<p>复制快捷方式</p>
<ul>
<li><code>Ctrl+D</code>   复制行 </li>
<li><code>Ctrl+X</code>   剪切,删除行  </li>
</ul>
<p>其他快捷方式</p>
<ul>
<li><code>Ctrl+Z</code>   倒退 </li>
<li><code>Ctrl+SHIFT+Z</code>  向前 </li>
<li><code>Ctrl+ALT+F12</code>  资源管理器打开文件夹 </li>
<li><code>Ctrl+B</code>   快速打开光标处的类或方法 </li>
<li><code>ALT+ ←/→</code>  切换代码视图 </li>
<li><code>Ctrl+ALT ←/→</code>  返回上次编辑的位置 </li>
<li><code>ALT+ ↑/↓</code>  在方法间快速移动定位 </li>
<li><code>SHIFT+F6</code>  重构-重命名 </li>
<li><code>Ctrl+Q</code>   显示注释文档 </li>
<li><code>ALT+1</code>   快速打开或隐藏工程面板 </li>
<li><code>Ctrl+SHIFT+UP/DOWN</code> 代码向上/下移动。 </li>
<li><code>Ctrl+UP/DOWN</code>  光标跳转到第一行或最后一行下 </li>
<li><code>F2 或Shift+F2</code> 高亮错误或警告快速定位</li>
</ul>
<p>版本控制相关</p>
<ul>
<li><code>ALT+SHIFT+C</code>  查找修改的文件 </li>
<li><code>Ctrl+SHIFT+Alt+UP/DOWN</code>  跳转到当前文件的上一个修改或者下一个修改</li>
</ul>
<h2 id="缩进设置"><a href="#缩进设置" class="headerlink" title="缩进设置"></a>缩进设置</h2><p><img src="https://raw.githubusercontent.com/ming15/blog-website/images/other/idea_indent.jpg" alt=""></p>
<ul>
<li><code>Use tab character</code> : 如果勾选则使用tab缩进,否则使用空格缩进</li>
<li><code>Tab size</code> : 每个tab占用几个空格.</li>
<li><code>Indent</code> : 每个缩进占用几个空格.</li>
</ul>
<h2 id="Gradle-Idea编译报错"><a href="#Gradle-Idea编译报错" class="headerlink" title="Gradle Idea编译报错"></a>Gradle Idea编译报错</h2><p>刚刚来到了新的项目, 新的项目里使用Gradle作为编译工具.  说完前文说正题: 开发完新的模块后打算写单元测试来验证一下自己的功能. 但是在运行的时候遇到了一些问题, 由于整个项目都没进行单元测试的编写, 因此需要搭建起这个环境,</p>
<p>其实环境很简单只要单元测试能编译通过运行就ok了，但是仍然发生了一些问题,由于项目是从JDK7升级上来的, 因此有些地方还是采用的配置, 因此当发现在编译时遇到了</p>
<ul>
<li>class版本不支持</li>
<li>提示:无效的源发行版: 1.8<br>我们要检查俩个地方</li>
<li>build.gradle 这个文件里指定了编译器版本(例如sourceCompatibility, 需要注意的是看看是否依赖了其他的gradle配置, 我就踩中了这个坑)</li>
<li>Intellij IDEA -Preference-Build, Execution, Deployment-Gradle -Gradle JVM, 看一下这个配置里面的配置, 当我将gradle的配置修改之后如果不修改这里就会出现  无效的源发行版: 1.8</li>
</ul>
<p>另外我们一般在项目里会设置JDK版本(项目右击Open Moudle Setting), 这个只是设置整个idea的项目相关的, 也就是和你写代码相关, 和项目的构建等等没啥关系</p>
<h2 id="eclipse格式化文件"><a href="#eclipse格式化文件" class="headerlink" title="eclipse格式化文件"></a>eclipse格式化文件</h2><p>IDEA如果要使用eclipse的格式化文件需要安装<code>Eclipse Code Formatter</code>插件, 然后在setting里的<code>Other Seetings</code>里的<code>Eclipse Code Formatter</code>里引用格式化文件就好了</p>
<h2 id="Idea打包与classpath"><a href="#Idea打包与classpath" class="headerlink" title="Idea打包与classpath"></a>Idea打包与classpath</h2><p>当我们使用maven创建一个项目的时候会创建出如下的目录<br><img src="https://raw.githubusercontent.com/ming15/blog-website/images/other/idea%20classpath.png" alt=""><br>我们会看到如下的几个目录, 这几个目录都是设置在classpath上</p>
<ul>
<li>Sources ：src/main/java</li>
<li>Resources : src/main/resources<br>如果我们要新添加一个classpath时, 点击add Content Root就好. <blockquote>
<p>注意我们不要使用<code>Run/Debug Configurations</code>里的VM options, 这个路径有时候是让启动我们自己程序的Idea进程使用的.<br>我们在程序里可以使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">InputStream in = TestReadFile.class.getClassLoader().getResourceAsStream(<span class="string">"./mybatis-config.xml"</span>);</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<p>这种直接读取classpath也就是resources中的文件. 当使用Maven打包之后, 也可以直接从jar包中读取<br><img src="" alt=""><br>我们看到resources目录直接放到了jar包的根目录下,但是我们需要配置一些maven的打包方式</p>
<h2 id="Javadoc-报错"><a href="#Javadoc-报错" class="headerlink" title="Javadoc 报错"></a>Javadoc 报错</h2><p>在新的项目中Javadoc写的并不规范, 因此Idea在检查中, 会产生报错标红信息，采用下面的方法就可以将其取消<br><img src="https://raw.githubusercontent.com/ming15/blog-website/images/other/Idea%20Inspections.jpg" alt=""></p>
<h2 id="方法断点、"><a href="#方法断点、" class="headerlink" title="方法断点、"></a>方法断点、</h2><p>在Idea中千万不要加方法断点, 这个会严重的降低服务器性能. 下面那个就是方法断点<br><img src="https://raw.githubusercontent.com/ming15/blog-website/images/other/idea%20method%20breakpoints.bmp" alt=""></p>
<h2 id="生成类图"><a href="#生成类图" class="headerlink" title="生成类图"></a>生成类图</h2><p><img src="https://raw.githubusercontent.com/ming15/blog-website/images/other/idea%20lei%20tu.png" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂记/">杂记</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/08/杂记/IntelliJ IDEA/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/08/杂记/IntelliJ IDEA/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/07/编程语言/python2 函数/" title="PYTHON2 函数" itemprop="url">PYTHON2 函数</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-08-07T07:00:00.000Z" itemprop="datePublished"> Published 2015-08-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="定义一个不带参数的函数"><a href="#定义一个不带参数的函数" class="headerlink" title="定义一个不带参数的函数"></a>定义一个不带参数的函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义一个不带参数的函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">"hello world"</span>)</div><div class="line"></div><div class="line"><span class="comment">## 调用函数</span></div><div class="line">printHelloworld()</div></pre></td></tr></table></figure>
<h3 id="定义一个带参数的函数"><a href="#定义一个带参数的函数" class="headerlink" title="定义一个带参数的函数"></a>定义一个带参数的函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义一个带参数的函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(saywhat)</span>:</span></div><div class="line">    print(saywhat)</div><div class="line"></div><div class="line"><span class="comment">## 调用函数</span></div><div class="line">printHelloworld(<span class="string">"hello world"</span>)</div></pre></td></tr></table></figure>
<h3 id="函数中的局部变量"><a href="#函数中的局部变量" class="headerlink" title="函数中的局部变量"></a>函数中的局部变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义一个带参数的函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(saywhat)</span>:</span></div><div class="line">    value = saywhat</div><div class="line">    print(value)</div><div class="line"></div><div class="line"><span class="comment">## 调用函数</span></div><div class="line">printHelloworld(<span class="string">"hello world"</span>)</div></pre></td></tr></table></figure>
<p>当在函数内部修改了局部变量之后,并不会影响脚本中的变量<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义一个带参数的函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(saywhat)</span>:</span></div><div class="line">    print(saywhat)</div><div class="line">    saywhat = <span class="string">"new value"</span></div><div class="line">    print(saywhat)</div><div class="line"></div><div class="line"><span class="comment"># 调用函数</span></div><div class="line">str = <span class="string">"hello world"</span></div><div class="line">printHelloworld(str)</div><div class="line">print(str)</div></pre></td></tr></table></figure></p>
<h3 id="使用global语句"><a href="#使用global语句" class="headerlink" title="使用global语句"></a>使用global语句</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义一个带参数的函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">global</span> saywhat <span class="comment">## 此处不可进行初始化</span></div><div class="line">    saywhat = <span class="string">"new value"</span></div><div class="line">    print(saywhat)</div><div class="line"></div><div class="line"><span class="comment"># 调用函数</span></div><div class="line">printHelloworld()</div><div class="line">print(saywhat)</div></pre></td></tr></table></figure>
<h3 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h3><p>我们也可以给函数参数指定默认值<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(str, str1=<span class="string">"str1 value"</span>, str2=<span class="string">"str2 value"</span>)</span>:</span></div><div class="line">    print(str + <span class="string">" "</span> + str1 + <span class="string">" "</span> + str2)</div><div class="line"></div><div class="line"><span class="comment"># 调用函数</span></div><div class="line">printHelloworld(<span class="string">"123"</span>, str2=<span class="string">"789"</span>)</div></pre></td></tr></table></figure></p>
<h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><p>python函数也可以接受不定参数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(*args)</span>:</span></div><div class="line">	print(args)</div><div class="line"></div><div class="line">f(<span class="number">1</span>)</div><div class="line">f(<span class="number">1</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<p>输出为<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="number">1</span>,)</div><div class="line">(<span class="number">1</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<h3 id="return返回值"><a href="#return返回值" class="headerlink" title="return返回值"></a>return返回值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printHelloworld</span><span class="params">(str, str1=<span class="string">"str1 value"</span>, str2=<span class="string">"str2 value"</span>)</span>:</span></div><div class="line">    print(str)</div><div class="line">    <span class="keyword">if</span> str1==<span class="string">"str1 value"</span> :</div><div class="line">        <span class="keyword">return</span> <span class="string">"nil value"</span></div><div class="line">    print(str1)</div><div class="line">    print(str2)</div><div class="line"></div><div class="line"><span class="comment"># 调用函数</span></div><div class="line">result = printHelloworld(<span class="string">"123"</span>, str2=<span class="string">"789"</span>)</div><div class="line">print(result)</div><div class="line"></div><div class="line">result = printHelloworld(<span class="string">"123"</span>, str1=<span class="string">"789"</span>)</div><div class="line">print(result)</div></pre></td></tr></table></figure>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><p>如果函数A里的参数或者返回值是另一个函数,那么函数A就是高阶函数.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add5</span><span class="params">(v1)</span>:</span></div><div class="line">	<span class="keyword">return</span> v1 + <span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(v1, v2, add5)</span>:</span></div><div class="line">	<span class="keyword">return</span> add5(v1) + add5(v2)</div><div class="line"></div><div class="line">print(add(<span class="number">2</span>, <span class="number">4</span>, add5))</div></pre></td></tr></table></figure></p>
<h4 id="内置高阶函数"><a href="#内置高阶函数" class="headerlink" title="内置高阶函数"></a>内置高阶函数</h4><p><code>map()</code>函数：它接受一个函数和一个列表,然后遍历列表中的每个元素作用在函数参数中<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">print(map(add5, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))</div><div class="line"></div><div class="line">// 结果为</div><div class="line">[<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</div></pre></td></tr></table></figure></p>
<p><code>reduce()</code>函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p><code>filter()</code>函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>在2.7版本中必须要如下声明一个闭包<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">outerF</span><span class="params">()</span>:</span></div><div class="line">	count = [<span class="number">10</span>]</div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">innerF</span><span class="params">()</span>:</span></div><div class="line">		print(count[<span class="number">0</span>])</div><div class="line">		count[<span class="number">0</span>] = <span class="number">20</span></div><div class="line">	<span class="keyword">return</span> innerF</div><div class="line"></div><div class="line">f = outerF()</div><div class="line">f()</div><div class="line">f()</div></pre></td></tr></table></figure></p>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>python通过lambda表达式完成匿名函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">nonameF</span><span class="params">(f, v1)</span>:</span></div><div class="line">	<span class="keyword">return</span> f(v1)</div><div class="line"></div><div class="line">value = nonameF(<span class="keyword">lambda</span> x: x + <span class="number">1</span>, <span class="number">5</span>)</div><div class="line">print(value)</div></pre></td></tr></table></figure></p>
<p>不过python只是有限的支持匿名函数, 匿名函数只能是一个表达式,而且不能拥有return,表达式的结果就是返回值</p>
<h3 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h3><p>偏函数就是通过<code>functools.partial</code>函数将函数A中的参数指定一个值然后返回一个新的函数<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> functools</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fa</span><span class="params">(var1, var2, var3)</span>:</span></div><div class="line">	print(var1 + var2 + var3)</div><div class="line"></div><div class="line">fb = functools.partial(fa, var2=<span class="number">2</span>, var3=<span class="number">3</span>)</div><div class="line"></div><div class="line">fa(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line">fb(<span class="number">1</span>)</div></pre></td></tr></table></figure></p>
<p>最后我们看到了相同的结果</p>
<h3 id="重定义"><a href="#重定义" class="headerlink" title="重定义"></a>重定义</h3><p>我们可以对一个已经存在的函数重新定义行为<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(*args)</span>:</span></div><div class="line">	print(args)</div><div class="line"></div><div class="line"></div><div class="line">f = <span class="keyword">lambda</span> : <span class="number">15</span></div><div class="line">print(f())</div><div class="line"></div><div class="line">n = f</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></div><div class="line">	<span class="keyword">return</span> <span class="number">20</span></div><div class="line"></div><div class="line">print(n())</div><div class="line">print(f())</div></pre></td></tr></table></figure></p>
<p>从这一点可以验证在python中函数也是对象.</p>
<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><p>装饰器本质上就是一个高阶函数，它接收一个函数作为参数，然后，返回一个新函数。</p>
<p>python通过<code>@</code>语法内置实现装饰器<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fb</span><span class="params">(f)</span>:</span></div><div class="line">	print(<span class="string">"fb"</span>)</div><div class="line">	<span class="keyword">return</span> f</div><div class="line"></div><div class="line"><span class="meta">@fb</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fa</span><span class="params">(var1, var2, var3)</span>:</span></div><div class="line">	print(var1 + var2 + var3)</div><div class="line"></div><div class="line">fa(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</div></pre></td></tr></table></figure></p>
<p>上面这个例子每次在调用<code>fa</code>方法时都会输出一个<code>fb</code>字符串</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/07/编程语言/python2 函数/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/07/编程语言/python2 函数/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/06/编程语言/python2 基础语法/" title="PYTHON2 基础语法" itemprop="url">PYTHON2 基础语法</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-08-06T07:00:00.000Z" itemprop="datePublished"> Published 2015-08-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>## </p>
<h2 id="控制流程"><a href="#控制流程" class="headerlink" title="控制流程"></a>控制流程</h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tmp = <span class="number">0</span></div><div class="line"><span class="keyword">if</span> tmp &gt; <span class="number">0</span> :</div><div class="line">    print(<span class="string">"&gt;"</span>)</div><div class="line"><span class="keyword">elif</span> tmp &lt; <span class="number">0</span> :</div><div class="line">    print(<span class="string">"&lt;"</span>)</div><div class="line"><span class="keyword">else</span> :</div><div class="line">    print(<span class="string">"="</span>)</div></pre></td></tr></table></figure>
<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tmp = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> tmp &lt; <span class="number">3</span> :</div><div class="line">    print(tmp)</div><div class="line">    tmp +=<span class="number">1</span></div><div class="line"><span class="keyword">else</span> :</div><div class="line">    print(<span class="string">"over"</span>)</div></pre></td></tr></table></figure>
<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]:</div><div class="line">    print(i)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> i &gt; <span class="number">2</span> :</div><div class="line">        <span class="keyword">break</span></div><div class="line">    <span class="keyword">else</span> :</div><div class="line">        <span class="keyword">continue</span></div><div class="line"></div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">'loop over'</span>)</div></pre></td></tr></table></figure>
<p>或者<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#  从0开始步增到10</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">10</span>, <span class="number">1</span>)</div><div class="line">    print(i)</div></pre></td></tr></table></figure></p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>模块是一个包含函数和变量的文件。为了在其他程序中重用模块，模块的文件名必须以.py为扩展名。</p>
<h3 id="使用sys模块"><a href="#使用sys模块" class="headerlink" title="使用sys模块"></a>使用<code>sys</code>模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"></div><div class="line"><span class="keyword">for</span> argv <span class="keyword">in</span> sys.argv :</div><div class="line">    print(argv)</div></pre></td></tr></table></figure>
<p>使用<code>from..import..</code>, <code>import</code>可以使用<code>*</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</div><div class="line"></div><div class="line"><span class="keyword">for</span> argvtmp <span class="keyword">in</span> argv :</div><div class="line">    print(argvtmp)</div></pre></td></tr></table></figure></p>
<p>模块的name,下面的语法输出当前模块的name<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(__name__)</div></pre></td></tr></table></figure></p>
<h3 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h3><ul>
<li><p>建立<code>mymodule.py</code>文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Filename: mymodule.py</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">printModuleName</span><span class="params">()</span>:</span></div><div class="line">    print(__name__)</div></pre></td></tr></table></figure>
</li>
<li><p>建立<code>test_mymodule.py</code>文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> mymodule</div><div class="line"></div><div class="line">mymodule.printModuleName()</div></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>需要注意的是<code>mymodule.py</code>文件的<code>Filename</code>必须和文件名相同</li>
<li>如果<code>module</code>的name是<code>__main__</code>说明这个module是由用户启动的</li>
</ol>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><ul>
<li>声明一个列表 <code>list = [123, &quot;ad&quot;]</code></li>
<li>索引第一个元素 <code>list[0]</code></li>
<li>在尾部添加一个元素 <code>list.append(2.56)</code></li>
<li>对第一个元素重新赋值 <code>list[0] = &quot;0&quot;</code></li>
<li>获取列表长度 <code>len(list)</code></li>
<li>删除第一个元素 <code>del list[0]</code></li>
</ul>
<h3 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h3><p>元组和列表十分类似，只不过元组和字符串一样是 不可变的 即你不能修改元组<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tumple = (<span class="number">123</span>, <span class="string">"adf"</span>)</div><div class="line">print(tumple[<span class="number">0</span>])</div><div class="line">print(len(tumple))</div></pre></td></tr></table></figure></p>
<h3 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">map = &#123;</div><div class="line">       <span class="string">"key1"</span>:<span class="string">"value1"</span>,</div><div class="line">       <span class="string">"key2"</span>:<span class="string">"value2"</span>,</div><div class="line">       <span class="string">"key3"</span>:<span class="string">"value3"</span>,</div><div class="line">       &#125;</div><div class="line">print(map)</div><div class="line">print(len(map))</div><div class="line">print(map[<span class="string">"key1"</span>])</div><div class="line"><span class="keyword">del</span> map[<span class="string">"key1"</span>]</div><div class="line">print(map)</div><div class="line"></div><div class="line"><span class="keyword">for</span> key <span class="keyword">in</span> map:</div><div class="line">    print(key + <span class="string">"   "</span> + map[key])</div><div class="line"><span class="keyword">if</span> <span class="string">"key2"</span> <span class="keyword">in</span> map:</div><div class="line">    print(<span class="string">"map contains key2"</span>)</div><div class="line"></div><div class="line">help(dict)</div></pre></td></tr></table></figure>
<h3 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h3><p>序列的两个主要特点是索引操作符和切片操作符<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">shoplist = [<span class="string">'apple'</span>, <span class="string">'mango'</span>, <span class="string">'carrot'</span>, <span class="string">'banana'</span>]</div><div class="line"></div><div class="line">print(<span class="string">'Item 0 is'</span>, shoplist[<span class="number">0</span>])</div><div class="line">print(<span class="string">'Item -1 is'</span>, shoplist[<span class="number">-1</span>])</div><div class="line"></div><div class="line"><span class="comment">### Slicing on a list</span></div><div class="line">print(<span class="string">'Item 1 to 3 is'</span>, shoplist[<span class="number">1</span>:<span class="number">3</span>])</div><div class="line">print(<span class="string">'Item 2 to end is'</span>, shoplist[<span class="number">2</span>:])</div><div class="line">print(<span class="string">'Item 1 to -1 is'</span>, shoplist[<span class="number">1</span>:<span class="number">-1</span>])</div><div class="line">print(<span class="string">'Item start to end is'</span>, shoplist[:])</div><div class="line"></div><div class="line"><span class="comment">### Slicing on a string</span></div><div class="line">name = <span class="string">'swaroop'</span></div><div class="line">print(<span class="string">'characters 1 to 3 is'</span>, name[<span class="number">1</span>:<span class="number">3</span>])</div><div class="line">print(<span class="string">'characters 2 to end is'</span>, name[<span class="number">2</span>:])</div><div class="line">print(<span class="string">'characters 1 to -1 is'</span>, name[<span class="number">1</span>:<span class="number">-1</span>])</div><div class="line">print(<span class="string">'characters start to end is'</span>, name[:])</div></pre></td></tr></table></figure></p>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> socket</div><div class="line"><span class="keyword">import</span> threading</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line">count = <span class="number">0</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">socketSendData</span><span class="params">()</span>:</span></div><div class="line">    client=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</div><div class="line">    client.connect((<span class="string">'www.baidu.com'</span>,<span class="number">80</span>))</div><div class="line">    time.sleep(<span class="number">1</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">20000</span>, <span class="number">1</span>):</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">       t = threading.Thread(target=socketSendData)</div><div class="line">       info = t.start()</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">       count += <span class="number">1</span></div><div class="line">       <span class="keyword">print</span> <span class="string">"Error: unable to start thread  "</span> + str(count)</div></pre></td></tr></table></figure>
<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><p>捕获异常<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>:</div><div class="line">   fh = open(<span class="string">"test"</span>, <span class="string">"w"</span>)</div><div class="line"><span class="keyword">except</span> IOError:</div><div class="line">   <span class="keyword">print</span> <span class="string">"Error: open error"</span></div><div class="line"><span class="keyword">else</span>:</div><div class="line">   <span class="keyword">print</span> <span class="string">"hava open file"</span></div><div class="line">   fh.close()</div></pre></td></tr></table></figure></p>
<p>抛出异常<code>raise [Exception [, args [, traceback]]]</code>例如<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(num &lt; <span class="number">100</span>):</div><div class="line">  <span class="keyword">raise</span> RuntimeError(<span class="string">"num is greater than 100!"</span>)</div></pre></td></tr></table></figure></p>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><h3 id="self"><a href="#self" class="headerlink" title="self"></a>self</h3><p>类的方法与普通的函数只有一个特别的区别——它们必须有一个额外的第一个参数名称<code>self</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<h3 id="创建一个类"><a href="#创建一个类" class="headerlink" title="创建一个类"></a>创建一个类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">p = Person()</div><div class="line"><span class="keyword">print</span> p</div></pre></td></tr></table></figure>
<h3 id="对象的方法"><a href="#对象的方法" class="headerlink" title="对象的方法"></a>对象的方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"run"</span>)</div><div class="line"></div><div class="line">p = Person()</div><div class="line">p.run()</div></pre></td></tr></table></figure>
<h4 id="init方法"><a href="#init方法" class="headerlink" title="init方法"></a><strong>init</strong>方法</h4><p><code>__init__</code>方法在类的一个对象被建立时，马上运行<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"run"</span>)</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"init"</span>)</div><div class="line"></div><div class="line">p = Person()</div><div class="line">p.run()</div></pre></td></tr></table></figure></p>
<h4 id="del方法"><a href="#del方法" class="headerlink" title="del方法"></a><strong>del</strong>方法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"init"</span>)</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"__destory__"</span>)</div><div class="line"></div><div class="line">p = Person()</div></pre></td></tr></table></figure>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><ul>
<li><p>类的变量: 由一个类的所有对象（实例）共享使用。只有一个类变量的拷贝，所以当某个对象对类的变量做了改动的时候，这个改动会反映到所有其他的实例上。</p>
</li>
<li><p>对象的变量: 由类的每个对象/实例拥有。因此每个对象有自己对这个域的一份拷贝，即它们不是共享的，在同一个类的不同实例中，虽然对象的变量有相同的名称，但是是互不相关的。通过一个例子会使这个易于理解。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>:</span></div><div class="line">    age = <span class="number">0</span></div><div class="line"></div><div class="line">father = Father()</div><div class="line">father.age = <span class="number">10</span></div><div class="line">Father.age = <span class="number">20</span></div><div class="line">print(father.age)</div><div class="line">print(Father.age)</div></pre></td></tr></table></figure>
<h4 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h4><p>对象的属性(变量和方法)如果名字以<code>__</code>开头则不能被外部访问,但是如果名称构成形式为<code>__xxx__</code>则被称为特殊属性,是可以被外界访问的.</p>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>:</span></div><div class="line">    name = <span class="string">"Tom"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"run"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span><span class="params">(Father)</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line">son = Son()</div><div class="line">print(son.name)</div><div class="line">son.run()</div></pre></td></tr></table></figure>
<h4 id="init-del-在继承中的使用"><a href="#init-del-在继承中的使用" class="headerlink" title="__init__, __del__在继承中的使用"></a><code>__init__</code>, <code>__del__</code>在继承中的使用</h4><p>Python不会自动调用父类的constructor<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mother</span>:</span></div><div class="line">    <span class="keyword">pass</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>:</span></div><div class="line">    name = <span class="string">"Tom"</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"run"</span>)</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Father init"</span>)</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Father del"</span>)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span><span class="params">(Father, Mother)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Son init"</span>)</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"Son del"</span>)</div><div class="line"></div><div class="line">son = Son()</div><div class="line">print(son.name)</div><div class="line">son.run()</div></pre></td></tr></table></figure></p>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><ul>
<li><code>capitalize(...)</code> : Python capitalize()将字符串的第一个字母变成大写,其他字母变小写。<code>print &quot;abc&quot;.capitalize()</code></li>
<li><code>center(...)</code> : 返回一个原字符串居中,并使用空格填充至长度 width 的新字符串。默认填充字符为空格。<code>print &quot;abc&quot;.center(10, &quot;1&quot;)</code>结果为<code>111abc1111</code></li>
<li><code>expandtabs(...)</code> : <code>S.expandtabs(tabsize=8) -&gt; str</code> 把字符串中的 tab 符号(‘\t’)转为空格，默认的空格数 tabsize 是 8。</li>
<li><code>format(...)</code> : <code>&quot;abcd{0}fg&quot;.format(&quot;sdf&quot;)</code> {0}被替换成sdf</li>
<li><code>join(...)</code> : <code>S.join(iterable) -&gt; str</code> 用于将序列中的元素以指定的字符连接生成一个新的字符串。</li>
<li><code>ljust(...)</code> : <code>S.ljust(width[, fillchar]) -&gt; str</code> 返回一个原字符串左对齐,并使用空格填充至指定长度的新字符串。如果指定的长度小于原字符串的长度则返回原字符串。</li>
<li><code>rjust(...)</code> : <code>S.rjust(width[, fillchar]) -&gt; str</code> 返回一个原字符串右对齐,并使用空格填充至长度 width 的新字符串。如果指定的长度小于字符串的长度则返回原字符串。</li>
<li><code>lower(...)</code> : <code>S.lower() -&gt; str</code> 转换字符串中所有大写字符为小写。</li>
<li><code>lstrip(...)</code> : <code>S.lstrip([chars]) -&gt; str</code> 用于截掉字符串左边的空格或指定字符。</li>
<li><code>replace(...)</code> : <code>S.replace(old, new[, count]) -&gt; str</code> 把字符串中的 old（旧字符串） 替换成 new(新字符串)，如果指定第三个参数max，则替换不超过 max 次。</li>
<li><code>split(...)</code> : <code>S.split(sep=None, maxsplit=-1) -&gt; list of strings</code> 通过指定分隔符对字符串进行切片，如果参数num 有指定值，则仅分隔 num 个子字符串. 另外参考<code>rsplit(...)</code></li>
<li><code>strip(...)</code> : <code>S.strip([chars]) -&gt; str</code> 用于移除字符串头尾指定的字符（默认为空格）。</li>
<li><code>rstrip(...)</code> : <code>S.rstrip([chars]) -&gt; str</code> 删除 string 字符串末尾的指定字符（默认为空格）.</li>
<li><code>swapcase(...)</code> : <code>S.swapcase() -&gt; str</code> 用于对字符串的大小写字母进行转换。</li>
<li><code>translate(...)</code> : <code>S.translate(table) -&gt; str</code> 根据参数table给出的表(包含 256 个字符)转换字符串的字符, 要过滤掉的字符放到 del 参数中。</li>
<li><code>upper(...)</code> : <code>S.upper() -&gt; str</code> 将字符串中的小写字母转为大写字母。</li>
<li><code>zfill(...)</code> : <code>S.zfill(width) -&gt; str</code> 返回指定长度的字符串，原字符串右对齐，前面填充0。</li>
<li><code>title(...)</code> : <code>S.title() -&gt; str</code> 返回”标题化”的字符串,就是说所有单词都是以大写开始，其余字母均为小写(见 istitle())。</li>
</ul>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><ul>
<li><code>count(...)</code> : 用于统计字符串里某个字符出现的次数。可选参数为在字符串搜索的开始与结束位置。<code>&quot;abcdefg&quot;.count(&quot;c&quot;, 2, 4)</code>结果为<code>1</code></li>
<li><code>find(...)</code> : <code>S.find(sub[, start[, end]]) -&gt; int</code> 检测字符串中是否包含子字符串 str ，如果指定 beg（开始） 和 end（结束） 范围，则检查是否包含在指定范围内，如果包含子字符串返回开始的索引值，否则返回-1。</li>
<li><code>rfind(...)</code> : <code>S.rfind(sub[, start[, end]]) -&gt; int</code> 返回字符串最后一次出现的位置，如果没有匹配项则返回-1。</li>
<li><code>endswith(...)</code> : 用于判断字符串是否以指定后缀结尾，如果以指定后缀结尾返回True，否则返回False。可选参数”start”与”end”为检索字符串的开始与结束位置。<code>&quot;abcdefg&quot;.endswith(&quot;d&quot;, 2, 4)</code>结果为true</li>
<li><code>index(...)</code> : <code>S.index(sub[, start[, end]]) -&gt; int</code>检测字符串中是否包含子字符串 str ，如果指定 beg（开始） 和 end（结束） 范围，则检查是否包含在指定范围内，该方法与 python find()方法一样，只不过如果str不在 string中会报一个异常。</li>
<li><code>rindex(...)</code> : <code>S.rindex(sub[, start[, end]]) -&gt; int</code> 返回子字符串 str 在字符串中最后出现的位置，如果没有匹配的字符串会报异常，你可以指定可选参数[beg:end]设置查找的区间。</li>
<li><code>partition(...)</code> : <code>S.partition(sep) -&gt; (head, sep, tail)</code> Search for the separator sep in S, and return the part before it,the separator itself, and the part after it.  If the separator is not found, return S and two empty strings.</li>
<li><code>rpartition(...)</code> : <code>S.rpartition(sep) -&gt; (head, sep, tail)</code> 类似于 partition()函数,不过是从右边开始查找.</li>
<li><code>startswith(...)</code> : <code>S.startswith(prefix[, start[, end]]) -&gt; bool</code> 用于检查字符串是否是以指定子字符串开头，如果是则返回 True，否则返回 False。如果参数 beg 和 end 指定值，则在指定范围内检查。</li>
</ul>
<h3 id="检测"><a href="#检测" class="headerlink" title="检测"></a>检测</h3><ul>
<li><code>isalnum(...)</code> : <code>S.isalnum() -&gt; bool</code> 判断字符串是否包含字母数字。</li>
<li><code>isalpha(...)</code> : <code>S.isalpha() -&gt; bool</code> 检测字符串是否只由字母组成。</li>
<li><code>isdecimal(...)</code> : <code>S.isdecimal() -&gt; bool</code> 检查字符串是否只包含十进制字符。这种方法只存在于unicode对象。</li>
<li><code>isdigit(...)</code> : <code>S.isdigit() -&gt; bool</code> 检测字符串是否只由数字组成。</li>
<li><code>islower(...)</code> : <code>S.islower() -&gt; bool</code> 检测字符串是否由小写字母组成。</li>
<li><code>isnumeric(...)</code> : <code>S.isnumeric() -&gt; bool</code> 检查是否只有数字字符组成的字符串。这种方法目前只对unicode对象。</li>
<li><code>isspace(...)</code> : <code>S.isspace() -&gt; bool</code> 是否只由空格组成。</li>
<li><code>istitle(...)</code> : <code>S.istitle() -&gt; bool</code> 检测字符串中所有的单词拼写首字母是否为大写，且其他字母为小写。</li>
<li><code>isupper(...)</code> : <code>S.isupper() -&gt; bool</code> 检测字符串中所有的字母是否都为大写。</li>
</ul>
<h3 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h3><ul>
<li><code>encode(...)</code> : encoding 指定的编码格式编码字符串。errors参数可以指定不同的错误处理方案。<code>S.encode(encoding=&#39;utf-8&#39;, errors=&#39;strict&#39;) -&gt; bytes</code> </li>
</ul>
<h3 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h3><ul>
<li><code>splitlines(...)</code> : <code>S.splitlines([keepends]) -&gt; list of strings</code> 返回一个字符串的所有行，可选包括换行符列表(如果num提供，则为true)</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/06/编程语言/python2 基础语法/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/06/编程语言/python2 基础语法/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/07/13/zookeeper/ZooKeeper 原理/" title="ZooKeeper 原理" itemprop="url">ZooKeeper 原理</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-07-13T07:00:00.000Z" itemprop="datePublished"> Published 2015-07-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><p>Zookeeper 会维护一个类似于标准的文件系统的数据结构<br><img src="https://raw.githubusercontent.com/ming15/blog-website/images/zookeeper/data-node-tree.jpg" alt=""></p>
<h2 id="节点类型"><a href="#节点类型" class="headerlink" title="节点类型"></a>节点类型</h2><ul>
<li>PERSISTENT：持久化目录节点，这个目录节点存储的数据不会丢失；</li>
<li>PERSISTENT_SEQUENTIAL：顺序自动编号的目录节点，这种目录节点会根据当前已近存在的节点数自动加 1，然后返回给客户端已经成功创建的目录节点名；</li>
<li>EPHEMERAL：临时目录节点，一旦创建这个节点的客户端与服务器端口也就是 session 超时，这种节点会被自动删除；</li>
<li>EPHEMERAL_SEQUENTIAL：临时自动编号节点</li>
</ul>
<h2 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h2><p>ZK中有如下三种角色</p>
<ul>
<li>Leader：领导者，负责投票的发起和决议，以及更新系统状态</li>
<li>Follower：接受客户端的请求并返回结果给客户端，并参与投票</li>
<li>Observer：接受客户端的请求，将写的请求转发给leader，不参与投票。Observer目的是扩展系统，提高读的速度。</li>
</ul>
<h2 id="选举"><a href="#选举" class="headerlink" title="选举"></a>选举</h2><p><img src="https://raw.githubusercontent.com/ming15/blog-website/images/zookeeper/40280796_2.jpg" alt=""></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ZooKeeper/">ZooKeeper</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/07/13/zookeeper/ZooKeeper 原理/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/07/13/zookeeper/ZooKeeper 原理/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/杂记/docker命令/" title="docker命令" itemprop="url">docker命令</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-06-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Docker命令"><a href="#Docker命令" class="headerlink" title="Docker命令"></a>Docker命令</h2><h3 id="service-docker-start"><a href="#service-docker-start" class="headerlink" title="service docker start"></a><code>service docker start</code></h3><p>安装之后启动 Docker 服务.</p>
<h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a><code>docker pull</code></h3><p>命令来从仓库获取所需要的镜像<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker pull ubuntu12.04</div></pre></td></tr></table></figure></p>
<h3 id="docker-push"><a href="#docker-push" class="headerlink" title="docker push"></a><code>docker push</code></h3><p>把自己创建的镜像上传到仓库中来共享<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker push ouruser/sinatra</div></pre></td></tr></table></figure></p>
<h3 id="docker-images"><a href="#docker-images" class="headerlink" title="docker images"></a><code>docker images</code></h3><p>显示本地已有的镜像.</p>
<h3 id="docker-commit"><a href="#docker-commit" class="headerlink" title="docker commit"></a><code>docker commit</code></h3><p>使用 docker commit 命令来提交更新后的副本. 这个命令是用来将容器的改变提交到镜像身上.如果目标镜像不存在就创建一个.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker commit -m <span class="string">"Added json gem"</span> -a <span class="string">"Docker Newbee"</span> <span class="number">0</span>b2616b0e5a8 ouruser/sinatrav2</div></pre></td></tr></table></figure></p>
<ul>
<li><code>-m</code> : 来指定提交的说明信息，跟我们使用的版本控制工具一样；</li>
<li><code>-a</code> : 可以指定更新的用户信息；</li>
<li><code>0b2616b0e5a8</code> : 用来创建镜像的容器的 ID；</li>
<li><code>ouruser/sinatrav2</code> : 指定目标镜像的仓库名和 tag 信息。</li>
</ul>
<h3 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a><code>docker build</code></h3><p>使用 docker build 来创建一个新的镜像.为此,首先需要创建一个 Dockerfile,包含一些如何创建镜像的指令.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker build -t=<span class="string">"ouruser/sinatrav2"</span></div></pre></td></tr></table></figure></p>
<ul>
<li>-t 标记来添加 tag,指定新的镜像的用户信息</li>
</ul>
<h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a><code>docker tag</code></h3><p>命令来修改镜像的标签.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker tag <span class="number">5</span>db5f8471261 ouruser/sinatradevel</div></pre></td></tr></table></figure></p>
<h3 id="docker-import"><a href="#docker-import" class="headerlink" title="docker import"></a><code>docker import</code></h3><p>从本地文件系统导入一个镜像,可以使用 openvz(容器虚拟化的先锋技术)的模板来创建 openvz 的模板下载地址为 templates .比如,先下载了一个 ubuntu-14.04 的镜像,之后使用以下命令导入<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat ubuntu-<span class="number">14.04</span>-x86_64-minimal.tar.gz  |docker <span class="keyword">import</span> - ubuntu14.04</div></pre></td></tr></table></figure></p>
<h3 id="docker-save"><a href="#docker-save" class="headerlink" title="docker save"></a><code>docker save</code></h3><p>导出镜像到本地文件<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker save -o ubuntu_14.04.tar ubuntu14.04</div></pre></td></tr></table></figure></p>
<h3 id="docker-load"><a href="#docker-load" class="headerlink" title="docker load"></a><code>docker load</code></h3><p>从导出的本地文件中再导入到本地镜像库<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">docker load --input ubuntu_14.04.tar</div><div class="line">docker load &lt; ubuntu_14.04.tar</div></pre></td></tr></table></figure></p>
<h3 id="docker-rmi"><a href="#docker-rmi" class="headerlink" title="docker rmi"></a><code>docker rmi</code></h3><p>移除本地的镜像. 注意在删除镜像之前要先用 docker rm 删掉依赖于这个镜像的所有容器.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker rmi training/sinatra</div></pre></td></tr></table></figure></p>
<h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a><code>docker run</code></h3><p>基于镜像新建一个容器并启动<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker run ubuntu14.04</div><div class="line"></div><div class="line">docker run -t -i ubuntu14.04 /bin/bash</div></pre></td></tr></table></figure></p>
<ul>
<li>-t 选项让Docker分配一个伪终端(pseudo-tty)并绑定到容器的标准输入上</li>
<li>-i 则让容器的标准输入保持打开.</li>
<li>-d 让 Docker 容器在后台以守护态(Daemonized)形式运行</li>
<li>-P 端口映射.当使用 -P 标记时，Docker 会随机映射一个 49000~49900 的端口到内部容器开放的网络端口。</li>
</ul>
<blockquote>
<p>-p（小写的）则可以指定要映射的端口，并且，在一个指定端口上只可以绑定一个容器。支持的格式有 <code>ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort</code>   在<code>--net=host</code>模式下，可以时容器内的端口自动映射到宿主主机上</p>
</blockquote>
<p>映射所有接口地址： 使用 <code>hostPort:containerPort</code> 格式本地的 <code>5000</code> 端口映射到容器的 <code>5000</code> 端口，可以执行<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo docker run -d -p <span class="number">5000</span>:<span class="number">5000</span> training/webapp python app.py</div></pre></td></tr></table></figure></p>
<p>此时默认会绑定本地所有接口上的所有地址。 映射到指定地址的指定端口</p>
<p>可以使用 <code>ip:hostPort:containerPort</code> 格式指定映射使用一个特定地址，比如 <code>localhost</code> 地址 <code>127.0.0.1</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo docker run -d -p <span class="number">127.0</span>.0.1:<span class="number">5000</span>:<span class="number">5000</span> training/webapp python app.py</div></pre></td></tr></table></figure></p>
<p>映射到指定地址的任意端口。 使用 <code>ip::containerPort</code> 绑定 <code>localhost</code> 的任意端口到容器的 <code>5000</code> 端口，本地主机会自动分配一个端口。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo docker run -d -p <span class="number">127.0</span>.0.1::<span class="number">5000</span> training/webapp python app.py</div></pre></td></tr></table></figure></p>
<h3 id="docker-start"><a href="#docker-start" class="headerlink" title="docker start"></a><code>docker start</code></h3><p>直接将一个已经终止的容器启动运行</p>
<h3 id="docker-stop"><a href="#docker-stop" class="headerlink" title="docker stop"></a><code>docker stop</code></h3><p>终止一个运行中的容器.</p>
<h3 id="docker-restart"><a href="#docker-restart" class="headerlink" title="docker restart"></a><code>docker restart</code></h3><p>将一个运行态的容器终止,然后再重新启动它.</p>
<h3 id="docker-attach"><a href="#docker-attach" class="headerlink" title="docker attach"></a><code>docker attach</code></h3><p>进入容器</p>
<h3 id="docker-export"><a href="#docker-export" class="headerlink" title="docker export"></a><code>docker export</code></h3><p>导出本地某个容器<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker export <span class="number">7691</span>a814370e &gt; ubuntu.tar</div></pre></td></tr></table></figure></p>
<h3 id="docker-import-1"><a href="#docker-import-1" class="headerlink" title="docker import"></a><code>docker import</code></h3><p>从容器快照文件中再导入为镜像<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cat ubuntu.tar | sudo docker <span class="keyword">import</span> - test/buntuv1.0</div><div class="line"></div><div class="line">docker <span class="keyword">import</span> http<span class="comment">//example.com/exampleimage.tgz example/imagerepo</span></div></pre></td></tr></table></figure></p>
<h3 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a><code>docker rm</code></h3><p>移除容器.删除一个处于终止状态的容器<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker rm  trusting_newton</div></pre></td></tr></table></figure></p>
<h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a><code>docker search</code></h3><p>查找官方仓库中的镜像</p>
<h3 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a><code>docker ps</code></h3><h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a><code>docker logs</code></h3><p>获取容器的输出信息<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker logs insane_babbage</div></pre></td></tr></table></figure></p>
<h3 id="docker-port"><a href="#docker-port" class="headerlink" title="docker port"></a><code>docker port</code></h3><p>查看当前映射的端口配置，也可以查看到绑定的地址<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker port nostalgic_morse <span class="number">5000</span></div></pre></td></tr></table></figure></p>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p>Dockerfile中每一条指令都创建镜像的一层,例如<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># This is a comment</div><div class="line">FROM ubuntu14.04</div><div class="line">MAINTAINER Docker Newbee &lt;newbee@docker.com&gt;</div><div class="line">RUN apt-get -qq update</div><div class="line">RUN apt-get -qqy install ruby ruby-dev</div><div class="line">RUN gem install sinatra</div><div class="line">Dockerfile 基本的语法是</div></pre></td></tr></table></figure></p>
<ol>
<li>使用<code>#</code>来注释</li>
<li><code>FROM</code> 指令告诉 <code>Docker</code> 使用哪个镜像作为基础</li>
<li>接着是维护者的信息</li>
<li><code>RUN</code>开头的指令会在创建中运行,比如安装一个软件包,在这里使用 <code>apt-get</code> 来安装了一些软件</li>
<li><code>ADD</code> 命令复制本地文件到镜像;</li>
<li><code>EXPOSE</code> 命令来向外部开放端口;</li>
<li><code>CMD</code> 命令来描述容器启动后运行的程序等</li>
</ol>
<p>当利用 <code>docker run</code> 来创建容器时,<code>Docker</code> 在后台运行的标准操作包括</p>
<ol>
<li>检查本地是否存在指定的镜像,不存在就从公有仓库下载</li>
<li>利用镜像创建并启动一个容器</li>
<li>分配一个文件系统,并在只读的镜像层外面挂载一层可读写层</li>
<li>从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去</li>
<li>从地址池配置一个 ip 地址给容器</li>
<li>执行用户指定的应用程序</li>
<li>执行完毕后容器被终止</li>
</ol>
<p><code>docker load</code> vs <code>docker import</code> 用户既可以使用 <code>docker load</code> 来导入镜像存储文件到本地镜像库,也可以使用 <code>docker import</code>来导入一个容器快照到本地镜像库.这两者的区别在于容器快照文件将丢弃所有的历史记录和元数据信息(即仅保存容器当时的快照状态),而镜像存储文件将保存完整记录,体积也要大.此外,从容器快照文件导入时可以重新指定标签等元数据信息.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂记/">杂记</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/杂记/docker命令/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/杂记/docker命令/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/JavaSE/Java equals hashcode/" title="Java equals和hashcode" itemprop="url">Java equals和hashcode</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-06-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Effective Java学习总结</p>
<h2 id="euqals"><a href="#euqals" class="headerlink" title="euqals"></a>euqals</h2><p>如果类不具有自己的逻辑相等概念，那么就没有必要自己去覆盖<code>euqals()</code>方法. 在这种情况下,每个类的实例都和自身相等.</p>
<p>但是如果程序里也关心逻辑上是否是相等,那么在实现<code>equals()</code>时就要考虑它的通用约定：</p>
<ul>
<li>自反性: 对于任何非null的引用值x,<code>x.equals(x)</code>必须返回true. 这一点保证的是对象的自身必须等于其自身.</li>
<li>对称性: 对于任何非null的引用值x和y,当且仅当<code>y.equals(x)</code>返回true时,<code>x.equals(y)</code>必须返回true.</li>
<li>传递性: 对于任何非null的引用值x，y和z,如果<code>y.equals(x)</code>返回true且<code>y.equals(z)</code>返回true,则<code>z.equals(x)</code>也必须返回true</li>
<li>一致性: 对于任何非null的引用值x和y,只要equals的比较操作在对象中的信息没有被修改,多次调用<code>x.equals(y)</code>则一致地返回true或者返回false. 这也就是说如果俩个对象相等,那么他们就应该始终保持着相等.</li>
<li>非空性: 对于任何非null的引用值,<code>x.euqals(null)</code>都必须返回false</li>
</ul>
<p>下面依次是违反上面几个特性的例子：</p>
<p>违反自反性:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> !<span class="keyword">super</span>.equals(obj);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>违反对称性<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String str1[])</span> </span>&#123;</div><div class="line"></div><div class="line">	N n1 = <span class="keyword">new</span> N();</div><div class="line">	n1.id = <span class="number">123</span>;</div><div class="line">	Integer id = <span class="number">123</span>;</div><div class="line">	System.out.println(n1.equals(id));</div><div class="line">	System.out.println(id.equals(n1));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">N</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> Integer id;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Integer) &#123;</div><div class="line">			<span class="keyword">return</span> obj.equals(id);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.equals(obj);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>违反传递性<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>违反一致性<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String str1[])</span> </span>&#123;</div><div class="line">		N n1 = <span class="keyword">new</span> N();</div><div class="line">		n1.id = <span class="number">123</span>;</div><div class="line">		N n2 = <span class="keyword">new</span> N();</div><div class="line">		n2.id = <span class="number">123</span>;</div><div class="line">		System.out.println(n1.equals(n2));</div><div class="line">		n2.id = <span class="number">12</span>;</div><div class="line">		System.out.println(n1.equals(n2));</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">N</span></span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span> id;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> N)) &#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">return</span> ((N) obj).id == id;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>违反非空性： 这个一般我们不会犯错，因为我们一般都有下面这样的语法,当obj为null时,就会自动返回false<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (obj <span class="keyword">instanceof</span> N) &#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>一般在实现equals方法时,我们要做到以下几点<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">N</span></span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">int</span> id;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">		<span class="comment">// 检查参数是否是这个对象的引用,当equals操作代价昂贵时,这么做会达到性能的提升</span></div><div class="line">		<span class="keyword">if</span> (obj == <span class="keyword">this</span>) &#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 检查是否是正确的类型</span></div><div class="line">		<span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> N)) &#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="comment">// 把参数转换为正确的类型</span></div><div class="line">		N target = (N)obj;</div><div class="line"></div><div class="line">		<span class="comment">// 对于该类中的每个关键域都对其进行匹配</span></div><div class="line">		<span class="keyword">return</span> target.id == id;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>对于对每个关键域进行判断的时候,除了<code>float</code>和<code>double</code>都可使用<code>==</code>进行判断</p>
<ul>
<li>float采用<code>Float.compare()</code>进行判断</li>
<li>double采用<code>Double.compare()</code>进行判断<br>如果是数组可以使用<code>Arrays.equals()</code>进行判断.</li>
</ul>
<p>当equals完成了上述之后,还要对其进行对称性,传递性,一致性进行单元测试.</p>
<h2 id="hashCode"><a href="#hashCode" class="headerlink" title="hashCode"></a>hashCode</h2><p>当覆盖<code>equals()</code>时总要覆盖<code>hashCode()</code>.</p>
<p>对于hashCode的通俗约定：</p>
<ul>
<li>在运行期,如果对象的<code>equals()</code>方法的用到的关键域没有被修改，那么多次调用对象的hashCode方法每次必须都返回同一个整数。</li>
<li>如果俩个对象调用<code>equals()</code>方法比较是相等的,那么调用这俩个对象的<code>hashCode()</code>方法,它们返回的整数也必须相等</li>
<li>如果俩个对象调用<code>equals()</code>方法比较是不相等的,那么调用这俩个对象的<code>hashCode()</code>方法,它们返回的整数也可能是相等的.</li>
</ul>
<p>下面给出了一个计算散列值的一个规则：<br>将<code>equals()</code>方法中涉及到的每个关键域<code>f</code>进行如下计算,然后得出一个散列值c：</p>
<ul>
<li>如果域是<code>boolean</code>，则计算<code>f ? 1 : 0</code></li>
<li>如果域是<code>byte,char,short,int</code>，则计算<code>(int)f</code></li>
<li>如果域是<code>long</code>，则计算<code>(int)(f^(f&gt;&gt;32))</code></li>
<li>如果域是<code>float</code>，则计算<code>Float.floatToIntBits(f)</code></li>
<li>如果域是<code>double</code>，则计算<code>Double.doubleToLongBits(f)</code>,接着调用long类型的计算</li>
<li>如果域是引用类型，则按照<code>equals()</code>递归方式,依次递归调用<code>hashCode()</code>,如果引用是个<code>null</code>,则返回0<br>计算完每个关键域的散列值之后,依次进行如下计算<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> result = <span class="number">17</span>;</div><div class="line">result = <span class="number">31</span> * result + c;</div></pre></td></tr></table></figure>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java/">Java</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/JavaSE/Java equals hashcode/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/JavaSE/Java equals hashcode/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/JavaLibrary/读取csv文件/" title="读取csv文件" itemprop="url">读取csv文件</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-06-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>利用Apache Commons CSV读取csv文件, 首先我们添加如下依赖<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-csv<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>读取csv文件<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Reader in = <span class="keyword">new</span> FileReader(<span class="string">"path/to/file.csv"</span>);</div><div class="line">Iterable&lt;CSVRecord&gt; records = CSVFormat.EXCEL.parse(in);</div><div class="line"><span class="keyword">for</span> (CSVRecord record : records) &#123;</div><div class="line">    String lastName = record.get(<span class="string">"Last Name"</span>);</div><div class="line">    String firstName = record.get(<span class="string">"First Name"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java-Library/">Java Library</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/JavaLibrary/读取csv文件/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/JavaLibrary/读取csv文件/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/JavaSE/Java 泛型/" title="java泛型" itemprop="url">java泛型</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-06-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>泛型（Generic type 或者 generics）是对 Java 语言的类型系统的一种扩展，以支持创建可以按类型进行参数化的类.</p>
<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><p>我们定义一个简单的泛型类, <code>T</code>称为泛型参数, <code>G</code>被称为泛型化了<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>接着我们在内部定义一个泛型变量<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;T&gt; &#123;</span></div><div class="line">	T t;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后我们再添加一个泛型方法泛型方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">	T t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>下来我们来使用一下这个泛型类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">G&lt;String&gt; g = <span class="keyword">new</span> G&lt;&gt;();</div><div class="line">g.setValue(<span class="string">"value"</span>);</div></pre></td></tr></table></figure></p>
<h3 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h3><p>在一个非泛化的类中我们也可以直接定义泛化的方法</p>
<h3 id="类型擦除"><a href="#类型擦除" class="headerlink" title="类型擦除"></a>类型擦除</h3><p>说到java中的泛型就不得不提泛型参数的类型擦除. 当java源码文件被编译成class文件的时候,编译器会将泛型中的类型参数擦除掉(其实class文件中还是会保留部分的泛型信息, 具体参考java虚拟机规范).</p>
<p>类定义的泛型参数<code>T</code>会被替换成具体类型, 一般为Object. 而<code>&lt;T&gt;</code>信息则会被擦除掉, 例如G就会替换成<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span> </span>&#123;</div><div class="line">	Object t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而在引用该类型的时候则会擦除成<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">G g = <span class="keyword">new</span> G();</div><div class="line">g.setValue(<span class="string">"value"</span>);</div></pre></td></tr></table></figure></p>
<p>因此，java里的泛型类型安全是由编译器保证的, 在运行期是无法保证类型的安全的.</p>
<h3 id="泛型类的继承关系"><a href="#泛型类的继承关系" class="headerlink" title="泛型类的继承关系"></a>泛型类的继承关系</h3><p>如果类被泛型化之后, 会对类本身的继承关系造成影响<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</div><div class="line"></div><div class="line">		G&lt;SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</div><div class="line">		g.setValue(superParam);</div><div class="line"></div><div class="line">		SubG1 subG1 = <span class="keyword">new</span> SubG1();</div><div class="line">		subG1.setValue(<span class="number">1</span>);</div><div class="line">		subG1.printValue(<span class="string">"SubG1 printValue"</span>);</div><div class="line">		subG1.print();</div><div class="line"></div><div class="line">		SubG2 subG2 = <span class="keyword">new</span> SubG2();</div><div class="line">		subG2.setValue(<span class="string">"SubG2 setValue"</span>);</div><div class="line">		subG2.printValue(<span class="string">"SubG2 printValue"</span>);</div><div class="line">		subG2.print();</div><div class="line"></div><div class="line">		SubG3&lt;Integer&gt; subG3 = <span class="keyword">new</span> SubG3&lt;&gt;();</div><div class="line">		subG3.setValue(<span class="string">"SubG3 setValue"</span>);</div><div class="line">		subG3.printValue(<span class="string">"SubG3 printValue"</span>);</div><div class="line">		subG3.print(<span class="number">3</span>);</div><div class="line"></div><div class="line">		SubG4&lt;Integer&gt; subG4 = <span class="keyword">new</span> SubG4();</div><div class="line">		subG4.setValue(<span class="string">"SubG4 setValue"</span>);</div><div class="line">		subG4.printValue(<span class="string">"SubG4 printValue"</span>);</div><div class="line">		subG4.print(<span class="number">4</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">	T t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		System.out.println(t);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> t;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// SubG1继承了G的泛型参数. 但是SubG1本身是没有泛化的</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG1</span> <span class="keyword">extends</span> <span class="title">G</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(t);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 强制指定继承过来的T的类型为String</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG2</span> <span class="keyword">extends</span> <span class="title">G</span>&lt;<span class="title">String</span>&gt; </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"Super:"</span> + t);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// G的类型由继承过来的方法指定, SubG3则再次由本类自己指定类型</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG3</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">G</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t1)</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"Super:"</span> + t + <span class="string">". this:"</span> + t1);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 指定G的类型为String, SubG4则仍然由本类进行泛型化</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubG4</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">G</span>&lt;<span class="title">String</span>&gt; </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(T t1)</span> </span>&#123;</div><div class="line">		System.out.println(<span class="string">"Super:"</span> + t + <span class="string">". this:"</span> + t1);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"SuperParam"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>结果为<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">SubG1 printValue</div><div class="line"><span class="number">1</span></div><div class="line">SubG2 printValue</div><div class="line">Super:SubG2 setValue</div><div class="line">SubG3 printValue</div><div class="line">Super:SubG3 setValue. <span class="keyword">this</span>:<span class="number">3</span></div><div class="line">SubG4 printValue</div><div class="line">Super:SubG4 setValue. <span class="keyword">this</span>:<span class="number">4</span></div></pre></td></tr></table></figure></p>
<p>需要特别指出的是, 在<code>SubG1</code>对象分别调用<code>setValue()</code>和<code>printValue()</code>方法时分别使用了<code>Integer</code>和<code>String</code>俩个类型, 但是却没有产生任何异常信息.</p>
<h3 id="泛型参数的继承关系"><a href="#泛型参数的继承关系" class="headerlink" title="泛型参数的继承关系"></a>泛型参数的继承关系</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</div><div class="line">		Param param = <span class="keyword">new</span> Param();</div><div class="line"></div><div class="line">		G&lt;SuperParam&gt; gSuperParam = <span class="keyword">new</span> G&lt;&gt;();</div><div class="line">		gSuperParam.setValue(superParam);</div><div class="line">		gSuperParam.setValue(param);</div><div class="line">		SuperParam t = gSuperParam.getT();</div><div class="line"></div><div class="line">		G&lt;Param&gt; gParam = <span class="keyword">new</span> G&lt;&gt;();</div><div class="line">		gParam.setValue(param);</div><div class="line">		gParam.setValue(superParam);	<span class="comment">// compile error</span></div><div class="line"></div><div class="line">		SubParam subParam = <span class="keyword">new</span> SubParam();</div><div class="line">		gParam.setValue(subParam);</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">	T t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> t;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubParam</span> <span class="keyword">extends</span> <span class="title">Param</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<p>从这一行<code>gParam.setValue(subParam);</code>我们可以看到类型参数的继承结构和普通类型的继承结构的规则是一样的.</p>
<h3 id="泛化在方法中的应用"><a href="#泛化在方法中的应用" class="headerlink" title="泛化在方法中的应用"></a>泛化在方法中的应用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">		print(<span class="keyword">new</span> G&lt;&gt;());</div><div class="line">		print(<span class="keyword">new</span> G&lt;SuperParam&gt;());		<span class="comment">// compile Error</span></div><div class="line">		print(<span class="keyword">new</span> SubG1());</div><div class="line">		print(<span class="keyword">new</span> SubG2());</div><div class="line">		print(<span class="keyword">new</span> SubG3());</div><div class="line">		print(<span class="keyword">new</span> SubG3&lt;SuperParam&gt;());</div><div class="line">		print(<span class="keyword">new</span> SubG4());</div><div class="line">		print(<span class="keyword">new</span> SubG4&lt;SuperParam&gt;());</div><div class="line"></div><div class="line">		printSuperParam(<span class="keyword">new</span> G&lt;&gt;());</div><div class="line">		printSuperParam(<span class="keyword">new</span> G&lt;SuperParam&gt;());</div><div class="line">		printSuperParam(<span class="keyword">new</span> G&lt;Param&gt;());		<span class="comment">// compile Error</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(G&lt;String&gt; gs)</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printSuperParam</span><span class="params">(G&lt;SuperParam&gt; gs)</span> </span>&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>从上面的例子中我们可以看出, 泛化的类的泛型参数并没有对其类型判断造成影响, 子类化的参数仍然是编译通过的. 但是类型参数的继承再传递到方法时, 却被认为不是相同的类型.</p>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p><code>?</code>在泛型参数中作为通配符存在, 它一般和<code>extends</code>和<code>super</code>关键字一起使用. 它表示不确定的一组类型, 例如和<code>extends</code>关键字一起使用就是表示继承自某个类的所有类型</p>
<h3 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h3><p><code>extends</code>关键字是用来定义泛型参数的继承关系. 它表示我们的泛型参数继承自某个类型, 也被我们称为上界符.</p>
<p>我们修改一下G的类型定义,我们引入<code>extends</code>关键字<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</div><div class="line"></div><div class="line">		G&lt;SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</div><div class="line">		g.setValue(superParam);</div><div class="line"></div><div class="line">		SubG1 subG1 = <span class="keyword">new</span> SubG1();</div><div class="line">		subG1.setValue(<span class="number">1</span>);</div><div class="line">		subG1.printValue(<span class="string">"SubG1 printValue"</span>);</div><div class="line">		subG1.print();</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">SuperParam</span>&gt; </span>&#123;</div><div class="line">	T t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		System.out.println(t);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> t;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当使用<code>extends</code>关键字之后, 我们就将这个类的泛化信息固定了下来, 在实例化的时候, 其类型参数必须是继承自某类的子类型</p>
<p>如果我们在实例化的时候指定<code>extends</code>会发生什么呢?<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</div><div class="line"></div><div class="line">		G&lt;? extends SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</div><div class="line">		g.setValue(superParam);		<span class="comment">// compile error</span></div><div class="line">		g.setValue(<span class="keyword">new</span> Param());		<span class="comment">// compile error</span></div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">	T t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param1</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<p>不推荐这种用法, 因为这种情况下如果我们可以对其使用<code>Param</code>或者<code>Param1</code>的类型, 那么这就和不使用泛型是一样的, 会引起类型转化异常.</p>
<p>但是我们却可以在另外一种情况下使用这个关键字<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		SuperParam superParam = <span class="keyword">new</span> SuperParam();</div><div class="line"></div><div class="line">		print(<span class="keyword">new</span> G&lt;&gt;());	<span class="comment">// 默认的是SuperParam类型</span></div><div class="line">		print(<span class="keyword">new</span> G&lt;Param&gt;());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(G&lt;? extends SuperParam&gt; g)</span> </span>&#123;</div><div class="line">		SuperParam t = g.getT();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">	T t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> t;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>
<h3 id="super"><a href="#super" class="headerlink" title="super"></a>super</h3><p><code>super</code>作为一种下界符存在. 也就在具体使用时的参数都必须是泛型参数的父类才行.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">G&lt;? <span class="keyword">super</span> SuperParam&gt; g = <span class="keyword">new</span> G&lt;&gt;();</div><div class="line">g.setValue(<span class="keyword">new</span> SuperParam());</div><div class="line">g.setValue(<span class="keyword">new</span> Param());</div></pre></td></tr></table></figure></p>
<p>同样我们可以在方法中如此使用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		print(<span class="keyword">new</span> G&lt;SuperParam&gt;());</div><div class="line">		print(<span class="keyword">new</span> G&lt;&gt;());	<span class="comment">// 默认是Param</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(G&lt;? <span class="keyword">super</span> Param&gt; g)</span> </span>&#123;</div><div class="line">		Object t = g.getT();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line">	T t;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T t)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.t = t;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getT</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> t;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Param</span> <span class="keyword">extends</span> <span class="title">SuperParam</span> </span>&#123;&#125;</div></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java/">Java</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/JavaSE/Java 泛型/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/JavaSE/Java 泛型/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/08/杂记/windows rust/" title="在windows上搭建rust开发环境" itemprop="url">在windows上搭建rust开发环境</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-06-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-06-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>在windows上搭建rust开发环境</p>
<ol>
<li>安装<a href="http://sourceforge.net/projects/msys2/" target="_blank" rel="external">msys2</a> (我的电脑是64位的,所以以下操作都是以64位为主)</li>
<li>在<code>msys2</code>中安装<code>openssl</code> -&gt; <code>pacman -S mingw-w64-x86_64-openssl</code> (32位<code>pacman -S mingw-w64-i686-openssl</code>)</li>
<li>将<code>C:\msys64\mingw64\bin</code>添加到环境变量<code>Path</code>中</li>
<li>将<code>C:\msys64\mingw64\lib</code>下的<code>libcrypto.dll.a</code>复制一份,将新文件命名为<code>libeay32.a</code></li>
<li>将<code>C:\msys64\mingw64\lib</code>下的<code>libssl.dll.a</code>复制一份,将新文件命名为<code>libssl32.a</code></li>
<li>下载安装<a href="http://www.rust-lang.org/" target="_blank" rel="external">rust</a></li>
<li>将<code>Rust stable 1.0\bin\rustlib\x86_64-pc-windows-gnu\bin</code>这个<code>bin</code>改成其他的名字(随便什么名字,不让Path找到就好了)</li>
<li>现在rust程序就可以正常运行了</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂记/">杂记</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/08/杂记/windows rust/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/08/杂记/windows rust/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/06/07/JavaLibrary/Maven/" title="Maven 随笔" itemprop="url">Maven 随笔</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-06-07T07:00:00.000Z" itemprop="datePublished"> Published 2015-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="版本管理"><a href="#版本管理" class="headerlink" title="版本管理"></a>版本管理</h2><p>自动化版本发布基于正确的版本号. 一般我们的版本号构成为<code>主要版本号.次要版本号.增量版本号-里程碑版本号</code>. 下面是pom文件中插件设置：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-release-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 如果项目结构不是采用标准的SVN布局(平行的trunk/tags/branches),则需要配置下面俩项 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">tagBase</span>&gt;</span>https://svn.mycompany.com/repos/myapplication/tags<span class="tag">&lt;/<span class="name">tagBase</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">branchBase</span>&gt;</span>https://svn.mycompany.com/repos/myapplication/branchs<span class="tag">&lt;/<span class="name">branchBase</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>下来我们在命令行执行命令：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn release:clean</div></pre></td></tr></table></figure></p>
<p>先执行清除操作,然后执行下列命令准备版本发布：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn release:prepare</div></pre></td></tr></table></figure></p>
<p>该命令包含下列操作：</p>
<ul>
<li>检查项目是否有未提交代码</li>
<li>检查项目是否有快照版本依赖</li>
<li>根据用户的输入将快照版本升级为发布版</li>
<li>将POM中的SCM信息更新为TAG地址</li>
<li>基于修改后的POM执行MAVEN构建</li>
<li>提交POM变更</li>
<li>基于用户的输入将代码打TAG</li>
<li>将代码从发布版升级为新的快照版</li>
<li>提交POM变更</li>
</ul>
<p>当前俩项检查ok之后,插件会提示用户输出想要发布的版本号,TAG名称和新的快照版本号</p>
<p>我们还可以执行回滚:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn release:rollback</div></pre></td></tr></table></figure></p>
<p>回滚<code>release:prepare</code>所执行的操作. 但是需要注意的是在<code>release:prepare</code>步骤中打出的TAG并不会被删除,需要手动删除.</p>
<p>接下来就可以执行版本发布了：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn release:perform</div></pre></td></tr></table></figure></p>
<p>它会检出<code>release:prepare</code>生成的TAG源码,并在此基础上执行<code>mvn deploy</code>,打包并部署到仓库.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn release:stage</div></pre></td></tr></table></figure>
<p>还有一个更棒的功能：打分支<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn release:branch</div></pre></td></tr></table></figure></p>
<p>通过maven打分支,执行下列操作</p>
<ul>
<li>检查项目是否有未提交代码</li>
<li>为分支更改POM的版本,例如从<code>1.1.00SNAPSHOT</code>改变为<code>1.1.1-SNAPSHOT</code></li>
<li>将POM中的SCM信息更新为分支地址</li>
<li>提交以上更改</li>
<li>将主干代码更新为分支代码</li>
<li>修改本地代码使之回退到之前的版本(用户可以指定新的版本)</li>
<li>提交本地更改</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn release:update-versions</div></pre></td></tr></table></figure>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>Maven的生命周期就是对所有的构建过程进行抽象和统一.Maven的生命周期是抽象的,因此生命周期本身是并不做任何实际工作的,实际的任务交给插件来完成.</p>
<p>Maven拥有如下三套相互独立的生命周期,每个生命周期都包含一些阶段(phase),阶段是按照顺序执行的,而且当PhaseA在PhaseB之前,那么当执行PhaseB时会先执行PhaseA. 但是这三套生命周期是完全独立的.</p>
<h3 id="clean生命周期"><a href="#clean生命周期" class="headerlink" title="clean生命周期"></a>clean生命周期</h3><p>清理项目,下列是该生命周期的阶段</p>
<ul>
<li><code>pre-clean</code></li>
<li><code>clean</code></li>
<li><code>post-clean</code><br>该生命周期包含的Maven命令：<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn clean</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="default生命周期"><a href="#default生命周期" class="headerlink" title="default生命周期"></a>default生命周期</h3><p>构建项目,下列是该生命周期的阶段</p>
<ul>
<li><code>validate</code></li>
<li><code>initialize</code></li>
<li><code>generate-sources</code></li>
<li><code>process-sources</code></li>
<li><code>generate-resources</code></li>
<li><code>process-resources</code></li>
<li><code>compile</code></li>
<li><code>process-class</code></li>
<li><code>generate-test-sources</code></li>
<li><code>process-test-sourcs</code></li>
<li><code>generate-test-resources</code></li>
<li><code>process-test-resources</code></li>
<li><code>test-compile</code></li>
<li><code>process-test-classes</code></li>
<li><code>test</code></li>
<li><code>generate-package</code></li>
<li><code>package</code></li>
<li><code>pre-interation-test</code></li>
<li><code>interation-test</code></li>
<li><code>post-interatopm-test</code></li>
<li><code>verify</code></li>
<li><code>install</code></li>
<li><code>deploy</code><br>该生命周期包含的Maven命令：<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mvn validate</div><div class="line">mvn compile</div><div class="line">mvn test</div><div class="line">mvn <span class="keyword">package</span></div><div class="line">mvn verify</div><div class="line">mvn install</div><div class="line">mvn deploy</div></pre></td></tr></table></figure>
</li>
</ul>
<p>安装jar包到本地库<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn install:install-file -DgroupId=demo -DartifactId=test -Dversion=<span class="number">1.0</span> -Dpackaging=jar -Dfile=E:\XingeApp.jar</div></pre></td></tr></table></figure></p>
<p>安装到自己搭建的中央仓库<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn deploy:deploy-file -DgroupId=demo -DartifactId=demo -Dversion=<span class="number">1.0</span> -Dpackaging=jar -Dfile=E:\XingeApp.jar -Durl=[url] -DrepositoryId=[id]</div></pre></td></tr></table></figure></p>
<p>maven依赖本地tools.jar<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">systemPath</span>&gt;</span>D:/Program Files/Java/jdk1.8.0_77/lib/tools.jar<span class="tag">&lt;/<span class="name">systemPath</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="site生命周期"><a href="#site生命周期" class="headerlink" title="site生命周期"></a>site生命周期</h3><p>建立项目站点,下列是该生命周期的阶段</p>
<ul>
<li><code>pre-site</code></li>
<li><code>site</code></li>
<li><code>post-site</code></li>
<li><code>site-deploy</code><br>该生命周期包含的Maven命令：<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn site</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>插件里会包含多个目标,每个目标都对应着特定的功能,也就是说插件里的功能是通过目标来实现了. 例如<code>maven-compiler-plugin</code>的<code>compile</code>目标的写法为<code>compiler:compile</code>.</p>
<h3 id="插件绑定"><a href="#插件绑定" class="headerlink" title="插件绑定"></a>插件绑定</h3><p>我们可以将插件的目标与生命周期的阶段相绑定.</p>
<p>default生命周期与内置插件绑定关系及具体任务:</p>
<table>
<thead>
<tr>
<th>生命周期阶段</th>
<th>插件目标</th>
<th>执行任务</th>
</tr>
</thead>
<tbody>
<tr>
<td>process-resources</td>
<td>maven-resources-plugin:resources</td>
<td>复制主资源文件至主输出目录</td>
</tr>
<tr>
<td>compile</td>
<td>maven-compile-plugin:compile</td>
<td>编译主代码至主输出目录</td>
</tr>
<tr>
<td>process-test-resources</td>
<td>maven-resources-plugin:testRresources</td>
<td>复制测试资源文件至测试输出目录</td>
</tr>
<tr>
<td>test-compile</td>
<td>maven-compiler-plugin:testCompile</td>
<td>编译测试代码至测试输出目录</td>
</tr>
<tr>
<td>test</td>
<td>maven-surefire-plugin:test</td>
<td>执行测试用例</td>
</tr>
<tr>
<td>package</td>
<td>maven-jar-plugin:jar</td>
<td>创建项目jar包</td>
</tr>
<tr>
<td>install</td>
<td>maven-install-plugin:install</td>
<td>将项目输出构件安装到本地仓库</td>
</tr>
<tr>
<td>deploy</td>
<td>maven-deploy-plugin:deploy</td>
<td>将项目输出构件部署到远程仓库</td>
</tr>
</tbody>
</table>
<p>我们来自定义绑定：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>exec-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>install<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>java<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>我们在<code>install</code>阶段绑定了<code>exec-maven-plugin</code>插件的<code>java</code>目标.</p>
<h3 id="maven-jar-plugin"><a href="#maven-jar-plugin" class="headerlink" title="maven-jar-plugin"></a>maven-jar-plugin</h3><p>当我们定义了<code>&lt;packaging&gt;jar&lt;/packaging&gt;</code>后, 在packaging阶段就会自动调用<code>maven-jar-plugin</code>插件。如果是<code>&lt;packaging&gt;war&lt;/packaging&gt;</code>则会调用<code>maven-war-plugin</code>插件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>wang.ming15<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>testMavenPlugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">archive</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">manifestFile</span>&gt;</span></div><div class="line">                            src/main/resources/META-INF/MANIFEST.MF</div><div class="line">                        <span class="tag">&lt;/<span class="name">manifestFile</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>在上面的例子中我们指定了MANIFEST文件, 其实还有另外一种写法<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">archive</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span></div><div class="line">                    App</div><div class="line">                <span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>除了<code>archive</code>还有一些其他的配置选项<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 指定排除的文件 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>**/service/*<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 指定包含的文件 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 最终的jar包名, 会替换jarName --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>finalName<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 如果没有指定finalName, 则会使用这个名字--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">jarName</span>&gt;</span>jarName<span class="tag">&lt;/<span class="name">jarName</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 重新指定输出路径, 替换target--&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>./newoutput<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="maven-dependency-plugin"><a href="#maven-dependency-plugin" class="headerlink" title="maven-dependency-plugin"></a>maven-dependency-plugin</h3><p>maven-dependency-plugin是处理与依赖相关的插件. 我们一般使用它的copy依赖功能, 下面的例子就是将依赖copy到target/lib目录下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>wang.ming15<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>testMavenPlugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-dependencies<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;project.build.directory&#125;/lib<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">overWriteReleases</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWriteReleases</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">overWriteSnapshots</span>&gt;</span>false<span class="tag">&lt;/<span class="name">overWriteSnapshots</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">overWriteIfNewer</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overWriteIfNewer</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="maven-shade-plugin"><a href="#maven-shade-plugin" class="headerlink" title="maven-shade-plugin"></a>maven-shade-plugin</h3><p>引用或者排除引用指定的依赖<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-shade-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>shade<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">filters</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifact</span>&gt;</span>junit:junit<span class="tag">&lt;/<span class="name">artifact</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">include</span>&gt;</span>junit/framework/**<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">include</span>&gt;</span>org/junit/**<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>org/junit/experimental/**<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>org/junit/runners/**<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></div><div class="line">              <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifact</span>&gt;</span>*:*<span class="tag">&lt;/<span class="name">artifact</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>META-INF/*.SF<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>META-INF/*.DSA<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">                  <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>META-INF/*.RSA<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></div><div class="line">              <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">filters</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h3 id="maven-resources-plugin"><a href="#maven-resources-plugin" class="headerlink" title="maven-resources-plugin"></a>maven-resources-plugin</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>wang.ming15<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>testMavenPlugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="comment">&lt;!-- 因为拷贝文件涉及到了文件的读写, 在此指定读写文件时的编码格式--&gt;</span></div><div class="line">                    <span class="comment">&lt;!--&lt;encoding&gt;UTF-8&lt;/encoding&gt;--&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>copy-resources<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>$&#123;basedir&#125;/target/package<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;<span class="name">resource</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">directory</span>&gt;</span>d://copy<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">                                        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.jar<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">                                    <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">                                <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面的例子中只拷贝了jar后缀的文件.</p>
<blockquote>
<p>因为每个execution只能指定一个输出目录, 因此我们要差异化拷贝的话, 可以多写几个execution来实现</p>
</blockquote>
<h3 id="maven-compiler-plugin"><a href="#maven-compiler-plugin" class="headerlink" title="maven-compiler-plugin"></a>maven-compiler-plugin</h3><p><a href="http://maven.apache.org/components/plugins/maven-compiler-plugin/compile-mojo.html" target="_blank" rel="external">maven-compiler-plugin</a><br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;build&gt;</div><div class="line">        &lt;plugins&gt;</div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</div><div class="line">                &lt;version&gt;3.5.1&lt;/version&gt;</div><div class="line">                &lt;configuration&gt;</div><div class="line">                    &lt;!-- Compiling Sources Using A Different JDK --&gt;</div><div class="line">                    &lt;verbose&gt;true&lt;/verbose&gt;</div><div class="line">                    &lt;fork&gt;true&lt;/fork&gt;</div><div class="line">                    &lt;executable&gt;&lt;$&#123;JAVA_1_4_HOME&#125;/bin/javac&lt;/executable&gt;</div><div class="line">                    &lt;!-- 指定maven-compiler-plugin插件使用的javac的版本,使用这个参数的时必须将fork设置为true--&gt;</div><div class="line">                    &lt;compilerVersion&gt;1.8&lt;/compilerVersion&gt;</div><div class="line"></div><div class="line">                    &lt;!-- 指定javac的-source 和 -target 参数。胆识-target参数要小心使用,有坑--&gt;</div><div class="line">                    &lt;source&gt;1.8&lt;/source&gt;</div><div class="line">                    &lt;target&gt;1。8&lt;/target&gt;</div><div class="line"></div><div class="line">                    &lt;!-- 设置编译时使用的内存大小 --&gt;</div><div class="line">                    &lt;fork&gt;true&lt;/fork&gt;</div><div class="line">                    &lt;meminitial&gt;128m&lt;/meminitial&gt;</div><div class="line">                    &lt;maxmem&gt;512m&lt;/maxmem&gt;</div><div class="line"></div><div class="line">                    &lt;!-- 在编译时传递jvm参数--&gt;</div><div class="line">                    &lt;compilerArgs&gt;</div><div class="line">                        &lt;arg&gt;-verbose&lt;/arg&gt;</div><div class="line">                        &lt;arg&gt;-Xlint:all,-options,-path&lt;/arg&gt;</div><div class="line">                    &lt;/compilerArgs&gt;</div><div class="line">                &lt;/configuration&gt;</div><div class="line"></div><div class="line">            &lt;/plugin&gt;</div><div class="line">        &lt;/plugins&gt;</div><div class="line">&lt;/build&gt;</div></pre></td></tr></table></figure></p>
<h3 id="Assembly"><a href="#Assembly" class="headerlink" title="Assembly"></a>Assembly</h3><p>学习自<a href="http://maven.apache.org/plugins/maven-assembly-plugin/" target="_blank" rel="external">assembly插件官方教程</a></p>
<p>目前assembly插件只有<code>assembly:single</code>可用, 其他的都已经被废弃了.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn assembly:single</div></pre></td></tr></table></figure></p>
<h4 id="jar包"><a href="#jar包" class="headerlink" title="jar包"></a>jar包</h4><p>下面我们将assembly插件绑定到package阶段, 打出一个可运行jar包,同时该jar包里包含了所有的依赖类.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 引用maven-assembly-plugin插件 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 引用jar-with-dependencies, 在打包时将依赖包也打包进jar包里 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">descriptorRefs</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">descriptorRef</span>&gt;</span>jar-with-dependencies<span class="tag">&lt;/<span class="name">descriptorRef</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">descriptorRefs</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 创建一个可执行jar包, 我们在此处指定main class--&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">archive</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>org.sample.App<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 我们将assembly:single目标绑定到package阶段, 那么当我们运行mvn package时, 就会执行该目标 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>make-assembly<span class="tag">&lt;/<span class="name">id</span>&gt;</span> <span class="comment">&lt;!-- this is used for inheritance merges --&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span> <span class="comment">&lt;!-- bind to the packaging phase --&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>single<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h4 id="过滤文件"><a href="#过滤文件" class="headerlink" title="过滤文件"></a>过滤文件</h4><p>我们可以自己实现一个descriptor来实现文件过滤功能</p>
<blockquote>
<p>excludes 还可以过滤文件夹<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">assembly</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3"</span></span></div><div class="line">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd"</span>&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>distribution<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">formats</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 设置打包的最终文件格式 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">format</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">format</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">formats</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">fileSets</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fileSet</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;basedir&#125;<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>*.txt<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>README.txt<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>NOTICE.txt<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">fileSet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">fileSets</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">files</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">file</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">source</span>&gt;</span>README.txt<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>/<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">filtered</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtered</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">file</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">source</span>&gt;</span>NOTICE.txt<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>/<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">filtered</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtered</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">file</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">files</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">assembly</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>fileSets用于过滤文件夹中的文件</li>
<li>files用于过滤单个文件<br>然后我们在pom文件中使用<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filters</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">filter</span>&gt;</span>src/assembly/filter.properties<span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filters</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">descriptors</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">descriptor</span>&gt;</span>src/assembly/distribution.xml<span class="tag">&lt;/<span class="name">descriptor</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">descriptors</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>filter.properties文件内容如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># lines beginning with the # sign are comments</div><div class="line"></div><div class="line">variable1=value1</div><div class="line">variable2=value2</div></pre></td></tr></table></figure></p>
<h4 id="过滤依赖"><a href="#过滤依赖" class="headerlink" title="过滤依赖"></a>过滤依赖</h4><p>在pom文件中我们可能会有很多依赖, 但是打出的包, 我们可能并不需要这些依赖, 那么我们 可以在descriptor文件中将其过滤掉<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencySets</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">dependencySet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>commons-lang:commons-lang<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>log4j:log4j<span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">dependencySet</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencySets</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h4 id="打包子模块"><a href="#打包子模块" class="headerlink" title="打包子模块"></a>打包子模块</h4><p>有的时候我们的工程会有一些子工程, 那么在打包的时候, 我们也希望将子工程也打包进来. 例如我们有一个这样的工程pom文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.test<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Parent<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">modules</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>child1<span class="tag">&lt;/<span class="name">module</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>child2<span class="tag">&lt;/<span class="name">module</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>child3<span class="tag">&lt;/<span class="name">module</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">descriptors</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">descriptor</span>&gt;</span>src/assembly/src.xml<span class="tag">&lt;/<span class="name">descriptor</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">descriptors</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>src.xml如下<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">assembly</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3"</span></span></div><div class="line">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd"</span>&gt;</div><div class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>src<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">formats</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">format</span>&gt;</span>dir<span class="tag">&lt;/<span class="name">format</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">formats</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">includeBaseDirectory</span>&gt;</span>false<span class="tag">&lt;/<span class="name">includeBaseDirectory</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">moduleSets</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">moduleSet</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>org.test:child1<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">sources</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">outputDirectory</span>&gt;</span>sources/$&#123;artifactId&#125;<span class="tag">&lt;/<span class="name">outputDirectory</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">sources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">moduleSet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">moduleSets</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">assembly</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>执行命令<code>mvn clean assembly:directory</code>打包的结果为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">target/parent-1.0-src/</div><div class="line">`-- sources</div><div class="line">    `-- child1</div><div class="line">        |-- pom.xml</div><div class="line">        `-- src</div><div class="line">            |-- main</div><div class="line">            |   `-- java</div><div class="line">            |       `-- org</div><div class="line">            |           `-- test</div><div class="line">            |               `-- App.java</div><div class="line">            `-- test</div><div class="line">                `-- java</div><div class="line">                    `-- org</div><div class="line">                        `-- test</div><div class="line">                            `-- AppTest.java</div></pre></td></tr></table></figure></p>
<h2 id="maven属性"><a href="#maven属性" class="headerlink" title="maven属性"></a>maven属性</h2><p>内置属性</p>
<ul>
<li><code>${basedir}</code>: 表示项目根目录,即包含<code>pom.xml</code>文件的目录</li>
<li><code>${version}</code>:项目版本</li>
</ul>
<p>POM属性<br>该类属性引用POM文件中对应的元素值,例如：</p>
<ul>
<li><code>${project.artifactId}</code>: 引用<code>&lt;project&gt;&lt;artifactId&gt;</code>值</li>
<li><code>${project.build.sourceDirectory}</code>: 项目的主源码目录</li>
<li><code>${project.build.directory}</code>: 项目构建的输出目录</li>
</ul>
<p>自定义属性, 在<code>&lt;Properties&gt;&lt;property&gt;</code>里定义的属性</p>
<p>setting属性, 与POM属性同理,但是以<code>settings</code>开头. 这个属性引用的是<code>setting.xml</code>文件中XML元素的值.</p>
<p>Java系统属性, 所有JAVA系统中的属性都可以使用Maven属性引用,使用<code>mvn help:system</code>查看所有Java系统属性</p>
<p>环境变量属性, 所有环境变量属性属性都可以使用<code>env</code>开头的属性引用,例如<code>${env.JAVA_HOME}</code></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java-Library/">Java Library</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/06/07/JavaLibrary/Maven/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/06/07/JavaLibrary/Maven/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/08/杂记/Flick Ticket Server/" title="Flick Ticket Server" itemprop="url">Flick Ticket Server</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-05-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-05-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>为什么采用Ticket Server？</p>
<p>Flickr采用分库分表的方式来拓展数据库. 有时候需要合并不同数据库之间的数据,那么就需要保证全局唯一的key.另外Flicker Mysql是基于<code>主-主</code>复制的。 这就意味着我们在分库分表时必须确保唯一性,以避免主键的重复.虽然使用MYSQL的自增长主键是极好的,但是它却不能确保无论是在物理主机还是逻辑主机上的唯一性.</p>
<h2 id="考虑GUID"><a href="#考虑GUID" class="headerlink" title="考虑GUID"></a>考虑GUID</h2><p>GUID是非常大的,但是他们在MYSQL索引时性能比较差.我们使用MYSQL查询非常快的一个原因就是,我们对想要查询的东西都会建立索引,那么在查询的时候,我们只需要查询这些索引就好了. 所以索引的大小是一个关键性的选择.另外TickerServer内含了序列性,这对于报告或者debug是很有好处的.</p>
<h2 id="一致性哈希"><a href="#一致性哈希" class="headerlink" title="一致性哈希"></a>一致性哈希</h2><p>像Amazon Dynamo等项目提出了在数据存储顶部采用<code>一致性哈希环</code>,来解决<code>GUID/sharding</code>问题.这种解决方案更适合write-cheap(大量写操作)这种场景,然而MYSQL针对快速随机读进行了优化</p>
<h2 id="集中自动增量"><a href="#集中自动增量" class="headerlink" title="集中自动增量"></a>集中自动增量</h2><p>如果不能让mysql在多个数据库中实现自动增长的话,那么为什么不仅仅只是更新一个数据库呢？如果我们每次只是在一个数据库中插入一行数据, 那么某人在上传一张照片时 我们可以只使用从那个表中生成的主键ID.</p>
<p>当然如果每秒钟上传60张照片的话,这个表会变得非常大. 那我们可以将这张照片的图像数据去掉, 在中心数据库中只保留ID. 可即便那样, 这个表有可能仍然会变得非常大. 而且还会产生评论,分组,标记等等其他信息, 这些数据都需要ID</p>
<h2 id="替换-重新插入"><a href="#替换-重新插入" class="headerlink" title="替换(重新插入)"></a>替换(重新插入)</h2><p>大概十多年前,mysql对<code>ANSI SQL</code>实现了一个非标准化的拓展-<code>REPLACE INTO</code>. 随后<code>INSERT ON DUPLICATE KEY UPDATE</code>做为一个新的语法出现了, 它的出现更好的解决了那个初始问题. 但是<code>REPLACE INTO</code> 仍然被支持着.</p>
<p>REPLACE 的操作极像 INSERT, 如果新插入的一行和原有行中的<code>PRIMARY KEY</code>或者 <code>UNIQUE index</code>重复的话,那么会先将原来的整行删掉,然后再插入新的一行.</p>
<h2 id="组装"><a href="#组装" class="headerlink" title="组装"></a>组装</h2><p>Flicker ticket server 专用于database服务器, 该服务器上有且仅有一个数据库. 在该数据库内有一些表,像表示32位ID的Tickets32, 或者表示64位ID的 Tickets64.</p>
<p>下面展示了一下Ticket64 schema<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Tickets64 (</div><div class="line"><span class="keyword">id</span> <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> auto_increment,</div><div class="line">stub <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">' '</span> ,</div><div class="line">PRIMARY <span class="keyword">KEY</span> ( <span class="keyword">id</span> ) ,</div><div class="line"><span class="keyword">UNIQUE</span> <span class="keyword">KEY</span>  stub ( stub )</div><div class="line">) <span class="keyword">ENGINE</span>=MyISAM</div></pre></td></tr></table></figure></p>
<ul>
<li>当我们执行sql:<code>SELECT * from Tickets64</code> 返回下面一个结果</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">+-------------------+------+</div><div class="line">| id 				|stub  |</div><div class="line">+-------------------+------+</div><div class="line">| <span class="number">72157623227190423</span> | a    |</div><div class="line">+-------------------+------+</div></pre></td></tr></table></figure>
<p>当我需要一个新的64位ID时,我执行面貌这个sql</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">REPLACE</span> <span class="keyword">INTO</span> Tickets64 (stub) <span class="keyword">VALUES</span> (<span class="string">' a'</span> ) ;</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">LAST_INSERT_ID</span>() ;</div></pre></td></tr></table></figure>
<h4 id="SPOF-单点故障"><a href="#SPOF-单点故障" class="headerlink" title="SPOF(单点故障)"></a>SPOF(单点故障)</h4><p>你无法预料到准备好给你的ID会产生单点故障. 故我们同事运行俩台ticket server来达到高可用. 同时在不同的数据库中大量的发生写/更新操作也会产生问题, 如果加锁的话就会使服务器白白丧失掉大量的性能.<br>我们的解决办法是通过拆分ID空间 在不同的数据库间进行责任拆分, 如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">TicketServer1:</div><div class="line">auto-increment-increment = <span class="number">2</span></div><div class="line">auto-increment-offset = <span class="number">1</span></div><div class="line"></div><div class="line">TicketServer2:</div><div class="line">auto-increment-increment = <span class="number">2</span></div><div class="line">auto-increment-offset = <span class="number">2</span></div></pre></td></tr></table></figure>
<p>我们通过在不同的服务器间循环操作来达到负载均衡以及减少运行时间.</p>
<p>在Ticket server我们不单单只有Tickets32 and Tickets64 这俩张表,我们还有更多的表. 例如针对照片, 账号, 离线任务等等 其他的表.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂记/">杂记</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/08/杂记/Flick Ticket Server/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/08/杂记/Flick Ticket Server/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/08/编程语言/haskell函数/" title="haskell函数" itemprop="url">haskell函数</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-04-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-04-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>我们采用如下格式定义一个函数<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">函数名 :: 参数<span class="number">1</span>的类型 -&gt; 参数<span class="number">2</span>的类型 -&gt; ... -&gt; 结果类型 (<span class="number">1</span>)</div><div class="line">函数名 参数<span class="number">1</span> 参数<span class="number">2</span> ... = 函数体                         (<span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<ol>
<li>定义函数签名</li>
<li>定义函数</li>
</ol>
<p>下面我们举例出多种函数定义变体形式:</p>
<h3 id="带有类型类的函数定义"><a href="#带有类型类的函数定义" class="headerlink" title="带有类型类的函数定义"></a>带有类型类的函数定义</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> :: <span class="type">Num</span> t =&gt; t -&gt; t -&gt; t</div><div class="line"><span class="title">add</span> x y = x + y</div></pre></td></tr></table></figure>
<h3 id="带有多个类型的函数定义"><a href="#带有多个类型的函数定义" class="headerlink" title="带有多个类型的函数定义"></a>带有多个类型的函数定义</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> :: (<span class="type">Show</span> t, <span class="type">Int</span> t) =&gt; t -&gt; t -&gt; t</div><div class="line"><span class="title">add</span> x y = x + y</div></pre></td></tr></table></figure>
<h4 id="不带有类型类的函数定义"><a href="#不带有类型类的函数定义" class="headerlink" title="不带有类型类的函数定义"></a>不带有类型类的函数定义</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span> -&gt; <span class="type">Int</span></div><div class="line"><span class="title">add</span> x y = x + y</div></pre></td></tr></table></figure>
<h4 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> x y = x + y :: <span class="type">Int</span></div></pre></td></tr></table></figure>
<h4 id="类型自动推断的函数定义"><a href="#类型自动推断的函数定义" class="headerlink" title="类型自动推断的函数定义"></a>类型自动推断的函数定义</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> x y = x + y</div></pre></td></tr></table></figure>
<h4 id="函数后跟’"><a href="#函数后跟’" class="headerlink" title="函数后跟’"></a>函数后跟’</h4><p>在函数名后加一个<code>&#39;</code>,与原函数这代表着俩个函数.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="title">add'</span> :: <span class="type">Num</span> t =&gt; t -&gt; t -&gt; t</div><div class="line"><span class="title">add'</span> x y = x + y</div><div class="line"></div><div class="line"><span class="title">add</span> :: <span class="type">Num</span> t =&gt; t -&gt; t -&gt; t</div><div class="line"><span class="title">add</span> x y = x + y</div></pre></td></tr></table></figure></p>
<h2 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h2><h3 id="柯里化函数"><a href="#柯里化函数" class="headerlink" title="柯里化函数"></a>柯里化函数</h3><p>当调用一个N参数的函数时, 传递M个参数(N &lt; M),那么该参数返回的结果也是一个函数.这个过程称为柯里化.</p>
<p>但是并不是每种函数都可以这么调用,只有下面形式的函数才可以这么调用.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> :: <span class="type">Num</span> t =&gt; t -&gt; t -&gt; t</div><div class="line"><span class="title">add</span> x y = x + y</div></pre></td></tr></table></figure></p>
<p>当我们只向<code>add</code>函数传递一个参数<code>5</code>的时候,我们会得到下面一个这样子的函数:<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> <span class="number">5</span> y = <span class="number">5</span> + y</div><div class="line"></div><div class="line">函数类型为:</div><div class="line"><span class="title">add</span> :: <span class="type">Num</span> t =&gt; t -&gt; t</div></pre></td></tr></table></figure></p>
<h3 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h3><p>如果调用函数时,参数列表不完整,这时就称为函数的不完全应用,也称为偏函数.</p>
<h3 id="非柯里化函数"><a href="#非柯里化函数" class="headerlink" title="非柯里化函数"></a>非柯里化函数</h3><p>非柯里化的函数,必须在调用的时候,将所有参数都放到元组中,然后传递给函数.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">add</span> :: <span class="type">Num</span> t =&gt; (t ,t) -&gt; t</div><div class="line"><span class="title">add</span> (x, y) = x + y</div></pre></td></tr></table></figure></p>
<h3 id="多态函数"><a href="#多态函数" class="headerlink" title="多态函数"></a>多态函数</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h3 id="重载类型函数"><a href="#重载类型函数" class="headerlink" title="重载类型函数"></a>重载类型函数</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h2 id="参数绑定"><a href="#参数绑定" class="headerlink" title="参数绑定"></a>参数绑定</h2><h3 id="let…in…"><a href="#let…in…" class="headerlink" title="let…in…"></a>let…in…</h3><p><code>let</code>里定义的部分会在函数体中进行替换</p>
<h4 id="替换表达式"><a href="#替换表达式" class="headerlink" title="替换表达式"></a>替换表达式</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="title">s</span> :: <span class="type">Double</span> -&gt; <span class="type">Double</span> -&gt; <span class="type">Double</span> -&gt; <span class="type">Double</span></div><div class="line"><span class="title">s</span> a b c =</div><div class="line">    <span class="keyword">let</span> p = (a + b + c) / <span class="number">2</span></div><div class="line">    <span class="keyword">in</span> sqrt (p * (p - a) * (p - b) * (p - c))</div></pre></td></tr></table></figure>
<h4 id="替换多个表达式"><a href="#替换多个表达式" class="headerlink" title="替换多个表达式"></a>替换多个表达式</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<h4 id="替换函数"><a href="#替换函数" class="headerlink" title="替换函数"></a>替换函数</h4><ul>
<li>where<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="title">s</span> :: <span class="type">Double</span> -&gt; <span class="type">Double</span> -&gt; <span class="type">Double</span> -&gt; <span class="type">Double</span></div><div class="line"><span class="title">s</span> a b c = sqrt (p * (p - a) * (p - b) * (p - c))</div><div class="line">    <span class="keyword">where</span> p = (a + b + c) / <span class="number">2</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h4><ul>
<li>恒值函数id</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>常数函数const</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>参数反置函数flip</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>错误函数error</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>undifine函数</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>min/max函数<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="列表函数"><a href="#列表函数" class="headerlink" title="列表函数"></a>列表函数</h4><ul>
<li>null</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>length</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>!!</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>reverse</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>head</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>last</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>tail</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>init</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>map</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>filter</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>take</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>drop</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>span</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>break</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>takeWhile</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>dropWhile</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>spiltAt</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>repeat</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>replicate</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>any</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>all</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>elem</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>notelem</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>iterate</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>until</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>zip</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>concat</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>concatMap</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/08/编程语言/haskell函数/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/04/08/编程语言/haskell函数/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/08/编程语言/haskell/" title="haskell类型系统" itemprop="url">haskell类型系统</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-04-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-04-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>在Haskell中数据只是函数的一种方言,他们并没有本质上的区别.<br>在Haskell中所有的数据类型都必须首字母都必须大写.</p>
<p>在GHCI中我们可以通过<code>::t</code>命令来查看一个数据类型或者函数类型.</p>
<p>我们可以通过下面的语法声明一个数据<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">var</span> :: 数据类型</div><div class="line"><span class="title">var</span> = 数据初始值</div></pre></td></tr></table></figure></p>
<p>或者我们可以将这俩行并为一行<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">var</span> = 数据初始值 :: 数据类型</div></pre></td></tr></table></figure></p>
<h3 id="Bool类型"><a href="#Bool类型" class="headerlink" title="Bool类型"></a>Bool类型</h3><p>我们声明一个bool类型的数据,并将其初始化为<code>True</code><br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">true</span> = <span class="type">True</span> :: <span class="type">Bool</span></div></pre></td></tr></table></figure></p>
<h3 id="Char类型"><a href="#Char类型" class="headerlink" title="Char类型"></a>Char类型</h3><p>单字符类型<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="title">char</span> = 'a' :: <span class="type">Char</span></div><div class="line"></div><div class="line"><span class="title">char</span> = '\<span class="number">100</span>' :: <span class="type">Char</span></div><div class="line"></div><div class="line"><span class="title">char</span> = '\n' :: <span class="type">Char</span></div></pre></td></tr></table></figure></p>
<h3 id="Int类型"><a href="#Int类型" class="headerlink" title="Int类型"></a>Int类型</h3><p>有符号整数,其范围和OS与GHC的位数有关.在32位系统中,其范围就是<code>-2^31~2^31-1</code><br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">int</span> = <span class="number">-1</span> :: <span class="type">Int</span></div></pre></td></tr></table></figure></p>
<h3 id="Word类型"><a href="#Word类型" class="headerlink" title="Word类型"></a>Word类型</h3><p>有符号整数类型,其范围和OS与GHC的位数有关.在32位系统中,其范围就是<code>0~2^32-1</code><br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Data.Word</div><div class="line"></div><div class="line"><span class="title">word</span> = <span class="number">1</span> :: <span class="type">Word</span></div></pre></td></tr></table></figure></p>
<h3 id="Integer类型"><a href="#Integer类型" class="headerlink" title="Integer类型"></a>Integer类型</h3><p>任意精度类型. 可以表示任意整数的大小, 限制它的因素只和OS有关.</p>
<p>当数据不指明类型时,Integer是整数的默认类型<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">integer</span> = <span class="number">199999</span> :: <span class="type">Integer</span></div></pre></td></tr></table></figure></p>
<h3 id="Float类型"><a href="#Float类型" class="headerlink" title="Float类型"></a>Float类型</h3><p>单精度浮点小数<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">float</span> = <span class="number">1.1</span> :: <span class="type">Float</span></div></pre></td></tr></table></figure></p>
<h3 id="Double类型"><a href="#Double类型" class="headerlink" title="Double类型"></a>Double类型</h3><p>双精度浮点小数<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">double</span> = <span class="number">1.11111</span> :: <span class="type">Double</span></div></pre></td></tr></table></figure></p>
<h3 id="Rational类型"><a href="#Rational类型" class="headerlink" title="Rational类型"></a>Rational类型</h3><p>有理数类型<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">rational</span> = <span class="number">1</span> / <span class="number">500</span> :: <span class="type">Rational</span></div></pre></td></tr></table></figure></p>
<h3 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h3><p><code>String</code>的类型为<code>[Char]</code><br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">string</span> = <span class="string">"char array"</span> :: <span class="type">String</span></div></pre></td></tr></table></figure></p>
<h3 id="元组类型"><a href="#元组类型" class="headerlink" title="元组类型"></a>元组类型</h3><p>元祖用<code>(,)</code>表示,其中的内容称为元件. 元件的个数并不限制(如有俩个元件的称为2元元组).</p>
<p>一旦确定了元件的个数和元件的类型,那他们就是不可再变的.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">tuple</span> = (<span class="number">123</span>, <span class="string">"abc"</span>) :: (<span class="type">Int</span>, [<span class="type">Char</span>])</div></pre></td></tr></table></figure></p>
<h3 id="列表类型"><a href="#列表类型" class="headerlink" title="列表类型"></a>列表类型</h3><p>列表本身就是一个容器,内存可以存放各种类型的数据(包括函数),但是一旦类型确定了,就不可再变.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="title">list</span> = [<span class="number">123</span>, <span class="number">8</span>, <span class="number">9</span>] :: [<span class="type">Int</span>]</div></pre></td></tr></table></figure></p>
<h4 id="拼接列表"><a href="#拼接列表" class="headerlink" title="拼接列表"></a>拼接列表</h4><p>采用<code>x:xs</code>的形式进行拼接列表, <code>x</code>代表一个元素, <code>xs</code>代表一个列表.<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="title">list</span> = [<span class="number">123</span>, <span class="number">8</span>, <span class="number">9</span>]</div><div class="line"></div><div class="line"><span class="title">newList</span> = <span class="number">1</span> : list</div></pre></td></tr></table></figure></p>
<h4 id="多维列表"><a href="#多维列表" class="headerlink" title="多维列表"></a>多维列表</h4><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="title">mulList</span> = [[]]  <span class="comment">-- 列表中套有一个列表,类似于2维数组</span></div><div class="line"></div><div class="line"><span class="title">mulList</span> = [[[]]]</div></pre></td></tr></table></figure>
<h2 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h2><p>我们可以使用<code>type</code>关键字将复杂类型起一个简单的名字</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">type</span> <span class="type">NewType</span> = (<span class="type">Int</span>, <span class="type">Int</span>)</span></div></pre></td></tr></table></figure>
<p>接下来我们就可以使用这个类型了<br><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="title">point</span> :: <span class="type">NewType</span></div><div class="line"><span class="title">point</span> = (<span class="number">1</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure></p>
<p><code>type</code>关键字并没有产生新的类型,只是在编译期将新的类型替换为原来的类型.</p>
<h2 id="类型类"><a href="#类型类" class="headerlink" title="类型类"></a>类型类</h2><p>Haskell提供了以下的类型类</p>
<ul>
<li>Eq</li>
<li>Ord</li>
<li>Enum</li>
<li>Bounded</li>
<li>Num</li>
<li>Show</li>
</ul>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ul>
<li>show</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>read</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>lines</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>unlines</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>word</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
<ul>
<li>unword</li>
</ul>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程语言/">编程语言</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/08/编程语言/haskell/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/04/08/编程语言/haskell/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/08/JavaLibrary/dropwizard/" title="Dropwizard 初探" itemprop="url">Dropwizard 初探</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-04-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-04-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Setting-Up-Maven"><a href="#Setting-Up-Maven" class="headerlink" title="Setting Up Maven"></a>Setting Up Maven</h2><p>在MAVEN的dependency里添加<code>metrics-core</code>库<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.dropwizard.metrics<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>metrics-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;metrics.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>注意，使用上面依赖你需要在pom文件里声明了<code>metrics.version</code>属性,并且该属性值是<code>3.1.0</code></p>
<h2 id="Meters"><a href="#Meters" class="headerlink" title="Meters"></a>Meters</h2><p><code>meter</code>表示的是单位时间内事件数的比例(例如每秒请求数). 除了平均速率之外, <code>meter</code>仍然会追踪<code>1-,5-,15-</code>分钟的移动平均数.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">final</span> Meter requests = metrics.meter(<span class="string">"requests"</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(Request request, Response response)</span> </span>&#123;</div><div class="line">    requests.mark();</div><div class="line">    <span class="comment">// etc</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面的<code>meter</code>表示每秒请求数的比例。</p>
<h2 id="Console-Reporter"><a href="#Console-Reporter" class="headerlink" title="Console Reporter"></a>Console Reporter</h2><p><code>Console Reporter</code>正如其名,向控制台进行输出日志,下面的示例将每秒进行输出一次.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ConsoleReporter reporter = ConsoleReporter.forRegistry(metrics)</div><div class="line">       .convertRatesTo(TimeUnit.SECONDS)</div><div class="line">       .convertDurationsTo(TimeUnit.MILLISECONDS)</div><div class="line">       .build();</div><div class="line">   reporter.start(<span class="number">1</span>, TimeUnit.SECONDS);</div></pre></td></tr></table></figure></p>
<h2 id="Complete-getting-started"><a href="#Complete-getting-started" class="headerlink" title="Complete getting started"></a>Complete getting started</h2><p>下面是一个完整的示例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">package</span> sample;</div><div class="line">  <span class="keyword">import</span> com.codahale.metrics.*;</div><div class="line">  <span class="keyword">import</span> java.util.concurrent.TimeUnit;</div><div class="line"></div><div class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetStarted</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">final</span> MetricRegistry metrics = <span class="keyword">new</span> MetricRegistry();</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</div><div class="line">      startReport();</div><div class="line">      Meter requests = metrics.meter(<span class="string">"requests"</span>);</div><div class="line">      requests.mark();</div><div class="line">      wait5Seconds();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">startReport</span><span class="params">()</span> </span>&#123;</div><div class="line">      ConsoleReporter reporter = ConsoleReporter.forRegistry(metrics)</div><div class="line">          .convertRatesTo(TimeUnit.SECONDS)</div><div class="line">          .convertDurationsTo(TimeUnit.MILLISECONDS)</div><div class="line">          .build();</div><div class="line">      reporter.start(<span class="number">1</span>, TimeUnit.SECONDS);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">wait5Seconds</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">          Thread.sleep(<span class="number">5</span>*<span class="number">1000</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">catch</span>(InterruptedException e) &#123;&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>somegroup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sample<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Example project for Metrics<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.dropwizard.metrics<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>metrics-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;metrics.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<p>注意：使用上面依赖你需要在pom文件里声明了<code>metrics.version</code>属性,并且该属性值是<code>3.1.0</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn <span class="keyword">package</span> exec:java -Dexec.mainClass=sample.First</div></pre></td></tr></table></figure>
<h2 id="The-Registry"><a href="#The-Registry" class="headerlink" title="The Registry"></a>The Registry</h2><p>Metrics的核心部分是<code>MetricRegistry</code>类,这个类是应用程序中所有的metrics的容器. 下面的示例创建一个新的<code>MetricRegistry</code>:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> MetricRegistry metrics = <span class="keyword">new</span> MetricRegistry();</div></pre></td></tr></table></figure></p>
<p>如果你在应用程序中嵌入一个自己创建的<code>MetricRegistry</code>实例，你应该将这个属性置为静态的.</p>
<h2 id="Gauges"><a href="#Gauges" class="headerlink" title="Gauges"></a>Gauges</h2><p><code>gauge</code>表示的是一个瞬时值. 例如我们获取队列里待执行的任务数<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public class QueueManager &#123;</div><div class="line">    private final Queue queue;</div><div class="line"></div><div class="line">    public QueueManager(MetricRegistry metrics, String name) &#123;</div><div class="line">        this.queue = new Queue();</div><div class="line">        metrics.register(MetricRegistry.name(QueueManager.class, name, "size"),</div><div class="line">                         new Gauge<span class="tag">&lt;<span class="name">Integer</span>&gt;</span>() &#123;</div><div class="line">                             @Override</div><div class="line">                             public Integer getValue() &#123;</div><div class="line">                                 return queue.size();</div><div class="line">                             &#125;</div><div class="line">                         &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当完成计算之后,它将会返回队列里的任务数。</p>
<p>在<code>registry</code>里的每个<code>metric</code>都有一个唯一的名字,其命名规范为用<code>.</code>分割的字符串,例如<code>things.count</code>或者<code>com.example.Thing.latency</code>. <code>MetricRegistry</code>类提供了一个静态方法来构建这些名字.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">MetricRegistry.name(QueueManager.class, "jobs", "size")</div></pre></td></tr></table></figure></p>
<p>上面的调用会返回<code>com.example.QueueManager.jobs.size</code>。</p>
<p>对于大多数队列或者类队列结构,你也许仅想要获得<code>queue.size()</code>这个值. 大多数<code>java.util</code>和<code>java.util.concurrent</code>包都实现了<code>size()</code>方法,它的复杂度是<code>O(n)</code>,这意味着你的<code>gauge</code>也许会很慢(也许还会持有锁)</p>
<h2 id="Counters"><a href="#Counters" class="headerlink" title="Counters"></a>Counters</h2><p><code>counter</code>是一个内部采用<code>AtomicLong</code>计数器的<code>gauge</code>实现. 你可以增加或者减少这个值.例如,我们想要一种更加高效的计算队列大小的方式:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">private final Counter pendingJobs = metrics.counter(name(QueueManager.class, "pending-jobs"));</div><div class="line"></div><div class="line">public void addJob(Job job) &#123;</div><div class="line">    pendingJobs.inc();</div><div class="line">    queue.offer(job);</div><div class="line">&#125;</div><div class="line"></div><div class="line">public Job takeJob() &#123;</div><div class="line">    pendingJobs.dec();</div><div class="line">    return queue.take();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>每一次业务逻辑的调用，counter都会被计算一次,它会返回队列中的任务数.</p>
<p>正如你看到的,counter的API是非常不同的是,<code>counter(String)</code>取代了<code>register(String, Metric)</code>，然而你可以仍然可以使用<code>register</code>方法创建你自己的<code>Counter</code>实例,实际上<code>counter(String)</code>在内部里已经将这些工作都为你做好了,还允许你使用相同的名字对metric进行复用</p>
<p>还需要说明一点,在上例中,我们静态引入了<code>MetricRegistry</code>的<code>name</code>方法.</p>
<h2 id="Histograms"><a href="#Histograms" class="headerlink" title="Histograms"></a>Histograms</h2><p><code>histogram</code>表示的是流中数据值的静态分布. 除了计算<code>minimum, maximum, mean, etc</code>等值,它还计算中间值或者<code>75th, 90th, 95th, 98th, 99th, 99.9th</code>等百分比.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">private final Histogram responseSizes = metrics.histogram(name(RequestHandler.class, "response-sizes"));</div><div class="line"></div><div class="line">public void handleRequest(Request request, Response response) &#123;</div><div class="line">    // etc</div><div class="line">    responseSizes.update(response.getContent().length);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面的<code>histogram</code>统计了响应中的字节数.</p>
<h2 id="Timers"><a href="#Timers" class="headerlink" title="Timers"></a>Timers</h2><p><code>timer</code>可以计算某个代码段的调用比例,和调用期间的分布状况.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">private final Timer responses = metrics.timer(name(RequestHandler.class, "responses"));</div><div class="line"></div><div class="line">public String handleRequest(Request request, Response response) &#123;</div><div class="line">    final Timer.Context context = responses.time();</div><div class="line">    try &#123;</div><div class="line">        // etc;</div><div class="line">        return "OK";</div><div class="line">    &#125; finally &#123;</div><div class="line">        context.stop();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>This timer will measure the amount of time it takes to process each request in nanoseconds and provide a rate of requests in requests per second.</p>
<h2 id="Health-Checks"><a href="#Health-Checks" class="headerlink" title="Health Checks"></a>Health Checks</h2><p>Metrics还可以通过<code>metrics-healthchecks</code>模块集中检查你的服务的健康.</p>
<p>首先创建一个新的<code>HealthCheckRegistry</code>实例<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">final HealthCheckRegistry healthChecks = new HealthCheckRegistry();</div><div class="line">Second, implement a HealthCheck subclass:</div><div class="line"></div><div class="line">public class DatabaseHealthCheck extends HealthCheck &#123;</div><div class="line">    private final Database database;</div><div class="line"></div><div class="line">    public DatabaseHealthCheck(Database database) &#123;</div><div class="line">        this.database = database;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public HealthCheck.Result check() throws Exception &#123;</div><div class="line">        if (database.isConnected()) &#123;</div><div class="line">            return HealthCheck.Result.healthy();</div><div class="line">        &#125; else &#123;</div><div class="line">            return HealthCheck.Result.unhealthy("Cannot connect to " + database.getUrl());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后将Metrics注册到它身上：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">healthChecks.register("postgres", new DatabaseHealthCheck(database));</div></pre></td></tr></table></figure></p>
<p>接下来运行所有的health checks:<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">final Map&lt;String, HealthCheck.Resultresults = healthChecks.runHealthChecks();</div><div class="line">for (Entry&lt;String, HealthCheck.Resultentry : results.entrySet()) &#123;</div><div class="line">    if (entry.getValue().isHealthy()) &#123;</div><div class="line">        System.out.println(entry.getKey() + " is healthy");</div><div class="line">    &#125; else &#123;</div><div class="line">        System.err.println(entry.getKey() + " is UNHEALTHY: " + entry.getValue().getMessage());</div><div class="line">        final Throwable e = entry.getValue().getError();</div><div class="line">        if (e != null) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Metrics内置了一种health check：<code>ThreadDeadlockHealthCheck</code>,它使用了java内置的线程死锁检测来查找死锁线程.</p>
<h2 id="Reporting-Via-JMX"><a href="#Reporting-Via-JMX" class="headerlink" title="Reporting Via JMX"></a>Reporting Via JMX</h2><p>通过<code>JMX</code>报告metrics：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">final JmxReporter reporter = JmxReporter.forRegistry(registry).build();</div><div class="line">reporter.start();</div></pre></td></tr></table></figure></p>
<p>一旦reporter启动了,registry中的所有的metrics都可以通过<code>JConsole</code>或者<code>VisualVM</code>看到.</p>
<p>Metrics被包装成<code>JMX MBeans</code>,可以在<code>VisualVM&#39;s MBeans browser</code>查看<code>Metrics</code>.</p>
<p>注意：在VisualVM中，你双击任一metric属性,VisualVM将会将这些属性数据通过图形化的方式展示给你.</p>
<h2 id="Reporting-Via-HTTP"><a href="#Reporting-Via-HTTP" class="headerlink" title="Reporting Via HTTP"></a>Reporting Via HTTP</h2><p>Metrics仍然可以通过servlet(AdminServlet)展示给你, 提供JSON形式的数据. 它可以报告<code>health checks</code>,打印<code>thread dump</code>,或者提供一个负载均衡的简单响应. (它还提供了其他的<code>servlets–MetricsServlet</code>,例如<code>HealthCheckServlet, ThreadDumpServlet</code>或者<code>PingServlet</code>.)</p>
<p>如果想要使用servlet你必须在pom文件中依赖<code>metrics-servlets</code>.<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.dropwizard.metrics<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>metrics-servlets<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;metrics.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="Other-Reporting"><a href="#Other-Reporting" class="headerlink" title="Other Reporting"></a>Other Reporting</h2><p>除了<code>JMX</code>和<code>HTTP</code>以外,Metrics还提供了下面的报告方式</p>
<ul>
<li><code>STDOUT</code>: 使用<code>metrics-core</code>的<code>ConsoleReporter</code>报告</li>
<li><code>CSV files</code>, 使用<code>metrics-core</code>的<code>CsvReporter</code>报告</li>
<li><code>SLF4J loggers</code>, 使用<code>metrics-core</code>的<code>Slf4jReporter</code>报告</li>
<li><code>Ganglia</code>, 使用<code>metrics-ganglia</code>的<code>GangliaReporter</code>报告</li>
<li><code>Graphite</code>, 使用<code>metrics-graphite</code>的<code>GraphiteReporter</code>报告</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java-Library/">Java Library</a>
</div>


</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/08/JavaLibrary/dropwizard/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/04/08/JavaLibrary/dropwizard/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/04/08/JavaLibrary/spring boot/" title="SpringBoot" itemprop="url">SpringBoot</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="王玉" target="_blank" itemprop="author">王玉</a>
		
  <p class="article-time">
    <time datetime="2015-04-08T07:00:00.000Z" itemprop="datePublished"> Published 2015-04-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h2><p>SpringBoot提供了一种快速构建应用的方式. 它会根据Classpath和beans上的现有配置来推测你缺少哪些配置, 从而将缺少的配置自动加载.</p>
<p>我们来构建一个最简单的应用来测试一下这个功能</p>
<p>我们首先在Maven中添加一个非常简单的Spring依赖<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>然后上我们的Java代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> testSpringBoot;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</div><div class="line"></div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ConfigurableApplicationContext app = SpringApplication.run(App.class, args);</div><div class="line"></div><div class="line">		PrintNameService printHelloWorldService = app.getBean(<span class="string">"printHelloWorldService"</span>, PrintNameService.class);</div><div class="line">		printHelloWorldService.printHelloWorld();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>@SpringBootApplication</code>聚合了以下注解</p>
<ul>
<li><code>@Configuration</code> 标记该class为应用上下文的bean资源.</li>
<li><code>@EnableAutoConfiguration</code> 该注解是让Spring自动从classpath, 其他beans以及配置文件中加载bean.</li>
<li><code>@EnableWebMvc</code> 开启Spring的MVN功能, 但是当Spring Boot 在classpath中发现SpringMVN依赖后会自动开启该模块(依赖了<code>@EnableAutoConfiguration</code>). 这注解会将当前应用作为一个web应用启动.</li>
<li><p><code>@ComponentScan</code> Spring 会在指定包下搜索components, configurations, 和services. 在本例中, 它会在hello包中所搜, 以及找到一个<code>HelloController</code>.</p>
</li>
<li><p><code>Autowired</code> : 注入值. 可以用于属性, 方法, 构造器等.</p>
</li>
</ul>
<p>然后我们可以使用下面提供的注解来标记Spring中的Bean</p>
<ul>
<li><code>@Configuration</code> 注解类等价与XML中配置beans.</li>
<li><code>@Bean</code> 标注方法等价于XML中配置bean</li>
<li><code>@Import</code></li>
<li><code>@DependsOn</code></li>
<li><code>@Component</code> : 通用注解, 可以用于注解任何bean.</li>
<li><code>@Repository</code> : <code>Component</code>的子注解, 一般用来注解DAO类</li>
<li><code>@Service</code> : <code>Component</code>的子注解, 一般用来注解Service类</li>
<li><code>@Controller</code> : <code>Component</code>的子注解, 一般用来注解控制层</li>
<li><code>@Scope</code> : 指定bean的作用域<blockquote>
<p><code>@Component</code>可以作为元注解去注解我们自定义的注解, 然后我们自定义的注解注解到类的时候, 也会被自动加载到SpringContext中.</p>
</blockquote>
</li>
</ul>
<p>我们采用Service<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> testSpringBoot;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrintNameService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printHelloWorld</span><span class="params">()</span> </span>&#123;</div><div class="line">		System.out.println(nameGenerateService.lily());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Autowired</span></div><div class="line">	<span class="keyword">private</span> NameGenerateService nameGenerateService;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">package</span> testSpringBoot;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"></div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NameGenerateService</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">lily</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"Lily"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最后就输出了Lily.</p>
<blockquote>
<p>注意, SpringBoot不能放在启动程序的根目录下, 例如<code>src/main/java</code>这样的目录下, 必须再封装一层, 例如<code>src/main/java/testSpringBoot</code>下</p>
</blockquote>
<h2 id="web"><a href="#web" class="headerlink" title="web"></a>web</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<p>构建应用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="comment">// 告诉Spring Boot根据添加的jar依赖猜测如何配置Spring</span></div><div class="line"><span class="meta">@EnableAutoConfiguration</span>	</div><div class="line"><span class="meta">@ComponentScan</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">    	SpringApplication.run(App.class, <span class="keyword">new</span> String[<span class="number">0</span>]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAction</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">// http://localhost:8080/h</span></div><div class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/h"</span>)</div><div class="line">	<span class="meta">@ResponseBody</span></div><div class="line">	<span class="function">String <span class="title">home</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"home:Hello World!"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>上面给出了一个最简单的HTTP应用. 上面默认的就是一个GET请求, 我们还可以自己定义其他请求<code>@RequestMapping(value = &quot;post&quot;, method = RequestMethod.POST)</code>.</p>
<p>我们还可以指定路径参数<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://localhost:8080/pathVariable/a</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/pathVariable/&#123;paramV&#125;"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function">String <span class="title">pathVariable</span><span class="params">(@PathVariable String paramV)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> paramV;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Get路径参数"><a href="#Get路径参数" class="headerlink" title="Get路径参数"></a>Get路径参数</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://localhost:8080/requestParam?v=v&amp;n=n</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/requestParam"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function">String <span class="title">requestParam</span><span class="params">(@RequestParam String v)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> v;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>常用来处理以下情况</p>
<ul>
<li>常用来处理简单类型的绑定,可以处理get 方式中queryString的值,也可以处理post方式中 body data的值;</li>
<li>用来处理Content-Type: 为application/x-www-form-urlencoded编码的内容,提交方式GET、POST;</li>
<li>该注解有两个属性： value、required; value用来指定要传入值的id名称,required用来指示参数是否必须绑定;</li>
</ul>
<h3 id="完整路径"><a href="#完整路径" class="headerlink" title="完整路径"></a>完整路径</h3><p>该注解常用来处理Content-Type:</p>
<ul>
<li>不是application/x-www-form-urlencoded编码的内容,例如application/json, application/xml等;</li>
<li>它是通过使用HandlerAdapter 配置的HttpMessageConverters来解析post data body,然后绑定到相应的bean上的.</li>
<li>因为配置有FormHttpMessageConverter,所以也可以用来处理application/x-www-form-urlencoded的内容,处理完的结果放在一个MultiValueMap<string, string="">里,这种情况在某些特殊需求下使用,详情查看FormHttpMessageConverter api;<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/requestBody"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function">String <span class="title">requestBody</span><span class="params">(@RequestBody String v)</span> </span>&#123;</div><div class="line">	<span class="keyword">return</span> v;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</string,></li>
</ul>
<h3 id="指定HEADER"><a href="#指定HEADER" class="headerlink" title="指定HEADER"></a>指定HEADER</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// http://localhost:8080/requestHeader</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/requestHeader"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function">String <span class="title">requestHeader</span><span class="params">(@RequestHeader(<span class="string">"Accept-Encoding"</span>)</span> String encoding) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="string">"Accept-Encoding : "</span> + encoding;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="设置Cookie"><a href="#设置Cookie" class="headerlink" title="设置Cookie"></a>设置Cookie</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/cookieValue"</span>)</div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="function">String <span class="title">cookieValue</span><span class="params">(@CookieValue(<span class="string">"SESSION_ID"</span>)</span> String v) </span>&#123;</div><div class="line">	<span class="keyword">return</span> v;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="RestController"><a href="#RestController" class="headerlink" title="RestController"></a>RestController</h3><p>Spring Boot官网还提供了一种更简单的配置<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</div><div class="line"></div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Greetings from Spring Boot!"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用<code>RestController</code>表示HelloController要使用Spring MVC来处理web请求了. <code>RestController</code>内部聚合了<code>@Controller</code>和<code>@ResponseBody</code>注解. <code>RequestMapping</code>将<code>/</code>映射到<code>index()</code>方法. </p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Java-Library/">Java Library</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Spring/">Spring</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/04/08/JavaLibrary/spring boot/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/04/08/JavaLibrary/spring boot/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/6/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="yu66" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/JVM/" title="JVM">JVM<sup>38</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java/" title="Java">Java<sup>36</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java-Library/" title="Java Library">Java Library<sup>40</sup></a></li>
		  
		
		  
			<li><a href="/categories/Nginx/" title="Nginx">Nginx<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/NoSql/" title="NoSql">NoSql<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/ZooKeeper/" title="ZooKeeper">ZooKeeper<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/数据库/" title="数据库">数据库<sup>10</sup></a></li>
		  
		
		  
			<li><a href="/categories/杂记/" title="杂记">杂记<sup>23</sup></a></li>
		  
		
		  
			<li><a href="/categories/算法/" title="算法">算法<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/编程语言/" title="编程语言">编程语言<sup>20</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/Netty/" title="Netty">Netty<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/asm/" title="asm">asm<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Spring/" title="Spring">Spring<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Guice/" title="Guice">Guice<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://vertx.yu66.wang/" target="_blank" title="vertx3">vertx3</a>
            
          </li>
        
    </ul>
</div>

  

<div class="doubanshow">
<p class="asidetitle">Douban Show</p>
<div>
<script type="text/javascript" src="http://www.douban.com/service/badge/xxxyy/?show=collection&amp;n=12&amp;columns=3&amp;hidelogo=yes&amp;hideself=yes&amp;cat=book|movie" ></script>
</div>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=3253370782&verifier=e9ca895b&dpc=1"></iframe>
</div>


  

<div class="lofter">
<p class="asidetitle">Lofter</p>

 <iframe width="100%" height="39" class="share_self"  frameborder="0" scrolling="no" src="http://ming15.lofter.com/"></iframe>
</div>




</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> 博客,我选择重构 <br/>
			重构使事情变得更美,更加正确</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/3253370782" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/yu66" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		<a href="https://www.douban.com/people/xxxyy" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		<a href="http://www.zhihu.com/people/ming15" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="王玉">王玉</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"wanggnim"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F9e8fca440159a2125668804e46682db4' type='text/javascript'%3E%3C/script%3E"));
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
