category: 
- threadManager
title: threadManager\ÊØ»¤Ïß³ÌµÄ´´½¨ºÍÔËĞĞ
---
å®ˆæŠ¤çº¿ç¨‹çš„ä¼˜å…ˆçº§å¾ˆä½,é€šå¸¸æ¥è¯´,åŒä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­æ²¡æœ‰å…¶ä»–çš„çº¿ç¨‹è¿è¡Œ,å®ˆæŠ¤çº¿ç¨‹æ‰è¿è¡Œ
å½“å®ˆæŠ¤çº¿ç¨‹è¿è¡Œç»“æŸå,JVMä¹Ÿå°±ç»“æŸäº†è¿™ä¸ªåº”ç”¨ç¨‹åº

å®ˆæŠ¤çº¿ç¨‹é€šå¸¸ç”¨æ¥ä½œä¸ºåŒä¸€ç¨‹åºä¸­æ™®é€šçº¿ç¨‹çš„æœåŠ¡æä¾›è€…,å› ä¸ºæ²¡æœ‰åŠæ³•ç¡®å®šå®ˆæŠ¤çº¿ç¨‹ä»€ä¹ˆæ—¶å€™æ‰èƒ½è·å–CPUæ—¶é’Ÿ,
è€Œä¸”åœ¨æ²¡æœ‰å…¶ä»–çº¿ç¨‹è¿è¡Œçš„æ—¶å€™,å®ˆæŠ¤çº¿ç¨‹éšæ—¶å¯èƒ½ä¼šç»“æŸ

###### ä¸€ä¸ªå…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹å°±æ˜¯javaçš„åƒåœ¾å›æ”¶å™¨

`setDeamon()`æ–¹æ³•åªèƒ½åœ¨`start()`æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨,ä¸€æ—¦çº¿ç¨‹å¼€å§‹è¿è¡Œ,å°†ä¸èƒ½å†ä¿®æ”¹å…¶çŠ¶æ€

> æ³¨: éœ€è¦æ³¨æ„çš„æ˜¯,åªæœ‰åœ¨æ²¡æœ‰ç”¨æˆ·çº¿ç¨‹è¿è¡Œçš„æ—¶å€™,è€Œä¸æ˜¯æ²¡æœ‰ç”¨æˆ·çº¿ç¨‹å­˜åœ¨çš„æ—¶å€™  å®ˆæŠ¤çº¿ç¨‹æ‰è¿è¡Œ
> ä¾‹å¦‚å½“æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹å¤šæ²‰ç¡å,ä¹Ÿä¼šè¢«è§†ä¸ºæ²¡æœ‰ç”¨æˆ·çº¿ç¨‹æ‰§è¡Œ

1. hread.setDaemon(true)å¿…é¡»åœ¨thread.start()ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™ä¼šè·‘å‡ºä¸€ä¸ªIllegalThreadStateExceptionå¼‚å¸¸ã€‚ä½ ä¸èƒ½æŠŠæ­£åœ¨è¿è¡Œçš„å¸¸è§„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚
2. åœ¨Daemonçº¿ç¨‹ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿæ˜¯Daemonçš„
3. ä¸æ˜¯æ‰€æœ‰çš„åº”ç”¨éƒ½å¯ä»¥åˆ†é…ç»™Daemonçº¿ç¨‹æ¥è¿›è¡ŒæœåŠ¡ï¼Œæ¯”å¦‚è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘ã€‚å› ä¸ºåœ¨Daemon Threadè¿˜æ²¡æ¥çš„åŠè¿›è¡Œæ“ä½œæ—¶ï¼Œè™šæ‹Ÿæœºå¯èƒ½å·²ç»é€€å‡ºäº†ã€‚
4. å½“ç”¨æˆ·çº¿ç¨‹éƒ½è¿è¡Œå®Œå,å®ˆæŠ¤çº¿ç¨‹ä¹Ÿå°±è·Ÿç€ç»“æŸäº†

```java
public class Main {
	public static void main(String[] args) {
		DeameanThread dt = new DeameanThread();
		NormalThread nt = new NormalThread();
		nt.start();
		dt.start();
		System.out.println("main");
	}
}

class NormalThread extends Thread {
	NormalThread() {
		setDaemon(false);
	}
	@Override
	public void run() {
		long old = System.currentTimeMillis();
		while((System.currentTimeMillis() - old) < 3000) {}
		System.out.println("NormalThread");
	}
}

class DeameanThread extends Thread {
	DeameanThread() {
		setDaemon(true);
	}
	@Override
	public void run() {
		while(true){}
	}
}

```
